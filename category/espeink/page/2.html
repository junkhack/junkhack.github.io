<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://hack.gpl.jp/xmlrpc.php">

<title>espeink &#8211; ページ 2 &#8211; JunkHack</title>
<style type="text/css">.wpfts-result-item .wpfts-smart-excerpt {}.wpfts-result-item .wpfts-not-found {color:#808080;font-size:0.9em;}.wpfts-result-item .wpfts-score {color:#006621;font-size:0.9em;}.wpfts-shift {margin-left:40px;}.wpfts-result-item .wpfts-download-link {color:#006621;font-size:0.9em;}.wpfts-result-item .wpfts-file-size {color:#006621;font-size:0.9em;}</style><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//hack.gpl.jp' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="https://hack.gpl.jp/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; コメントフィード" href="https://hack.gpl.jp/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; espeink カテゴリーのフィード" href="https://hack.gpl.jp/category/espeink/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/hack.gpl.jp\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' href='./../../../css/dist-block-library-style.min.css'>
<link rel='stylesheet' href='./../../../css/export-wp-page-to-static-html-pro-premium-public-css-export-wp-page-to-static-html-public.css'>
<link rel='stylesheet' href='./../../../css/fulltext-search-style-wpfts_autocomplete.css'>
<link rel='stylesheet' href='./../../../css/wp-external-links-public-css-wpel.css'>
<link rel='stylesheet' href='./../../../css/wpfront-scroll-top-css-wpfront-scroll-top.min.css'>
<link rel='stylesheet' href='./../../../css/ccrw_related-css-frontend-style.css'>
<link rel='stylesheet' id='hew-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' href='./../../../css/hew-wpcom-genericons-genericons.css'>
<link rel='stylesheet' href='./../../../css/hew-wpcom-style.css'>
		<script>
			/* <![CDATA[ */
			var rcewpp = {
				"ajax_url":"https://hack.gpl.jp/wp-admin/admin-ajax.php",
				"nonce": "4eef5ded05",
				"home_url": "https://hack.gpl.jp/",
				"settings_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings.png',
				"settings_hover_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings_hover.png'
			};
			/* ]]\> */
		</script>
		<script type='text/javascript' src='./../../../js/jquery-3.5.1.min.js' id='jquery-core-js'></script>
<script type='text/javascript' src='./../../../js/jquery-migrate-3.3.0.min.js' id='jquery-migrate-js'></script>
<script type='text/javascript' src='./../../../js/export-wp-page-to-static-html-public.js' id='export-wp-page-to-static-html-js'></script>
<script type='text/javascript' src='./../../../js/wpfts_frontend.js' id='wpfts_frontend-js'></script>
<link rel="https://api.w.org/" href="https://hack.gpl.jp/wp-json/" /><link rel="alternate" type="application/json" href="https://hack.gpl.jp/wp-json/wp/v2/categories/31" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hack.gpl.jp/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hack.gpl.jp/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.7.2" />
<script type="text/javascript">
		document.wpfts_ajaxurl = "https://hack.gpl.jp/wp-admin/admin-ajax.php";
	</script>				<style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none}}</style>
			<script data-ad-client="ca-pub-2711753458083215" async src="./../../../js/adsbygoogle.js"></script>
</head>

<script async src="./../../../js/9722.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-13YWDXYQE2');
</script>
<body class="archive paged category category-espeink category-31 paged-2 category-paged-2 has-sidebar">
<div id="page" class="hfeed site">
		<div id="widgets-wrapper" class="hide">
		
<div id="secondary" class="wrap top-widget-area" role="complementary">
	
	
	
		<div id="sidebar-4" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://hack.gpl.jp/">
				<label>
					<span class="screen-reader-text">検索:</span>
					<input type="search" class="search-field" placeholder="検索&hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="検索" />
			</form></aside>	</div><!-- #four .widget-area -->
	</div><!-- #secondary -->
	</div>
	
	<a class="skip-link screen-reader-text" href="">コンテンツへ移動</a>

	<header id="masthead" class="site-header" role="banner">
		<a class="site-logo" href="./index.html" title="JunkHack" rel="home noopener noreferrer" data-wpel-link="internal">
<img src="images/7005.jpg" width="80" height="80" alt="" class="no-grav header-image" />
</a>
		<div class="site-branding">
			<h1 class="site-title"><a href="./../../../index.html" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
			<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
		</div>

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button>
				<div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu"><li id="menu-item-9578" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9578"><a href="./../../../index-list.html" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-9594" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9594"><a href="./../../../status.html" data-wpel-link="internal" rel="noopener noreferrer">Status</a></li>
</ul></div>			</nav><!-- #site-navigation -->
		
		
				<div class="toggle-wrapper">
			<a href="" class="widgets-toggle toggle-button" title="ウィジェット">
				<span class="screen-reader-text">ウィジェット</span>
			</a>
		</div>
		
	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">カテゴリー: <span>espeink</span></h1>			</header><!-- .page-header -->

						
				
<article id="post-1212" class="post-1212 post type-post status-publish format-standard hentry category-espeink category-pcb">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/1212/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-17T22:20:33+09:00">2015年9月17日</time></a> </span><span class="posted-on">更新日:2015年9月17日</span> <span class="categories">  <a href="./../../../category/espeink.html" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../../../category/pcb.html" rel="category tag noopener noreferrer" data-wpel-link="internal">PCB</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /1212.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">Eagle の自動配線</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			</p>
<p>さて、全部の配線とパーツリストの選択が終わったので、PCB の自動配線を試してみたくなりました。作者の手本を参考にあれこれ置いてまだ試している最中ですが、そのスクリーンショットです。</p>
<p>&#160;</p>
<p>これが、配置したところの図です。</p>
<p><img loading="lazy" title="1_Board_-__Users_ishizaka_Documents_eagle_WiFi_E-link_WiFi_E-link_brd_-_EAGLE_7_2_0_Light" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="1_Board_-__Users_ishizaka_Documents_eagle_WiFi_E-link_WiFi_E-link_brd_-_EAGLE_7_2_0_Light" src="./../../../images/1_board___users_ishizaka_documents_eagle_wifi_elink_wifi_elink_brd__eagle_7_2_0_light.png" width="766" height="776" /></p>
<p>こんな感じで簡単操作。</p>
<p>&#160;<img loading="lazy" title="a" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="a" src="./../../../images/a.png" width="640" height="381" /> </p>
<p><img loading="lazy" title="b" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="b" src="./../../../images/b.png" width="642" height="998" /> </p>
<p>気に入るまで、配置しなおしたり、配線したりを繰り返して試しています。このときは、93.6% まで配線してくれたようです。</p>
<p>&#160;</p>
<p>そして、これがオートルートの９３％完了のパターン。</p>
<p><img loading="lazy" title="5" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="5" src="./../../../images/5.png" width="760" height="1167" /></p>
<p>こっちは、９１．７％ですが、スルーホールが80個と少なくなっているものです。</p>
<p><img loading="lazy" title="4" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="4" src="./../../../images/4.png" width="761" height="1180" /> </p>
</p>
<p>手で配線していたら、日が暮れそうなので自動配線助かりますね。</p>
<p>&#160;</p>
<p>パーツを配置しなおしたり、回転させたりといろいろとやっていると、パーセンテージが上がっていきます。最高で93.7％くらいまで行きました。LT の IC 周りと、FPC コネクター周りの数本がどうしても配線できないようです。</p>
<p>このあたりは手作業ですかね。</p>
<p>&#160;</p>
<p>配線のやり直しは、以下のコマンドを入力すると何回でもやり直せます。</p>
<blockquote>
<p>ripup;</p>
</blockquote>
<p>配置の微妙なグリッド調整は、osx だとオプションキーを押すと良いようです。</p>
<p>&#160;</p>
<p>どうしても、このあたりが自動配線できないようです。</p>
</p>
<p><img loading="lazy" title="c" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="c" src="./../../../images/c.png" width="807" height="1138" /> </p>
<p>まだ手作業で修正する方法は知らないので、今度の休みにでもやり方を覚えてみようと思います。</p>
<p>&#160;</p>
<p>下は、作業の流れをつかむため、Fusion PCB のcam ファイルから、ガーバーファイルを出力し、kikad の gerbview で見たところ。ドリルデータの穴の位置が大幅にずれるのはなにか設定でしょうかね？</p>
<p>まだ、シルク印刷の部分と、マスク面など手をつけていないので、そのあたりは手作業ですかね。</p>
<p><img loading="lazy" title="d" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="d" src="./../../../images/d.png" width="791" height="404" /> </p>
<p>こんな配線は、ユニバーサル基盤では考えるだけでも面倒なので、自動配線ありがたいです。</p>
<p>結構綺麗に配線できてると思いますが、プロの方から見るともっとこうした方が良いっていう部分もあるのでしょうね。</p>
<p><img loading="lazy" title="about_kicad_gerbview" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="about_kicad_gerbview" src="./../../../images/about_kicad_gerbview.png" width="640" height="447" /> </p>
</p>
<p>とりあえず、なんにも知らずにポチぽちと部品を選択し、回路図を描いて、PCB の大きさの上に置いただけで、ここまでできます。偉大ですね。</p>
<p>&#160;</p>
<p>一番面倒なのは、部品をパーツリストから選択するところと、その前段で、パーツリストのデータをいろいろなところから集めてくるのが面倒。逆に、使う部品がある程度決まっている場合、本当に楽です。</p>
<p>Eagle や kicad を使って設計し、プリントサービスに基盤を出して何か作るっていうステップは、ありかもなと思い出しているところです。エッチングして基盤を作るステップを思えば、ちょっと時間はかかるけど、金額はおこずかいの範囲なので、毎月1つ、プリントに出して遊べそうですね。設計が間に合わないとは思いますが。</p>
<p>&#160;</p>
<p>回路図と、PCBの配置をして、E-ink の仕様書のpin と作者の配線が微妙に違う部分もあり、このあたりは、実際にトライエラーを繰り返さないと不明な部分も出てきていますが、問題も少しづつわかってきています。</p>
<p>&#160;</p>
<p>次回は、ソフトウェア部分の検証と、それが行けそうかなと思えば、いよいよパーツ発注です。さて、本当に動くのでしょうかね。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1223" class="post-1223 post type-post status-publish format-standard hentry category-aliexpress category-esp8266 category-espeink category-pcb">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/1223/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-20T06:44:48+09:00">2015年9月20日</time></a> </span><span class="posted-on">更新日:2015年9月20日</span> <span class="categories">  <a href="./../../../category/aliexpress.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/espeink.html" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../../../category/pcb.html" rel="category tag noopener noreferrer" data-wpel-link="internal">PCB</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /1223.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">プリント基板データを作成中</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>だいぶ、自動配線のコツもつかんで、Eagle の操作も少しづつ覚えてきました。Name の文字の大きさや位置を調整するのがわからなかったのですが、どうやら、smash してから文字を選択できる状態に分解して回転や、右クリックでプロパティーで文字の大きさやスタイルなどを調整するようです。</p>
<p>&#160;</p>
<p>自動配線のコツは、ある程度配置を最善にして９０％くらいまで最初に配線。その後、部分的に消したり、一部手動で途中まで配線したりして、再度自動配線をすると、うまくいきます。</p>
<p>&#160;</p>
<p>インダクタは、流通も多いTDK のこれを使うことに。接地する面が少なく、配線しやすい。</p>
<blockquote>
<p>SLF7045T-220MR90-PF</p>
<p><a href="http://datasheet.octopart.com/SLF7045T-100M1R3-PF-TDK-datasheet-4837.pdf" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">datasheet<span class="wpel-icon wpel-image wpel-icon-1"></span></a>       <br /><a href="http://product.tdk.com/ja/catalog/datasheets/inductor_commercial_power_slf7045_ja.pdf" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">SLF7045 type<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://product.tdk.com/inductor/ind/detailed_information.php?lang=ja&amp;part_no=SLF7045T-220MR90-PF" target="_blank" rel="noopener noreferrer external" data-wpel-link="external"><img loading="lazy" title="SLF7045T-220MR90-PF" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="SLF7045T-220MR90-PF" src="./../../../images/slf7045t220mr90pf.png" width="600" height="654" /></a> </p>
<p>x 10 \933      <br /><a title="http://www.aliexpress.com/item/7x7MM-22uH-960mA-Shielded-SMD-Power-Inductors-Inductance-SLF7032T-220MR96-TDK/1084729640.html?isOrigTitle=true" href="http://www.aliexpress.com/item/7x7MM-22uH-960mA-Shielded-SMD-Power-Inductors-Inductance-SLF7032T-220MR96-TDK/1084729640.html?isOrigTitle=true" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">http://www.aliexpress.com/item/7x7MM-22uH-960mA-Shielded-SMD-Power-Inductors-Inductance-SLF7032T-220MR96-TDK/1084729640.html?isOrigTitle=true<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p><img loading="lazy" title="tdk" style="float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;" border="0" alt="tdk" src="./../../../images/tdk.png" width="475" height="480" /> </p>
<p>ちょっと配置を変えて、今のところはこんな感じになっています。smd はリフローというつけ方が楽そうで、半田ペーストをステンシルで一気につけて、SMD 部品を置いてあとはホットプレートで230度まで加熱するという感じだそうです。</p>
<p>Eagle で、tCream というレイヤーが半田をつける面で、以下がそれです。</p>
<p><img loading="lazy" title="mask" style="float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;" border="0" alt="mask" src="./../../../images/mask.png" width="478" height="480" /> </p>
<p>ステンシルを作る説明は、SWATCH SCIENCE さんの trac にありました。</p>
<blockquote>
<p><a href="http://trac.switch-science.com/wiki/CraftRoboReflow" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">Craft ROBOを使ったリフローはんだづけ用ステンシルの作製<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>動画を見ると、ほーなるほどとなります。    </p>
<p>[youtube https://www.youtube.com/watch?v=prjB_myCwSY]</p>
<p>なるほどー 。この方法なら、うまく半田付けできるかも。実際に紙に印刷してみたんですが、めちゃくちゃ細かいのでできるかちょっと心配ですが。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1230" class="post-1230 post type-post status-publish format-standard hentry category-aliexpress category-esp8266 category-espeink category-pcb">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/1230/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-20T20:57:56+09:00">2015年9月20日</time></a> </span><span class="posted-on">更新日:2015年9月20日</span> <span class="categories">  <a href="./../../../category/aliexpress.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/espeink.html" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../../../category/pcb.html" rel="category tag noopener noreferrer" data-wpel-link="internal">PCB</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /1230.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">PCB の裏面のシルクに画像を入れてみた</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>E-ink controller は CC BY-SA だったので、そのロゴと、オープンソース・ハードウェアのロゴも入れてみました。</p>
<p>これは、ミラーした状態にする必要があるのかわかりませんでしたが、ちょっとテストで入れてみることに。</p>
<p><img loading="lazy" title="osshw" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="osshw" src="./../../../images/osshw.png" width="477" height="480" /> </p>
<p>横幅2000px くらいのビットマップ画像を白黒にして、黒いところだけチェックを入れるといいようです。</p>
<p>画像は、bmp 形式でインポートするとウィザードがあるようでした。係数に、0.4 を入れて縮小しておきました。レイヤーは、bPlace に入れておけばよいようです。</p>
<p>複数選択をして、レイヤーを変更する方法がなかなかわからず、操作に手惑いました。</p>
<p>・ポイント</p>
<p> グループ選択する</p>
<p> チェンジアイコンからレイヤーを指定。</p>
<p> その後、グループ選択してある対象をクリック</p>
<p>&#160;</p>
<p>インターフェイスが悪いというか、ちょっとこのあたりは要改善してほしいですね。</p>
<p>&#160;</p>
<p>画像でロゴが入れられるということは、JunkHack のロゴも何か作りたくなってきますね。</p>
<p>&#160;</p>
<p>さて、次はソースコードでも見てみますか。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1236" class="post-1236 post type-post status-publish format-standard hentry category-aliexpress category-esp8266 category-espeink category-parts category-pcb">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/1236/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-21T06:03:41+09:00">2015年9月21日</time></a> </span><span class="posted-on">更新日:2015年9月21日</span> <span class="categories">  <a href="./../../../category/aliexpress.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/espeink.html" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../../../category/parts.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a>, <a href="./../../../category/pcb.html" rel="category tag noopener noreferrer" data-wpel-link="internal">PCB</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /1236.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">ED060SC4 のpin 9 と pin 10</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ED060SC4のデータシートには、Pin9 と Pin10 はNC とありますが、作者の手書きの図には つながっているようです。</p>
<p><img loading="lazy" title="schema_esp" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="schema_esp" src="./../../../images/schema_esp.png" width="602" height="480" /> </p>
<p>作者のサイトに行くと、どうやらED060SC4のリビジョン違いでNCになっているものとそうでないものがあるようです。FPCケーブルを見ると、そのpin がつながっていないものは、NC でつながっているように見えるものは新しいものかもしれません。</p>
<p>この違いで、作者はロジックアナライザで解析したそうです。</p>
<p>コネクタの位置でいうと、以下の部分です。</p>
<p><img loading="lazy" title="aaa" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="aaa" src="./../../../images/aaa.png" width="640" height="400" /> </p>
<p>とりあえず、PCB上では配線しておいて、E-ink のものを見て判断するしかないようです。NC のものであればカットすればよいはずです。</p>
<p><img loading="lazy" title="aaaa" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="aaaa" src="./../../../images/aaaa.png" width="614" height="300" /> </p>
<p>今のところの理解では、ED060SC4 のリビジョン２であればこのpin は作者のようにつなげば良いはずです。それにしても、このあたりの配線、via が多くなってしまいました。0.3mm 幅でもう少し綺麗に配線しないとですね。自動配線に頼りっぱなしで。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1238" class="post-1238 post type-post status-publish format-standard hentry category-aliexpress category-digikey category-espeink category-mouser category-parts">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/1238/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-21T18:36:01+09:00">2015年9月21日</time></a> </span><span class="posted-on">更新日:2015年9月21日</span> <span class="categories">  <a href="./../../../category/aliexpress.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="https://hack.gpl.jp/category/digikey/" rel="category tag noopener noreferrer" data-wpel-link="internal">digikey</a>, <a href="./../../../category/espeink.html" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="https://hack.gpl.jp/category/mouser/" rel="category tag noopener noreferrer" data-wpel-link="internal">Mouser</a>, <a href="./../../../category/parts.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /1238.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">WiFi E-ink display 部品整理</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ハードウェアの検証がおおよそ終わったので、部品のパーツリストと購入先を整理しておきます。</p>
<p>コンデンサは抵抗のようにパックのようなものにするか、バラにするか迷っています。今後も、SMD実装の工作をするなら買っておいてもいいかなぁ。、、、4250個も抵抗つかわないよね、きっと。</p>
<p>IC の価格が安いので、全部aliexpress での購入見込みです。インダクタは、太陽誘電のほうが薄くて小さく、安かったのでこっちにするかも。いろいろ物色して、sumida のが安かったのでこれにしました。</p>
<p>&#160;<img loading="lazy" title="ssss" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="ssss" src="./../../../images/ssss.png" width="481" height="480" /> </p>
<p>51 番のレイヤー tDocs っていうのはこうのがあるんですね。</p>
<p><img loading="lazy" title="WiFi E-link4" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="WiFi E-link4" src="./../../../images/wifielink4.png" width="478" height="480" /> </p>
<p>&#160;</p>
<table cellspacing="0" cellpadding="2" width="633" border="0">
<tbody>
<tr>
<td valign="top" width="85">回路図での部品名</td>
<td valign="top" width="57">数量</td>
<td valign="top" width="232">部品名称</td>
<td valign="top" width="99">価格（数量）</td>
<td valign="top" width="158">備考</td>
</tr>
<tr>
<td valign="top" width="85">N/A</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/100-Original-ED060SC4-ED060SC4-LF-6-E-link-EBook-LCD-screen-for-Amazon-kindle-2-for/32393137707.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">ED060SC4(LF)<span class="wpel-icon wpel-image wpel-icon-1"></span></a> </td>
<td valign="top" width="99">1578(1)</td>
<td valign="top" width="158">リビジョン2</td>
</tr>
<tr>
<td valign="top" width="85">L1,L2</td>
<td valign="top" width="57">2</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/7x7MM-22uH-960mA-Shielded-SMD-Power-Inductors-Inductance-SLF7032T-220MR96-TDK/1084729640.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">SLF7045T-220MR90-PF<span class="wpel-icon wpel-image wpel-icon-1"></span></a> (TDK)           <br /><a href="http://www.aliexpress.com/item/20pcs-lot-NR6028T220M-SMD-inductors-6-6-22uH-100-NEW/32436876908.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">NR6028T220M<span class="wpel-icon wpel-image wpel-icon-1"></span></a> (Taiyo Yuden)          <br /><a href="http://www.aliexpress.com/item/CDRH6D28NP-220NC-6X6X2-8-22UH-shielded-Inductors-30pcs/32366074742.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">CDRH6D28NP-220NC<span class="wpel-icon wpel-image wpel-icon-1"></span></a>(Sumida)</td>
<td valign="top" width="99">933(10)          <br />1097(20)          <br />1192(30)</td>
<td valign="top" width="158">900mA 7x7x4.5mm          <br />1300mA 6x6x2.8          <br />1300mA 7x7x3</td>
</tr>
<tr>
<td valign="top" width="85">C2</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232">0603 smd 100pF &gt;25V</td>
<td valign="top" width="99">1</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">C4</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232">0603 smd 4.7pF &gt;25V</td>
<td valign="top" width="99">1</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">IC1</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/LT1945EMS-LT1945-MSOP10-Original-authentic-and-new-in-stock-Free-Shipping-IC/2053692331.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">LT1945<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">1403(10)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">IC2</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/Free-Shipping-10PCS-3-09-Integrated-Circuits-Types-MC79L15ACDR2G-IC-REG-LDO-15V-1A-8-SOIC/32401571794.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">MC79L15<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">684(10)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">IC3</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/FreeShipping-50PCS-lot-L78L15ACD13TR-IC-REG-LDO-15V-1A-SOIC-8-L78L15ACD13TR/1844845142.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">L78L15<span class="wpel-icon wpel-image wpel-icon-1"></span></a>(L78L15ACD13TR) </td>
<td valign="top" width="99">786(20)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">IC4</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/FREE-SHIPPING-10PCS-LOT-MCP1802-MCP1802T-3302I-OT-IC-REG-LDO-3-3V-0-26A-SOT23/32233456841.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">MCP1802T-3302I/OT<span class="wpel-icon wpel-image wpel-icon-1"></span></a> </td>
<td valign="top" width="99">546(10)</td>
<td valign="top" width="158">3.3V に変更</td>
</tr>
<tr>
<td valign="top" width="85">IC5</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/Free-shipping-10pcs-lot-LM358DG-SOP-8/32375700604.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">LM358<span class="wpel-icon wpel-image wpel-icon-1"></span></a> (LM358DG) </td>
<td valign="top" width="99">559(10)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">IC6</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/Free-Shipping-10-PCS-MCP73831T-2ACI-OT-MCP73831T-2ACI-SOT-23-5-MCP73831/729112631.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">MCP73831<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">287(10)</td>
<td valign="top" width="158">リチウム充電管理</td>
</tr>
<tr>
<td valign="top" width="85">IC7,8</td>
<td valign="top" width="57">2</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/Free-shipping-The-new-original-Chip-74LV4094D-IC-SOP-16IC/32324838094.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">74LV4094<span class="wpel-icon wpel-image wpel-icon-1"></span></a>(74LV4094D)           <br /><a href="http://www.aliexpress.com/item/SMD-74HC4094D-SOP16-100-brand-new-original-authentic-WHSDZ/32466161850.html?spm=2114.01020208.3.26.plzYft&amp;ws_ab_test=201526_5,201527_4_71_72_73_74_75,201409_3" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">74HC4094D<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">699(10)          <br />488(10)</td>
<td valign="top" width="158">互換品 74HC4094D の方が安い</td>
</tr>
<tr>
<td valign="top" width="85">D1,2,3</td>
<td valign="top" width="57">3</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/Free-Shipping-10PCS-2-92-Diy-Kit-Electronic-Production-SS24T3G-DIODE-SCHOTTKY-POWER-2A-40V-SMB/32402740798.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">SS24<span class="wpel-icon wpel-image wpel-icon-1"></span></a> (SS24T3G) </td>
<td valign="top" width="99">662(10)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">D4</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232">0603 <a href="http://www.aliexpress.com/item/5-colors-x20pcs-100pcs-SMD-0603-led-Super-Bright-Red-Green-Blue-Yellow-White-Water-Clear/32383494488.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">LED<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">283(100)</td>
<td valign="top" width="158">5 colors x20pcs =100pcs</td>
</tr>
<tr>
<td valign="top" width="85">C5, C6</td>
<td valign="top" width="57">2</td>
<td valign="top" width="232">0603 100nF &gt;25V</td>
<td valign="top" width="99">&#160;</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">C7, C8</td>
<td valign="top" width="57">2</td>
<td valign="top" width="232">0603 2.2uf &gt;25V</td>
<td valign="top" width="99">&#160;</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">C3, C11, C12</td>
<td valign="top" width="57">3</td>
<td valign="top" width="232">0603 4.7uf</td>
<td valign="top" width="99">&#160;</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">C1,C5,C6,          <br />C9,C10,           <br />C13,C14</td>
<td valign="top" width="57">7</td>
<td valign="top" width="232">0603 100nf</td>
<td valign="top" width="99">&#160;</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">C15, C16</td>
<td valign="top" width="57">2</td>
<td valign="top" width="232">1206 <a href="http://www.aliexpress.com/item/NEW-1206-226-pF-10UF-SMD-Capacitors-Kit-Chip-ceramic-Capacitors-22uf-100-pcs/32300888381.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">100uF<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">996(100)</td>
<td valign="top" width="158">100 個もいらないので、代替を考慮</td>
</tr>
<tr>
<td valign="top" width="85">VR1</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232">smd <a href="http://www.aliexpress.com/item/100K-3-3-Trimmer-Resistors-EVM3ESX50B15-Adjustable-potentiometer-20Pcs-Lot-Free-Shipping/32451858779.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">100K trimmer<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">237(20)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">CON1</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/free-shipping-20pcs-for-HRS-FH26-39S-0-3SHW-Double-row-displacement-under-the-foot-patch/2041822109.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">FH26-39S-0.3SHW<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">1247(20)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">CON2</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232">miniUSB <a href="http://www.aliexpress.com/item/Original-UX60-MB-5ST-5P-USB-MINI-UX60-MB-5ST/32463556641.html?spm=2114.01020208.3.2.TKg8dv&amp;ws_ab_test=201526_5,201527_4_71_72_73_74_75,201409_3" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">UX60-MB-5ST<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">1045(20)</td>
<td valign="top" width="158">マイクロUSB のほうが良いか？</td>
</tr>
<tr>
<td valign="top" width="85">Q1,Q2</td>
<td valign="top" width="57">2</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/Ir-irlml6402tr-sot23-marking-e3w2y-mosfet-irlml6402/1670066407.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">IRLML6402TRPBF<span class="wpel-icon wpel-image wpel-icon-1"></span></a>           <br />(SOT-23 P-chan mosFET) </td>
<td valign="top" width="99">337(50)</td>
<td valign="top" width="158">&#160;</td>
</tr>
<tr>
<td valign="top" width="85">R1 &#8211; R15</td>
<td valign="top" width="57">15</td>
<td valign="top" width="232">0603 抵抗セット <a href="http://www.aliexpress.com/store/product/Free-shipping-0603-SMD-Resistor-Sample-Book-1-Tolerance-170valuesx25pcs-4250pcs-Resistor-Kit-0R-10M/503693_1912807187.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">170valuesx25pcs=4250pcs<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">2815(4250)</td>
<td valign="top" width="158">バラのほうがいいかしら？</td>
</tr>
<tr>
<td valign="top" width="85">N/A</td>
<td valign="top" width="57">1</td>
<td valign="top" width="232"><a href="http://www.aliexpress.com/item/For-Samsung-Galaxy-Star-Advance-Battery-G350E-Batteries-For-Galaxy-Star-2-Plus-AKKU-ACCU-For/32444833676.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">samsung galaxy note 2 battery<span class="wpel-icon wpel-image wpel-icon-1"></span></a></td>
<td valign="top" width="99">637</td>
<td valign="top" width="158">互換品</td>
</tr>
</tbody>
</table>
<p>&#160;</p>
<p>あと、部品検索していて見つけたページですが、以下の方は、E-ink を Raspi で使おうと計画しているようです。</p>
<blockquote>
<p>A project log for E-ink Raspberry Pi display</p>
<p><a title="https://hackaday.io/project/4446-e-ink-raspberry-pi-display/log/16786-research" href="https://hackaday.io/project/4446-e-ink-raspberry-pi-display/log/16786-research" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://hackaday.io/project/4446-e-ink-raspberry-pi-display/log/16786-research<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>信号作成は、raspi にさせるようです。まだ途中のようですがウォッチしていきたいです。信号作成部分がどうなっているのかソフトウェア的にまだしていませんので。この方も、まだソフトウェアは作っていないようです。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1252" class="post-1252 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="./../../../1252.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-23T20:13:18+09:00">2015年9月23日</time></a> </span><span class="posted-on">更新日:2015年9月23日</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/espeink.html" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../../../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /1252.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink のソースをコンパイル</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>さて、ハードの調査が終わったので、今度はソースファイルの調査です。</p>
<p>まず、ざっとソースコードを見てみます。</p>
<p>osx 10.9.5 でやっています。</p>
<blockquote>
<p>▼ソースをゲット     <br />$ git clone <a href="http://git.spritesserver.nl/espeink.git/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://git.spritesserver.nl/espeink.git/<span class="wpel-icon wpel-image wpel-icon-1"></span></a>      <br />$ cd espeink/      <br />$ git submodule init      <br />$ git submodule update</p>
</blockquote>
<p>以下のことがわかりました。</p>
<p>▼ソフトウェア概略   <br />・ESP12 の中で動作するwebサーバがmkespfsimageを使いe-ink にレンダリング    <br />・データ受け渡しは、PhantomJS（pixelserver.js）を使っているよう    <br />・画像形式は、.bm という白黒２値（グレー表示はあるのかな？）800&#215;600を使用    <br />・デフォルトで60秒ごとにsleep から目覚めるよう -&gt; sleeptime , system_deep_sleep(60*1000*1000);    <br />・初回起動時は、アクセスポイントの表示の初期設定が動作。メモリの特定領域に値があるかないかを見ている模様 -&gt; RTC_MAGIC    <br />・ライセンスは、Beer-Ware license 🙂    <br /><a href="https://en.wikipedia.org/wiki/Beerware" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://en.wikipedia.org/wiki/Beerware<span class="wpel-icon wpel-image wpel-icon-1"></span></a>    <br />&" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/atomicobject/heatshrink<span class="wpel-icon wpel-image wpel-icon-1"></span></a>    <br />&#160; Lempel–Ziv–Storer–Szymanski (LZSS)ベースのようです。    <br />・ソースをビルドするには、SDK (toolchain) が必要    <br />・esp-open-sdkの環境を作れば良いかと思う    <br />・環境構築は、osx でまずチャレンジ</p>
<p>&#160;</p>
<p>PhantomJSって何でしょうか？</p>
<p>とりあえず、まぁ、使ってみれば理解も深まるはずです。</p>
<p>osx のローカルに入れてみます。</p>
<blockquote>
<p>$ brew install phantomjs</p>
</blockquote>
<p>サンプルはググって以下のようにしました。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- test.js
// Headless ブラウザの生成
var page = require('webpage').create();

// URL を開く
page.open('https://hack.gpl.jp/about/', function(status) {
    if (status === 'success') {
        // スクリーンキャプチャ
        page.render('junkhack.png');
        // ブラウザ内で JS を実行してデータを受け取る
        var title = page.evaluate(function() {
            var title = document.title;
            return title;
        });
        console.log(title);
    }
    // exit しないと終了しない
    phantom.exit();
});</pre>
<p>&#160;</p>
<p>・実行してみます。</p>
<blockquote>
<p>$ phantomjs test.js</p>
</blockquote>
<p>カレントディレクトリに、junkhack.png ができている。ほーなるほど。<br />
  <br />ということは、PhantomJSが動作するサーバが必要だってことでしょうかね？ESP12 でPhantomJSが動作するということですかね？ちょっとこのあたりは良くわかっていません。</p>
<p>その内、進むにつれ解るはずだと思うので、スルーします。</p>
<p>&#160;</p>
<p><img loading="lazy" title="junkhack 2" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="junkhack 2" src="./../../../images/junkhack2.png" width="400" height="1096" /> </p>
<p>とりあえず、osx でビルドする環境を整えてみることにしてみます。</p>
<p>&#160;</p>
<p>▼ビルドする環境の構築 for osx 10.9.5 </p>
<p>・以下にある説明通り </p>
<p><a href="https://github.com/pfalcon/esp-open-sdk" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/pfalcon/esp-open-sdk<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<blockquote>
<p>$ brew tap homebrew/dupes<br />
    <br />$ brew install binutils coreutils automake wget gawk libtool gperf gnu-sed &#8211;with-default-names grep</p>
</blockquote>
<p>★ちょっと時間はかかります。エラーになっていないかコンソールを確認。</p>
<p>&#160;</p>
<p>・sed は gnu のを使うようにするようです。以下のようにならなければ、パスを.bash_profileに設定しておきます。 </p>
<p>&#160;&#160;&#160; $ which sed<br />
  <br />&#160;&#160;&#160; /usr/local/opt/gnu-sed/libexec/gnubin/sed </p>
<p>$ export PATH=&quot;/usr/local/opt/gnu-sed/libexec/gnubin:$PATH&quot;</p>
<p>&#160;</p>
<p>・10G の大文字小文字ファイル名を区別するHFS+ボリュームを作製。マウントし、移動。 </p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ sudo hdiutil create ~/Documents/case-sensitive.dmg -volname &quot;case-sensitive&quot; -size 10g -fs &quot;Case-sensitive HFS+&quot;
$ sudo hdiutil mount ~/Documents/case-sensitive.dmg
$ cd /Volumes/case-sensitive

$ git clone --recursive https://github.com/pfalcon/esp-open-sdk.git</pre>
<p>スタンドアローンなSDK を作れば、-Iと-Lフラグを付けなくてよいようですが、espeink のmakefile は<br />
  <br />-I と -L は指定されているので、SDK を分離して作ります。 </p>
<blockquote>
<p>$ cd esp-open-sdk/<br />
    <br />$ make STANDALONE=n</p>
</blockquote>
<p>★ちょっと時間はかかります。コーヒータイムです。<br />
  <br />ESP8266 のチップは、ケイデンス・デザイン・システムズ社が作っているXtensaプロセッサなんですね。</p>
<p>Espressif Systems社がカスタマイズした、テンシリカXtensaプロセッサが載っているということの</p>
<p>ようです。</p>
<p>https://www.cadence.co.jp/news/2015-01-29-929.html</p>
<p>&#160;</p>
<p>・さて、以下のようになっていればOKです。パスを追加します。 </p>
<p>&#160;&#160;&#160; ::<br />
  <br />&#160;&#160;&#160; Xtensa toolchain is built, to use it:</p>
<p>&#160;&#160;&#160; export PATH=/Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin:$PATH</p>
<p>&#160;&#160;&#160; Espressif ESP8266 SDK is installed. Toolchain contains only Open Source components</p>
<p>&#160;&#160;&#160; To link external proprietary libraries add:</p>
<p>&#160;&#160;&#160; xtensa-lx106-elf-gcc -I/Volumes/case-sensitive/esp-open-sdk/sdk/include -L/Volumes/case-sensitive/esp-open-sdk/sdk/lib</p>
<p>&#160;</p>
<p>・ここもパスを通しておきます。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- .bashrc　追記
export PATH=/Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin:$PATH</pre>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">以下に、コンパイラがあります。</pre>
<blockquote>
<p>$ ls /Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin<br />
    <br />esptool.py&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-ct-ng.config&#160;&#160;&#160; xtensa-lx106-elf-gcov&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-ranlib</p>
<p>xtensa-lx106-elf-addr2line&#160;&#160;&#160; xtensa-lx106-elf-elfedit&#160;&#160;&#160; xtensa-lx106-elf-gdb&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-readelf</p>
<p>xtensa-lx106-elf-ar&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-g++&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gprof&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-size</p>
<p>xtensa-lx106-elf-as&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-ld&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-strings</p>
<p>xtensa-lx106-elf-c++&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc-4.8.2&#160;&#160;&#160; xtensa-lx106-elf-ld.bfd&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-strip</p>
<p>xtensa-lx106-elf-c++filt&#160;&#160;&#160; xtensa-lx106-elf-gcc-ar&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-nm</p>
<p>xtensa-lx106-elf-cc&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc-nm&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-objcopy</p>
<p>xtensa-lx106-elf-cpp&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc-ranlib&#160;&#160;&#160; xtensa-lx106-elf-objdump </p>
</blockquote>
<p>&#160;</p>
<p>・コンパイラが呼び出せればOKです。 </p>
<blockquote>
<p>$ which xtensa-lx106-elf-gcc<br />
    <br />/Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin/xtensa-lx106-elf-gcc</p>
</blockquote>
<blockquote>
<p>$ xtensa-lx106-elf-gcc &#8211;version<br />
    <br />xtensa-lx106-elf-gcc (crosstool-NG 1.20.0) 4.8.2</p>
<p>Copyright (C) 2013 Free Software Foundation, Inc.</p>
<p>This is free software; see the source for copying conditions.&#160; There is NO</p>
<p>warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. </p>
</blockquote>
<p>・何かコンパイルして動作確認してみましょう。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ git clone https://github.com/esp8266/source-code-examples.git
$ cd source-code-examples/blinky</pre>
<p>&#160;</p>
<p>・sed で make ファイルの指定を書き換えます。<br />
  <br /> ※パスがあるので、解りにくい。sed は s/置き換え前/置き換え後/g です。 </p>
<p>以下だと、<br />
  <br /> Espressif/crosstool-NG/builds/xtensa-lx106-elf/bin</p>
<p> を以下に置き換え</p>
<p> esp-open-sdk/xtensa-lx106-elf/bin </p>
<p>&#160; Espressif/ESP8266_SDK<br />
  <br />&#160; を以下に置き換え</p>
<p>&#160; esp-open-sdk/sdk </p>
<p>&#160; Espressif<br />
  <br />&#160; を以下に置き換え</p>
<p>&#160; esp-open-sdk </p>
<p>&#160; opt/<br />
  <br />&#160; を以下に置き換え</p>
<p>&#160; Volumes/case-sensitive/</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ sed -i 's/Espressif\/crosstool-NG\/builds\/xtensa-lx106-elf\/bin/esp-open-sdk\/xtensa-lx106-elf\/bin/g' Makefile
$ sed -i 's/Espressif\/ESP8266_SDK/esp-open-sdk\/sdk/g' Makefile
$ sed -i 's/Espressif/esp-open-sdk/g' Makefile
$ sed -i 's/opt\//Volumes\/case-sensitive\//g' Makefile</pre>
<p>&#160;</p>
<p>make してみます。</p>
<p>$ make </p>
<p>・以下が実行結果です。エラーなくビルドできればまぁ、動くでしょう。</p>
<blockquote>
<p>$ tree<br />
    <br />.</p>
<p>├── Makefile</p>
<p>├── README</p>
<p>├── build</p>
<p>│&#160;&#160; ├── app.out★実行バイナリファイル</p>
<p>│&#160;&#160; ├── app_app.a</p>
<p>│&#160;&#160; ├── driver</p>
<p>│&#160;&#160; └── user</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; └── user_main.o</p>
<p>├── firmware</p>
<p>│&#160;&#160; ├── 0x00000.bin★</p>
<p>│&#160;&#160; └── 0x40000.bin★</p>
<p>└── user</p>
<p>&#160;&#160;&#160; ├── user_config.h</p>
<p>&#160;&#160;&#160; └── user_main.c </p>
<p>5 directories, 9 files</p>
</blockquote>
<p>&#160;</p>
<p>▼とりあえず、esp-open-sdk でコンパイルしてみます。Makefile のコピーを取ってパスを書き換え。 </p>
<blockquote>
<p>$ cd espeinkのソース<br />
    <br />$ cp Makefile Makefile_org </p>
</blockquote>
<p>※行頭の$ は取ってあります。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">sed -i 's/Espressif\/crosstool-NG\/builds\/xtensa-lx106-elf\/bin/esp-open-sdk\/xtensa-lx106-elf\/bin/g' Makefile
sed -i 's/Espressif\/ESP8266_SDK/esp-open-sdk\/sdk/g' Makefile
sed -i 's/Espressif/esp-open-sdk/g' Makefile
sed -i 's/opt\/Espressif\/arch\/lib/Volumes\/case-sensitive\/esp-open-sdk\/sdk\/lib/g' Makefile
sed -i 's/opt\//Volumes\/case-sensitive\//g' Makefile</pre>
<p>・osx じゃなく、Linux でやっている場合はほどよく書き換え。以下のようにパスを変更しました。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ diff Makefile Makefile_org 
15c15
&lt; XTENSA_TOOLS_ROOT ?= /Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin
---
&gt; XTENSA_TOOLS_ROOT ?= /opt/Espressif/crosstool-NG/builds/xtensa-lx106-elf/bin
18,19c18,19
&lt; SDK_EXTRA_INCLUDES ?= /Volumes/case-sensitive/esp-open-sdk/include
&lt; SDK_EXTRA_LIBS ?= /Volumes/case-sensitive/esp-open-sdk/sdk/lib
---
&gt; SDK_EXTRA_INCLUDES ?= /opt/Espressif/include
&gt; SDK_EXTRA_LIBS ?= /opt/Espressif/arch/lib
22c22
&lt; SDK_BASE    ?= /Volumes/case-sensitive/esp-open-sdk/sdk
---
&gt; SDK_BASE    ?= /opt/Espressif/ESP8266_SDK</pre>
<p>&#160;</p>
<p>・さて、makeしてみます。</p>
<p>make しましたが、なんかエラーでますね。作者は、SDK バージョンいくつを使っていたのでしょうか？</p>
<p>unknown type name &#8216;uint32_t&#8217;<br />
  <br />unknown type name &#8216;uint8_t&#8217;</p>
<p>unknown type name &#8216;uint16_t&#8217;</p>
<p>conflicting types for &#8216;os_random&#8217; </p>
<p>&#160;&#160;&#160; $ make<br />
  <br />&#160;&#160;&#160; CC user/cgiwifi.c</p>
<p>&#160;&#160;&#160; In file included from /Volumes/case-sensitive/esp-open-sdk/sdk/include/os_type.h:10:0,</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; from /Volumes/case-sensitive/esp-open-sdk/sdk/include/user_interface.h:9,</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; from user/cgiwifi.c:17:</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:14:1: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; typedef uint32_t ETSSignal;</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:15:1: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; typedef uint32_t ETSParam;</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:27:1: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; typedef uint32_t ETSHandle;</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:32:5: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; uint32_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; timer_expire;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:33:5: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; uint32_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; timer_period;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:17:0:</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/user_interface.h:316:1: error: unknown type name &#8216;uint8_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; void wifi_promiscuous_set_mac(const uint8_t *address);</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:20:0:</p>
<p>&#160;&#160;&#160; user/io.h:3:16: error: unknown type name &#8216;uint16_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; void ioSpiSend(uint16_t data);</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; user/io.h:8:18: error: unknown type name &#8216;uint8_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; void ioEinkWrite(uint8_t data);</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:21:0:</p>
<p>&#160;&#160;&#160; include/espmissingincludes.h:42:5: error: conflicting types for &#8216;os_random&#8217;</p>
<p>&#160;&#160;&#160;&#160; int os_random();</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:16:0:</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/osapi.h:45:15: note: previous declaration of &#8216;os_random&#8217; was here</p>
<p>&#160;&#160;&#160;&#160; unsigned long os_random(void);</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; make: *** [build/user/cgiwifi.o] Error 1</p>
<p>&#160;</p>
<p>▼sdk をいろいろ代えて試し、0.9.5あたりから試しました。</p>
<blockquote>
<p>$ cd /Volumes/case-sensitive/esp-open-sdk/<br />
    <br />$ ln -s esp_iot_sdk_v0.9.5 sdk</p>
</blockquote>
<p>▼バイナリはできるけども、ファームウェアができないので、Makefile を書き換え。<br />
  <br /> ※ まだ実機で試していないので、これで良いか不明ですが。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ cat Makefile.patch 
--- Makefile_org    2015-09-11 00:13:00.000000000 +0900
+++ Makefile    2015-09-23 15:29:56.000000000 +0900
@@ -12,18 +12,18 @@ BUILD_BASE    = build
 FW_BASE        = firmware
 
 # Base directory for the compiler
-XTENSA_TOOLS_ROOT ?= /opt/Espressif/crosstool-NG/builds/xtensa-lx106-elf/bin
+XTENSA_TOOLS_ROOT ?= /Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin
 
 #Extra Tensilica includes from the ESS VM
-SDK_EXTRA_INCLUDES ?= /opt/Espressif/include
-SDK_EXTRA_LIBS ?= /opt/Espressif/arch/lib
+SDK_EXTRA_INCLUDES ?= /Volumes/case-sensitive/esp-open-sdk/include
+SDK_EXTRA_LIBS ?= /Volumes/case-sensitive/esp-open-sdk/sdk/lib
 
 # base directory of the ESP8266 SDK package, absolute
-SDK_BASE    ?= /opt/Espressif/ESP8266_SDK
+SDK_BASE    ?= /Volumes/case-sensitive/esp-open-sdk/sdk
 
 #Esptool.py path and port
-ESPTOOL        ?= esptool
-ESPPORT        ?= /dev/ttyUSB0
+ESPTOOL        ?= esptool.py
+ESPPORT        ?= /dev/tty.SLAB_USBtoUART
 #ESPDELAY indicates seconds to wait between flashing the two binary images
 ESPDELAY    ?= 3
 ESPBAUD        ?= 115200
@@ -61,9 +61,9 @@ SDK_INCDIR    = include include/json
 # we create two different files for uploading into the flash
 # these are the names and options to generate them
 FW_FILE_1    = 0x00000
-FW_FILE_1_ARGS    = -bo $@ -bs .text -bs .data -bs .rodata -bc -ec
+#FW_FILE_1_ARGS    = -bo $@ -bs .text -bs .data -bs .rodata -bc -ec
 FW_FILE_2    = 0x40000
-FW_FILE_2_ARGS    = -es .irom0.text $@ -ec
+#FW_FILE_2_ARGS    = -es .irom0.text $@ -ec
 
 # select which tools to use as compiler, librarian and linker
 CC        := $(XTENSA_TOOLS_ROOT)/xtensa-lx106-elf-gcc
@@ -117,13 +117,17 @@ endef
 
 all: checkdirs $(TARGET_OUT) $(FW_FILE_1) $(FW_FILE_2)
 
-$(FW_FILE_1): $(TARGET_OUT) firmware
-    $(vecho) &quot;FW $@&quot;
-    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)
-
-$(FW_FILE_2): $(TARGET_OUT) firmware
-    $(vecho) &quot;FW $@&quot;
-    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_2_ARGS)
+$(FW_BASE)/%.bin: $(TARGET_OUT) | $(FW_BASE)
+    $(vecho) &quot;FW $(FW_BASE)/&quot;
+    $(Q) $(ESPTOOL) elf2image -o $(FW_BASE)/ $(TARGET_OUT)
+    
+#$(FW_FILE_1): $(TARGET_OUT) firmware
+#    $(vecho) &quot;FW $@&quot;
+#    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)
+
+#$(FW_FILE_2): $(TARGET_OUT) firmware
+#    $(vecho) &quot;FW $@&quot;
+#    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_2_ARGS)
 
 $(TARGET_OUT): $(APP_AR)
     $(vecho) &quot;LD $@&quot;
@@ -138,14 +142,20 @@ checkdirs: $(BUILD_DIR) $(FW_BASE)
 $(BUILD_DIR):
     $(Q) mkdir -p $@
 
-firmware:
+#firmware:
+#    $(Q) mkdir -p $@
+$(FW_BASE):
     $(Q) mkdir -p $@
 
+#flash: $(FW_FILE_1) $(FW_FILE_2)
+#    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x00000 -cf firmware/0x00000.bin -v
+#    $(Q) [ $(ESPDELAY) -ne 0 ] &amp;&amp; echo &quot;Please put the ESP in bootloader mode...&quot; || true
+#    $(Q) sleep $(ESPDELAY) || true
+#    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x40000 -cf firmware/0x40000.bin -v
 flash: $(FW_FILE_1) $(FW_FILE_2)
-    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x00000 -cf firmware/0x00000.bin -v
-    $(Q) [ $(ESPDELAY) -ne 0 ] &amp;&amp; echo &quot;Please put the ESP in bootloader mode...&quot; || true
-    $(Q) sleep $(ESPDELAY) || true
-    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x40000 -cf firmware/0x40000.bin -v
+    $(ESPTOOL) --port $(ESPPORT) write_flash $(FW_FILE_1_ADDR) $(FW_FILE_1) $(FW_FILE_2_ADDR) $(FW_FILE_2)
+
+
 
 clean:
     $(Q) rm -f $(APP_AR)</pre>
<p>・再度make </p>
<blockquote>
<p>$ make clean<br />
    <br />$ make</p>
<p>CC user/cgiwifi.c</p>
<p>CC user/config.c</p>
<p>CC user/eink.c</p>
<p>CC user/espfs.c</p>
<p>CC user/heatshrink_decoder.c</p>
<p>CC user/httpd.c</p>
<p>CC user/httpdclient.c</p>
<p>CC user/httpdespfs.c</p>
<p>CC user/io.c</p>
<p>CC user/stdout.c</p>
<p>CC user/user_main.c</p>
<p>AR build/einkdisp_app.a</p>
<p>LD build/einkdisp.out</p>
<p>FW firmware/</p>
</blockquote>
<p>エラーはなくなりました。</p>
<p>・とりあえず、こんな感じになっています。 </p>
<p>$ tree<br />
  <br />.</p>
<p>├── Makefile</p>
<p>├── Makefile.patch</p>
<p>├── Makefile_org</p>
<p>├── README</p>
<p>├── build</p>
<p>│&#160;&#160; ├── driver</p>
<p>│&#160;&#160; ├── einkdisp.out★これはどの領域に書き込めばいいのでしょうかね？</p>
<p>│&#160;&#160; ├── einkdisp_app.a</p>
<p>│&#160;&#160; └── user</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── cgiwifi.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── config.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── eink.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── espfs.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_decoder.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── httpd.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── httpdclient.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── httpdespfs.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── io.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── stdout.o</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; └── user_main.o</p>
<p>├── firmware</p>
<p>│&#160;&#160; ├── 0x00000.bin★</p>
<p>│&#160;&#160; └── 0x40000.bin★</p>
<p>├── html</p>
<p>│&#160;&#160; ├── 140medley.min.js</p>
<p>│&#160;&#160; ├── apconnect.bm</p>
<p>│&#160;&#160; ├── batempty.bm</p>
<p>│&#160;&#160; ├── connecting.html</p>
<p>│&#160;&#160; ├── icons.png</p>
<p>│&#160;&#160; ├── neterror.bm</p>
<p>│&#160;&#160; ├── style.css</p>
<p>│&#160;&#160; └── wifi.tpl</p>
<p>├── icons</p>
<p>│&#160;&#160; ├── apconnect.png</p>
<p>│&#160;&#160; ├── batempty.png</p>
<p>│&#160;&#160; └── neterror.png</p>
<p>├── include</p>
<p>│&#160;&#160; ├── espmissingincludes-ip.h</p>
<p>│&#160;&#160; ├── espmissingincludes.h</p>
<p>│&#160;&#160; ├── ip_addr.h</p>
<p>│&#160;&#160; ├── lwipopts.h</p>
<p>│&#160;&#160; ├── spi_register.h</p>
<p>│&#160;&#160; ├── stdint.h</p>
<p>│&#160;&#160; ├── uart_hw.h</p>
<p>│&#160;&#160; └── user_config.h</p>
<p>├── lib</p>
<p>│&#160;&#160; └── heatshrink</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── LICENSE</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── Makefile</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── README.md</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── dec_sm.dot</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── enc_sm.dot</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── greatest.h</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink.c</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_common.h</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_config.h</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_decoder.c</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_decoder.h</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_encoder.c</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── heatshrink_encoder.h</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── test_heatshrink_dynamic.c</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; ├── test_heatshrink_dynamic_theft.c</p>
<p>│&#160;&#160;&#160;&#160;&#160;&#160; └── test_heatshrink_static.c</p>
<p>├── mkespfsimage</p>
<p>│&#160;&#160; ├── Makefile</p>
<p>│&#160;&#160; ├── espfsformat.h</p>
<p>│&#160;&#160; ├── heatshrink_encoder.c</p>
<p>│&#160;&#160; ├── heatshrink_encoder.o</p>
<p>│&#160;&#160; ├── main.c</p>
<p>│&#160;&#160; ├── main.o</p>
<p>│&#160;&#160; └── mkespfsimage</p>
<p>├── mkimg.php</p>
<p>├── server</p>
<p>│&#160;&#160; ├── README</p>
<p>│&#160;&#160; └── pixelserver.js</p>
<p>└── user</p>
<p>&#160;&#160;&#160; ├── cgiwifi.c</p>
<p>&#160;&#160;&#160; ├── cgiwifi.h</p>
<p>&#160;&#160;&#160; ├── config.c</p>
<p>&#160;&#160;&#160; ├── config.h</p>
<p>&#160;&#160;&#160; ├── eink.c</p>
<p>&#160;&#160;&#160; ├── eink.h</p>
<p>&#160;&#160;&#160; ├── espfs.c</p>
<p>&#160;&#160;&#160; ├── espfs.h</p>
<p>&#160;&#160;&#160; ├── heatshrink_config_httpd.h</p>
<p>&#160;&#160;&#160; ├── heatshrink_decoder.c</p>
<p>&#160;&#160;&#160; ├── httpd.c</p>
<p>&#160;&#160;&#160; ├── httpd.h</p>
<p>&#160;&#160;&#160; ├── httpdclient.c</p>
<p>&#160;&#160;&#160; ├── httpdclient.h</p>
<p>&#160;&#160;&#160; ├── httpdconfig.h</p>
<p>&#160;&#160;&#160; ├── httpdespfs.c</p>
<p>&#160;&#160;&#160; ├── httpdespfs.h</p>
<p>&#160;&#160;&#160; ├── io.c</p>
<p>&#160;&#160;&#160; ├── io.h</p>
<p>&#160;&#160;&#160; ├── stdout.c</p>
<p>&#160;&#160;&#160; ├── stdout.h</p>
<p>&#160;&#160;&#160; └── user_main.c </p>
<p>12 directories, 86 files</p>
<p>&#160;</p>
<p>▼まとめ</p>
<p>・SDK にいくつを使っていたか不明。作者に聞くことに</p>
<p>・PhantomJS で動作する pixelserver.js は別サーバにおくのかどうか？</p>
<p>・ビルドするには、esp-open-sdk を使えばいいのか、それとも他の方法か不明。</p>
<p>・ビルドしてできたものは、どのようにどの領域に書き込めばいいのか不明。</p>
<p>&#160;</p>
<p>▼参考<br />
  <br /><a href="http://nemuisan.blog.bai.ne.jp/?eid=215341" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://nemuisan.blog.bai.ne.jp/?eid=215341<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://dsas.blog.klab.org/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://dsas.blog.klab.org/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://www.homu.net/esp8266%E7%94%A8open-sdk%E3%82%92macosx%E7%94%A8%E3%81%AB%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.homu.net/esp8266%E7%94%A8open-sdk%E3%82%92macosx%E7%94%A8%E3%81%AB%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://bbs.espressif.com/viewforum.php?f=46" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewforum.php?f=46<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="https://github.com/esp8266/esp8266-wiki/tree/master/sdk" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/esp8266/esp8266-wiki/tree/master/sdk<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://nemuisan.blog.bai.ne.jp/?eid=215341" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://nemuisan.blog.bai.ne.jp/?eid=215341<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
			
	<nav class="navigation posts-navigation" role="navigation" aria-label="投稿">
		<h2 class="screen-reader-text">投稿ナビゲーション</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://hack.gpl.jp/category/espeink/page/3/" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div><div class="nav-next"><a href="./../../../category/espeink.html" data-wpel-link="internal" rel="noopener noreferrer">新しい投稿</a></div></div>
	</nav>
		
		</main><!-- #main -->
	</section><!-- #primary -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer wrap" role="contentinfo">
		<div class="site-info">
			Copyleft - all rights reversed.
			<span class="sep"> | </span>
			JunkHack 2011 - 2021
			<span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">運営者情報<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/sendmail/" data-wpel-link="internal" rel="noopener noreferrer">お問い合わせ<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/privacy/" data-wpel-link="internal" rel="noopener noreferrer">プライバシーポリシー<span class="gf"></a>
		</div><!-- .site-info -->

	</footer><!-- #colophon -->
</div><!-- #page -->

        <div id="wpfront-scroll-top-container">
            <img src="./../../../images/1.png" alt="" />        </div>
                <script type="text/javascript">
            function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();
        </script>
        <script type='text/javascript' src='./../../../js/core.min.js' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='./../../../js/menu.min.js' id='jquery-ui-menu-js'></script>
<script type='text/javascript' src='./../../../js/wp-polyfill.min.js' id='wp-polyfill-js'></script>
<script type='text/javascript' id='wp-polyfill-js-after'>
( 'fetch' in window ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-fetch.min.js?ver=3.0.0"></scr' + 'ipt>' );( document.contains ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-node-contains.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.DOMRect ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-dom-rect.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.URL && window.URL.prototype && window.URLSearchParams ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-url.min.js?ver=3.6.4"></scr' + 'ipt>' );( window.FormData && window.FormData.prototype.keys ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-formdata.min.js?ver=3.0.12"></scr' + 'ipt>' );( Element.prototype.matches && Element.prototype.closest ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-element-closest.min.js?ver=2.0.2"></scr' + 'ipt>' );( 'objectFit' in document.documentElement.style ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-object-fit.min.js?ver=2.3.4"></scr' + 'ipt>' );
</script>
<script type='text/javascript' src='./../../../js/dom-ready.min.js' id='wp-dom-ready-js'></script>
<script type='text/javascript' src='./../../../js/hooks.min.js' id='wp-hooks-js'></script>
<script type='text/javascript' src='./../../../js/i18n.min.js' id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
</script>
<script type='text/javascript' id='wp-a11y-js-translations'>
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2021-05-20 01:00:08+0000","generator":"GlotPress\/3.0.0-alpha.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"Notifications":["\u901a\u77e5"]}},"comment":{"reference":"wp-includes\/js\/dist\/a11y.js"}} );
</script>
<script type='text/javascript' src='./../../../js/a11y.min.js' id='wp-a11y-js'></script>
<script type='text/javascript' id='jquery-ui-autocomplete-js-extra'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002","oneResult":"1\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","manyResults":"%d\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","itemSelected":"\u9805\u76ee\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u3002"};
/* ]]> */
</script>
<script type='text/javascript' src='./../../../js/autocomplete.min.js' id='jquery-ui-autocomplete-js'></script>
<script type='text/javascript' src='./../../../js/wpfront-scroll-top.min.js' id='wpfront-scroll-top-js'></script>
<script type='text/javascript' src='./../../../js/hew.js' id='hew-scripts-js'></script>
<script type='text/javascript' src='./../../../js/navigation.js' id='hew-navigation-js'></script>
<script type='text/javascript' src='./../../../js/skip-link-focus-fix.js' id='hew-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='./../../../js/wp-embed.min.js' id='wp-embed-js'></script>

</body>
</html>

<!--This file was exported by "Export WP Page to Static HTML" plugin which created by ReCorp (https://myrecorp.com) -->