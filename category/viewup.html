<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://hack.gpl.jp/xmlrpc.php">

<title>ViewUP &#8211; JunkHack</title>
<style type="text/css">.wpfts-result-item .wpfts-smart-excerpt {}.wpfts-result-item .wpfts-not-found {color:#808080;font-size:0.9em;}.wpfts-result-item .wpfts-score {color:#006621;font-size:0.9em;}.wpfts-shift {margin-left:40px;}.wpfts-result-item .wpfts-download-link {color:#006621;font-size:0.9em;}.wpfts-result-item .wpfts-file-size {color:#006621;font-size:0.9em;}</style><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//hack.gpl.jp' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="https://hack.gpl.jp/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; コメントフィード" href="https://hack.gpl.jp/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; ViewUP カテゴリーのフィード" href="https://hack.gpl.jp/category/viewup/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/hack.gpl.jp\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' href='./../css/dist-block-library-style.min.css'>
<link rel='stylesheet' href='./../css/export-wp-page-to-static-html-pro-premium-public-css-export-wp-page-to-static-html-public.css'>
<link rel='stylesheet' href='./../css/fulltext-search-style-wpfts_autocomplete.css'>
<link rel='stylesheet' href='./../css/wp-external-links-public-css-wpel.css'>
<link rel='stylesheet' href='./../css/wpfront-scroll-top-css-wpfront-scroll-top.min.css'>
<link rel='stylesheet' href='./../css/ccrw_related-css-frontend-style.css'>
<link rel='stylesheet' id='hew-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' href='./../css/hew-wpcom-genericons-genericons.css'>
<link rel='stylesheet' href='./../css/hew-wpcom-style.css'>
		<script>
			/* <![CDATA[ */
			var rcewpp = {
				"ajax_url":"https://hack.gpl.jp/wp-admin/admin-ajax.php",
				"nonce": "4eef5ded05",
				"home_url": "https://hack.gpl.jp/",
				"settings_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings.png',
				"settings_hover_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings_hover.png'
			};
			/* ]]\> */
		</script>
		<script type='text/javascript' src='./../js/jquery-3.5.1.min.js' id='jquery-core-js'></script>
<script type='text/javascript' src='./../js/jquery-migrate-3.3.0.min.js' id='jquery-migrate-js'></script>
<script type='text/javascript' src='./../js/export-wp-page-to-static-html-public.js' id='export-wp-page-to-static-html-js'></script>
<script type='text/javascript' src='./../js/wpfts_frontend.js' id='wpfts_frontend-js'></script>
<link rel="https://api.w.org/" href="https://hack.gpl.jp/wp-json/" /><link rel="alternate" type="application/json" href="https://hack.gpl.jp/wp-json/wp/v2/categories/77" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hack.gpl.jp/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hack.gpl.jp/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.7.2" />
<script type="text/javascript">
		document.wpfts_ajaxurl = "https://hack.gpl.jp/wp-admin/admin-ajax.php";
	</script>				<style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none}}</style>
			<script data-ad-client="ca-pub-2711753458083215" async src="./../js/adsbygoogle.js"></script>
</head>

<script async src="./../js/8181.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-13YWDXYQE2');
</script>
<body class="archive category category-viewup category-77 has-sidebar">
<div id="page" class="hfeed site">
		<div id="widgets-wrapper" class="hide">
		
<div id="secondary" class="wrap top-widget-area" role="complementary">
	
	
	
		<div id="sidebar-4" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://hack.gpl.jp/">
				<label>
					<span class="screen-reader-text">検索:</span>
					<input type="search" class="search-field" placeholder="検索&hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="検索" />
			</form></aside>	</div><!-- #four .widget-area -->
	</div><!-- #secondary -->
	</div>
	
	<a class="skip-link screen-reader-text" href="">コンテンツへ移動</a>

	<header id="masthead" class="site-header" role="banner">
		
		<div class="site-branding">
			<h1 class="site-title"><a href="./../index.html" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
			<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
		</div>

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button>
				<div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu"><li id="menu-item-9578" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9578"><a href="./../index.html" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-9594" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9594"><a href="./../status.html" data-wpel-link="internal" rel="noopener noreferrer">Status</a></li>
</ul></div>			</nav><!-- #site-navigation -->
		
		
				<div class="toggle-wrapper">
			<a href="" class="widgets-toggle toggle-button" title="ウィジェット">
				<span class="screen-reader-text">ウィジェット</span>
			</a>
		</div>
		
	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">カテゴリー: <span>ViewUP</span></h1>			</header><!-- .page-header -->

						
				
<article id="post-3910" class="post-3910 post type-post status-publish format-standard hentry category-book category-viewup">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/3910/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2017-04-30T00:42:01+09:00">2017年4月30日</time></a> </span><span class="posted-on">更新日:2017年4月30日</span> <span class="categories">  <a href="https://hack.gpl.jp/category/book/" rel="category tag noopener noreferrer" data-wpel-link="internal">Book</a>, <a href="./../category/viewup.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ViewUP</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /3910.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">1万人の読者を作るプロジェクト開始</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ゴールデンウィーク初日ですね。午後は雨がふってきましたが午前に読書をしていました。</p>
<p>自分のブログに対する付き合い方をまじまじと考えてみた結果、なんと無謀にも1万人の読者を作ってみる目標を立てました。</p>
<p>そして、毎月その数の実績を公開していくことにしました。これにより、どのような工夫や意識の持ち方が読者増につながるのかをみなさんと一緒に体験するのが目的です。</p>
<p>定期的に読んでいただければ、アクセス数の推移と記事内容の変化がわかり、あなたのブログのアクセス像につながるかもしれません。<a href="./../category/viewup.html" target="_blank" rel="noopener noreferrer" data-wpel-link="internal">ViewUP</a> というカテゴリにこの関連を書きます。</p>
<p>&#160;</p>
<p>そんな事をはじめようと思ったきっかけは以下の本です。</p>
<p>ブログについて、ゴールデンウィーク期間中にあれこれ考えてみようと思い、この本を読みました。アマゾンの Kindle Unlimited（定額料金で読みたい放題対象） で読める本です。自分がそのときに感じた本の感想なども、数年後に見返るすと結構楽しい（恥ずかしかったり）と思うので書いてみることにします。</p>
<p><a href="https://www.amazon.co.jp/gp/product/B06XF394FN/ref=as_li_tl?ie=UTF8&amp;camp=247&amp;creative=1211&amp;creativeASIN=B06XF394FN&amp;linkCode=as2&amp;tag=pear0a-22&amp;linkId=aa38542f7f29a923b1945c1afc38171c" target="_blank" rel="noopener noreferrer external" data-wpel-link="external"><img style="float:none;margin-left:auto;display:block;margin-right:auto;" border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;MarketPlace=JP&amp;ASIN=B06XF394FN&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL250_&amp;tag=pear0a-22" /></a><img loading="lazy" style="margin:0;border-style:none!important;" border="0" alt="" src="//ir-jp.amazon-adsystem.com/e/ir?t=pear0a-22&amp;l=am2&amp;o=9&amp;a=B06XF394FN" width="1" height="1" /></p>
<p>感想としては、「そこまでして書くのかぁ」というのが正直なところです。</p>
<p>しかし、とても、勉強にはなります。この本は、小手先の SEO とかではなく、自然と検索エンジンから流入して読者を増やす方法について書かれた正統派の書籍です。何事も、一定以上の労力をかけないと成果は見えませんね。</p>
<p>&#160;</p>
<p>以下のような所に注意してブログを書いていこうと思いました。</p>
<p>・読者の利益がわかるタイトルと出だしにする</p>
<p>・読者の背景を想像して書く</p>
<p>・タイトルは重要で、読者が得られる利益が想像できるものにする</p>
<p>・結論を先に書く</p>
<p>そのほかもいろいろありますが、「読者が得られる利益」という考え方は今までまったく持っていませんでした。</p>
<p>&#160;</p>
<p>では、読者が増えるとどうなるでしょうか？自分の場合は、読者を増やそうと思って書いてきたわけではないので、ちょっと想像してみます。</p>
<p>・アクセス数が増える</p>
<p>・コメントが増える（かも）</p>
<p>・より伝えやすい文章内容を作ろうとするため、文章力があがる（かも）</p>
<p>・何かを作ろうとするモチベーションがあがる</p>
<p>・結果、生活にハリが出る</p>
<p>最後は大切だと思っています。</p>
<p>&#160;</p>
<p>さて、このブログですが主に工作やDIYなど自作して楽しもうという趣旨の内容が多いのですが、こんなマニアックな自分のブログにも以下のようなアクセスがあります。</p>
<p><img loading="lazy" title="Stats_‹_junkhack_—_WordPress_com" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="Stats_‹_junkhack_—_WordPress_com" src="./../images/stats__junkhack__wordpress_com.png" width="640" height="363" /> </p>
<p>これは月ごとのビジターのアクセス数の推移ですが、1年前は1500人くらいだったのが今はなんと、2500人くらいの読者が居るようです。1000人って、昔の6クラスほどある小学校の1年から6年までを集めた人数です。物好きな人もいるものですね。ありがたい事です。</p>
<p>&#160;</p>
<p>で、目標をとりあえず作ってみます。</p>
<p>たとえば、そうですね、月間1万人くらいの読者を当面の目標にしようと思います。毎月、月末か月初にこの報告をすることにして、どうなるかを報告していこうかなと。このグラフのペースでいくとあと8年ほどかかる計算です。たぶん、どこかでカーブが上がるはずだと思いますが、小手先のテクニックではない方法であげたいと思っています。</p>
<p>&#160;</p>
<p>そもそも、なんで自分がブログを書いているのか？ に尽きます。</p>
<p>まぁなんとなく、ライフワークの一環というのが正直な感想で、ブログを書かないと寂しいし、何か作ったり感じたりしたことを書くことで生活にハリが出るのが好きでやっています。この本読んでから、ぼんやり考えていたのですが、たぶん、これがブログを書く正直な原動力です。特に読者を増やそうとか、おこずかいを稼ごうとか、そういう観点はまったくありませんでした。</p>
<p>&#160;</p>
<p>何事も目標を持ってやると、新しい発見がありますので、このブログもなんとなく書く事が5年以上、経過していますのでそろそろステップアップする考え方を持ってやってみることにします。</p>
<p>次の報告は、5月の月末です。さてどうなることやら。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-4250" class="post-4250 post type-post status-publish format-standard hentry category-book category-viewup">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/4250/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2018-01-06T03:21:21+09:00">2018年1月6日</time></a> </span><span class="posted-on">更新日:2018年1月6日</span> <span class="categories">  <a href="https://hack.gpl.jp/category/book/" rel="category tag noopener noreferrer" data-wpel-link="internal">Book</a>, <a href="./../category/viewup.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ViewUP</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /4250.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">1万人の読者・・・企画倒れか</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>昨年の４月に１万人の読者を作るプロジェクトを開始したそうそう、翌月には更新していないという体たらく状態でした。</p>
<p>とりあえず、半年遅れですが、その後の統計情報を載せておきます。</p>
<p>&#160;</p>
<p> <img loading="lazy" title="統計情報_‹_junkhack_—_WordPress_com" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="統計情報_‹_junkhack_—_WordPress_com" src="./../images/junkhack__wordpress_com.png" width="640" height="310" />   </p>
<p>5月くらいには３０００人くらいになっているんですがそこから横ばいです。昨年１２月には２３００まで落ち込んでしまいました。そりゃ記事更新していないのですから仕方ありません。むしろ半年良く持ちこたえたというものでしょう。飽きずに訪問してくれたそこのあなた！ありがとうございます。今後がんばりますので、また遊びにきてください。</p>
<p>とりあえず、半年遅れでプロジェクトがスタートしたという気持ちで今後がんばっていきたいです。あと７０００人の読者に恵まれますようマニアックな良い記事を書いていきたいと思います。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-4331" class="post-4331 post type-post status-publish format-standard hentry category-gcp category-viewup">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/4331/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2018-01-28T07:37:24+09:00">2018年1月28日</time></a> </span><span class="posted-on">更新日:2018年1月28日</span> <span class="categories">  <a href="https://hack.gpl.jp/category/gcp/" rel="category tag noopener noreferrer" data-wpel-link="internal">GCP</a>, <a href="./../category/viewup.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ViewUP</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /4331.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">独自ドメインで WordPress を動作させる為、エンジニアが選んだ選択</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>はい、JunkHack です。1月も200時間越えてお仕事しています。はぁ。あんまり残業好きじゃないんですがね。</p>
<p>&#160;</p>
<p>今回の要約は以下のようになっています。</p>
<p>・独自ドメインでブログ（WordPress）を運営するため、レンサバを検討</p>
<p>・ぐーぐる様が、仮想マシンのリソースを¥32,542分無料でくれることがわかった</p>
<p>・じゃ、そこでCentOS7 を Google のプラットフォームで作ってみる</p>
<p>・東京リージョンで、SSD10GB の n1-standard-1（vCPU x 1、メモリ 3.75 GB）を作った</p>
<p>・約４時間で28円で１日150円～180円、１ヶ月5000円ちょいくらいのようです。</p>
<p>&#160;</p>
<p>さて、今回は「１万人の読者」を作る企画シリーズの続きです。</p>
<p>現在はこのブログ、WordPress.com のブログサービスで運営しているのですが、いつかはレンタルサーバかどっかで自前のドメインを取得して、広告なんかもちょこっと付けて、おこづかい稼ぎながらライフワーク的にブログ書きたいなと、たぶんブログ書いている読者なら一度は夢みた事があるかと思います。自分もそうなんですが、アフリエイトとかアクセス数とか、まぁどうでもええやんってなってしまいがち。</p>
<p>&#160;</p>
<p> まぁ、でもですね。せっかくブログでマニアックな記事を書くのなら世のため、人のため、そしてなにより自分のために有意義にしないとだめだよなということで、本格的にブログを運営してみようかなと思っていました。</p>
<p>&#160;</p>
<p> しか～し、現実はレンタルサーバや自前サーバ作る面倒だし、お金かかるしなと躊躇していました。レンサバは、たとえばエックスサーバーやロリポップなどといった共有型のサーバをレンタルすること。これは安いものだと月額５００円くらいから。月、１０００円も出せば運営できますが、契約時にやっぱり5000円から１万円ぐらいは必要なんですよね。まぁ、そのくらい出してもいいですがレンタルサーバってやっぱり、システムエンジニア的にはあまり好きじゃないんです。やっぱり OS から掌握しないと気がすまないわけでして。</p>
<p>&#160;</p>
<p> そうなると、AWS などのクラウド上に仮想サーバを作るタイプになってくるわけですが、そうなるとさらに面倒だしお金もかかる。まぁ、でもお仕事でも使うわけだから、勉強がてら触っておくのはいいよねーと思いながら、数年さわらず。以前、マイクロソフトが提供しているアズール（Microsoft Azure）ってのの開発アカウントを持っていたのですが、今一料金的になっとく行かず、本格運用までは行きませんでした。</p>
<p>&#160;</p>
<p> で、ひさしぶりに google のクラウドプラットフォームの GCP（Google Cloud Platform）ってのを見たら、なかなかいい誘い文句がでているじゃありませんか。</p>
<p><img loading="lazy" title="Google_Cloud_Platform" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="Google_Cloud_Platform" src="./../images/google_cloud_platform.png" width="640" height="386" /> </p>
<p>JunkHack は、お値段に敏感なんです。無料という言葉に弱いんです。これはもうだまされてもいいから使うしかないなと。何が無料なのかは、わかりませんが、なにやら、以下のようです。</p>
<p><img loading="lazy" title="GCP_の無料階層_-_無料の長期トライアル、いつまでも無料_&#160;_&#160;_Google_Cloud_Platform" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="GCP_の無料階層_-_無料の長期トライアル、いつまでも無料_&#160;_&#160;_Google_Cloud_Platform" src="./../images/gcp______google_cloud_platform.png" width="640" height="146" /> </p>
<p>FAQを参照してみます。なにやらごにょごにょと書いてありますが、肝心なのは以下。</p>
<blockquote>
<p>無料トライアルを利用できる期間を教えてください。     <br />無料トライアルは、12 か月が経過したか、300 ドル分の利用があったときに終了します。クレジット残額と試用期間終了までの残りの日数は Google Cloud Platform Console の上部に表示されます。</p>
</blockquote>
<p>ほうほう、３万円分は使えるのか。</p>
<blockquote>
<p>無料トライアルで料金が発生することはありますか？     <br />いいえ、トライアルで料金が発生することはありません。トライアルが終了したアカウントは一時停止となり、有料アカウントへアップグレードすることで同じアカウントを従量課金で使うことができます。登録後、Google から 0～1 ドルの取引が発生する場合があります。これは、Google の請求システムとクレジット カードやデビットカードの発行会社との承認リクエストが保留中であることを示します。承認は、カード発行会社によって現地通貨に換算される場合があり、これらの取引は、保留中の取引として明細書に最大 1 か月間表示されます。この取引は承認手続きによるもので、実際には請求されません。ご質問は、承認状況について取引先の銀行までお問い合せください。</p>
</blockquote>
<p>ほほう、有料アカウントに移行しないかぎりタダとあります。</p>
<blockquote>
<p>無料トライアルが終わったら、どうなりますか？     <br />無料トライアルの期間が終了すると、試用中に作成したリソースは停止されますが、30 日以内に有料アカウントにアップグレードすれば復元できます。 </p>
<p>また、その 30 日以内に Google 課金サポートに連絡すると、Google Cloud Platform のサービス（Google Compute Engine 以外）で保存されているデータをエクスポートできます。30 日が経過した場合は、アップグレードしてもデータやリソースを利用できなくなります。 </p>
</blockquote>
<p>リソースには、期限切れ後、30日以内であれば復元可能とな。ふむふむ。</p>
<p>ま、とにかく使ってみましょう。SSD のn1-standard-1（vCPU x 1、メモリ 3.75 GB）ブートディスクはとりあえず10GB です。CentOS7 のインスタンスを起動しました。</p>
<p><img loading="lazy" title="Compute_Engine_-_JunkHackup" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="Compute_Engine_-_JunkHackup" src="./../images/compute_engine__junkhackup.png" width="640" height="402" /> </p>
<p>公開鍵認証で、リモートから SSH アクセスして UnixBench を動作させてみました。便利だなーと感じたのは、CentOS7 のインスタンス作った時点で、自分のアカウント名のユーザが作られていて、sudo 権限も付与されています。自分の場合は、無料版のころから使っている、Google Apps で独自ドメインをくっ付けていてその @前のユーザ名で作られていました。最高に便利ですね、これは。</p>
<p>&#160;</p>
<p>で、この CentOS7 は最小限でインストールされているインスタンスですので、以下の手順で UnixBench を動作。</p>
<blockquote>
<p># yum -y install perl perl-Time-HiRes make gcc git     <br /># git clone https://github.com/kdlucas/byte-unixbench      <br /># cd byte-unixbench/UnixBench      <br /># ./Run</p>
</blockquote>
<p><img loading="lazy" title="_ssh_—_root_junkhack___apl_byte-unixbench_UnixBench_—_ssh_take_35_200_27_163_—_142×50" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="_ssh_—_root_junkhack___apl_byte-unixbench_UnixBench_—_ssh_take_35_200_27_163_—_142×50" src="./../images/ssh__root_junkhack___apl_byteunixbench_unixbench__ssh_take_35_200_27_163__14250.png" width="512" height="480" /> </p>
<p>まぁ、1CPU だしこんなもんですかね。WordPress を動作させるにはちょうどいいかもです。SSD にしちゃファイルコピーが遅いようなきもしますが。また、後ほどインスタンスのスペックを変えて試してみようと思います。</p>
<p>&#160;</p>
<p>とりあえず、IPを設定して DNS と関連づけします。コントロールパネルの印象は、なかなか直感的なインターフェイスで使いやすいですね。マニュアルなしで、IP回りのインスタンス設定ができました。</p>
<p>&#160;</p>
<p>しばらく動かし続けてみて、どんなものか検討してみることにします。４時間後の値段は以下のようです。</p>
<p><img loading="lazy" title="今月の請求額_-_JunkHackup" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="今月の請求額_-_JunkHackup" src="./../images/junkhackup.png" width="619" height="314" /> </p>
<p>１日150円～180円という感じでしょうか。これだと一ヶ月で5000円を超えてしまうので、もう少ししょぼいリソースを選ばないと１年経たずに、無料枠の300$ を使ってしまいそうです。</p>
<p>&#160;</p>
<p>次回は、リソースをもうすこししょぼく、small (共有CPU でメモリは1.7 GB）と、micro というメモリが0.6GB だとどうなるか検討したいと思います。</p>
<p>あと、うたい文句の「いつまでも無料」っていうのはどういうことなんでしょうか？自分にはよくわかりません。次回に掘り下げてみたいですね。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-4340" class="post-4340 post type-post status-publish format-standard hentry category-gcp category-viewup">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/4340/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2018-01-28T18:11:42+09:00">2018年1月28日</time></a> </span><span class="posted-on">更新日:2018年1月28日</span> <span class="categories">  <a href="https://hack.gpl.jp/category/gcp/" rel="category tag noopener noreferrer" data-wpel-link="internal">GCP</a>, <a href="./../category/viewup.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ViewUP</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /4340.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">GCP f1-micro の UnixBench</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>前回の続きです。</p>
<p>今回は、f1-micro（vCPU x 1、メモリ 0.6 GB）の基本性能を UnixBench で計測してみました。ゾーンは、東京（asia-northeast1-a）です。</p>
<p>メモリが0.6GB なので一応スワップを作っておきました。</p>
<blockquote>
<p># dd if=/dev/zero of=/swapfile bs=1M count=1024     <br /># chmod 600 /swapfile      <br /># mkswap /swapfile      <br /># swapon /swapfile      <br /># echo ‘/swapfile&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; swap&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; swap&#160;&#160;&#160; defaults&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0 0’ &gt;&gt; /etc/fstab</p>
</blockquote>
<p><img loading="lazy" title="junkhack_gpl_jp_—_142×50" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="junkhack_gpl_jp_—_142×50" src="./../images/junkhack_gpl_jp__14250.png" width="668" height="631" /> </p>
<p>うーん、これはちょっと遅すぎます。ラズパイや、オレンジパイより遅い。こんなんだったら、ラズパイやオレンジパイを自宅サーバにしたほうがいいです。なので、これは選択外。</p>
<p> まぁ、AWS の ti.micro でも260台しかでませんから、それと比べると健闘していると言っていいかもしれません。</p>
<blockquote>
<p>参考</p>
<p>AWSの各リージョン・AZごとにti.microのUnixBenchを取ってみた – Qiita     <br /><a title="https://qiita.com/kou_bacchus/items/4616dd0031b4809898f0" href="https://qiita.com/kou_bacchus/items/4616dd0031b4809898f0" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://qiita.com/kou_bacchus/items/4616dd0031b4809898f0<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>次、g1-small（vCPU x 1、メモリ 1.7 GB）を計測してみます。</p>
<p><img loading="lazy" title="1.7_junkhack_gpl_jp_—_142×50" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="1.7_junkhack_gpl_jp_—_142×50" src="./../images/1-7_junkhack_gpl_jp__14250.png" width="680" height="633" /> </p>
</p>
<p>さっきのより速いですが、これでもラズパイ相当です。うーんですね。</p>
<p>とりあえず、このインスタンスを動かし続けて基礎的な値段を見てみます。こうなると、この前買ったノートPCの SSD に同じOSを入れてベンチマークを計測したくなりますね。</p>
<p>&#160;</p>
<p> あと、無料枠のこともだいぶ理解が深まりました。Always Free の使用制限 というところに詳しく書いてありました。</p>
<blockquote>
<p>Always Free の使用制限     <br /><a title="https://cloud.google.com/free/docs/always-free-usage-limits" href="https://cloud.google.com/free/docs/always-free-usage-limits" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://cloud.google.com/free/docs/always-free-usage-limits<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>今回利用するのは、仮想サーバのGoogle Compute Engineの部分。</p>
<blockquote>
<p>Google Compute Engine     <br />スケーラブルで高性能な仮想マシン </p>
<p>1 f1-micro インスタンス（1 か月あたり、バージニア州北部を除く米国リージョンのみ）     <br />30 GB の HDD（期間合計）、5 GB のスナップショット（期間合計）      <br />1 GB の北米から全リージョン宛て下りネットワーク（1 か月あたり、中国およびオーストラリアを除く）</p>
</blockquote>
<p>ということです。つまり、東京リージョンはNGで、アメリカにある仮想サーバへの接続となるので応答速度が少し遅れるということですね。</p>
<p>DISK容量はとりあえず十分で、あとはネットワークが1GB ということです。１万人の読者となるとトラフィックは余裕で1GB を超えますので無料枠からはみ出ることが想定。すごく大雑把なボリューム感としては、ユニークユーザ数が１万人ということは、総PVは、約２倍から３倍。平均したページサイズは、画像が多いので約5MB くらいで、2万 x 5MB が下りトラフィックです。約100GB で、これにCDN（Content Delivery Network）などのキャッシュ効果が５割～８割程度の削減として、約50GB から 20GB です。平均ページ容量を半分にした場合でも、１万ユニークユーザで総PVが２万月にあれば、CDN利用で 10GB から 25GB くらいになります。</p>
<p>&#160;</p>
<p>現在は、総PVが4000程度、ユニークユーザは2100人ほどです。WordPress.com のサーバからのトラフィックは上の条件にはめて単純に計算すると、月に約20GB ほど流れています。wordpress.com は、Photon というCDNを使っています。表示したHTML のソースに以下のようなものがあると思います。</p>
<blockquote>
<p>&lt;link rel=&#8217;dns-prefetch&#8217; href=&#8217;//s2.wp.com&#8217; /&gt;     <br />&lt;link rel=&#8217;dns-prefetch&#8217; href=&#8217;//s0.wp.com&#8217; /&gt;      <br />&lt;link rel=&#8217;dns-prefetch&#8217; href=&#8217;//s1.wp.com&#8217; /&gt;</p>
</blockquote>
<p>Jetpack というプラグインがこれを付けています。が、無料のWordPress ブログではこれらをON,OFF する部分は見当たりませんでした。</p>
<p>独立したWordPress ならば、Jetpack プラグインの設定で、「画像と写真をスピードアップ」というのがあるようでここで ON,OFF できるようですが。</p>
<p>&#160;</p>
<p>そういうことで、ぐーぐるのAlways Free 無料枠では、１万人の読者を支える基盤にはちょっと無理がありそうかなという感触がつかめました。</p>
<p>&#160;</p>
<p>しかし、自宅IoT のデータをちょびちょびと溜め込むような低トラフィックであれば有効活用できそうだということもわかりました。他にも工夫次第でいろんな用途に使えますね。なにせ、OS の中をまるっきり好きなようにいじれるわけですから。しかも、グローバルIPが１つついていますしね。</p>
<p>&#160;</p>
<p>さて、今月も月末ですので忘れないうちに、ページビューとサイト訪問者のグラフを貼り付けておきます。</p>
<p><img loading="lazy" title="Stats_‹_junkhack_—_WordPress_com" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="Stats_‹_junkhack_—_WordPress_com" src="./../images/stats__junkhack__wordpress_com.png" width="841" height="413" /> </p>
<p>あまり代わり映えしませんが、これからも仕事が忙しくても何か更新するライフワークにしていきたいですね。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-4351" class="post-4351 post type-post status-publish format-standard hentry category-viewup">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/4351/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2018-01-31T07:21:37+09:00">2018年1月31日</time></a> </span><span class="posted-on">更新日:2018年1月31日</span> <span class="categories">  <a href="./../category/viewup.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ViewUP</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /4351.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">WordPress目的でのレンタルサーバの候補２つ</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>前々回くらいから、WordPress を運用するレンタルサーバ（自宅サーバやクラウドを含めて）なにが一番よいかを検討してるところです。</p>
<p>さて、グーグルのクラウドの無料枠ですが、とりあえずここで運用するのも１つの手ですが、前回の計算によれば転送量と満足するインスタンスのスピードとトータルコストが無料枠を超えたときにちょっと辛そうです。</p>
<p>&#160;</p>
<p>今回の要点は以下です。</p>
<p>・2900円のwordpress.com のビジネスプランはプラグインのインストールが可能で無制限の容量とメンテナンスフリーが魅力</p>
<p>・初期費用なく、月500円から始められる wpX クラウドも魅力</p>
<p>・無料枠の３万を使い切るまで、グーグルクラウドで運用し、その後上記に引っ越すのが一番よさそう</p>
<p>&#160;</p>
<p> 他、なにかいい方法はないかなとあれこれ検討した結果、以下の２つの候補が有力になりそうです。</p>
<p>&#160;</p>
<p>まず１つ目。</p>
<p>wordpress.com の有料プランです。</p>
<p><a title="https://ja.wordpress.com/pricing/" href="https://ja.wordpress.com/pricing/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://ja.wordpress.com/pricing/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>&#160;</p>
<p> <img loading="lazy" title="WordPress_com_プラン___WordPress_com_ストア" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="WordPress_com_プラン___WordPress_com_ストア" src="./../images/wordpress_com____wordpress_com_.png" width="575" height="760" />   </p>
<p>これ長らく、独自のプラグインが入れ込めず候補から外れていましたが、なんか2017年くらいからプラグインも入れられるようになったみたいです。そして、何より無制限の容量は魅力的。インフラも、AWS上に構築してある冗長構成の WordPress 基幹インフラを利用するのでメンテナンスフリーがなにより魅力的です。2900円は、決して高くなくむしろ安いくらいだと思います。</p>
<p>&#160;</p>
<p> とは言っても、まだ月刊4000PV 未満の当サイトにはもてあますスペックであります。月間150万PV 以上に人気が出てきたときには引越ししようかなと思いますが、それまでは以下のクラウドが初期費用がなく安く始めらて魅力的ですね。</p>
<p>wpX クラウド   <br /><a title="https://www.wpx.ne.jp/cloud/" href="https://www.wpx.ne.jp/cloud/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://www.wpx.ne.jp/cloud/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>&#160;</p>
<p><img loading="lazy" title="WordPress特化のレンタルサーバー＆クラウドサービス_wpXサービス比較ページ" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="WordPress特化のレンタルサーバー＆クラウドサービス_wpXサービス比較ページ" src="./../images/wordpress_wpx.png" width="589" height="623" /> </p>
<p>これは１ドメインのみ運用で、メールアカウントは付いていませんが WEB だけ運用するにはちょうどいいプランです。初期費用なく500円から運用できるので、現在の最有力候補です。シェルは付いていませんが、とりあえずまぁなんとかFTP で事足りるので今度の休みに本格的に検討してみようかと思います。</p>
<p>&#160;</p>
<p>１．無料枠を使い切るまでグーグルクラウドの東京リージョンでがんばる。</p>
<p>２．無料枠を使い切れば、wpX クラウドに引っ越す</p>
<p>３．月間PVが、１５０万PV以上になれば、wordpress.com のビジネスプランに引っ越す</p>
<p>&#160;</p>
<p>という、構想です。</p>
<p>&#160;</p>
<p> 値段は、500円からスタートして月額1000円のスペックを超えるところまでここでがんばり、それ以上人気が出そうならば、先のWordPress.com のビジネスプランに移行という計画です。まぁ、そんなに人気が出るサイトを作れるかわかりませんが、、、、</p>
<p>&#160;</p>
<p> ということで、そもそもこのブログをどうやったら人気になるかという根本的な事を考えないといけませんね。次の次の課題はそこにあることはわかっているのですが。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-4361" class="post-4361 post type-post status-publish format-standard hentry category-viewup">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/4361/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2018-02-03T22:12:09+09:00">2018年2月3日</time></a> </span><span class="posted-on">更新日:2018年2月3日</span> <span class="categories">  <a href="./../category/viewup.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ViewUP</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /4361.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">グーグルクラウドの仮想マシン１週間の値段</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p> さぁ、週末になりました。みなさんお仕事お疲れ様です。JunkHack の近況は一言で言えば「現場は最後の火事場に突入、阿鼻叫喚」といったところです。２時帰りでした。エンジニアは直感的に、この仕事は無理すれば間に合うか、間に合わないか肌感覚で判別していますが、この仕事は明らかに厳しそうです。立派だなと思うのは、上位の中間管理者のパワハラがあまりないことです。プロジェクトは破綻しているが、人間の品質は高い言えるでしょう。構造的な欠陥は、各プロジェクトチーム間を専任で連携する担当部署（者）がないことと、指揮命令系統の責任範囲がしっかり明確化されていないことです。</p>
<p> また、納品間際で客先要望で設計変更があること、また設計上の重大な欠陥が見つかり設計変更があること、そして重要なそれらを担当できる人間のタスクが許容を大幅に超えているという現実です。今後、これらの問題をどのようにカバーしていくかがこの仕事の１つの楽しみでもあります。ちなみに自分の位置は、末端作業者であり、途中からの設計引継ぎという感じで一部設計者です。</p>
<p>&#160;</p>
<h3>■記事の要約</h3>
<p> さて、今回の話の要約は以下のようになります。</p>
<p>・グーグルクラウドの仮想マシンで１週間動かしてみた値段は、約180円で１日約26円</p>
<p>・WordPress を動かすため、OS,WEB,DB,PHP を動作させるためアプリは何がよいか？</p>
<p>・１台シングル構成でいくか、クラスタ構成でいくか？</p>
<p>・WEB は apache じゃなく nginx を採用する？</p>
<p>・DB は、mariadb を採用する？</p>
<p>・PHP は ver7 にするか、HHVM を採用するか検討</p>
<p>&#160;</p>
<h3>■グーグルクラウドの仮想マシンで１週間動かしてみた</h3>
<p>１週間ほど、グーグルクラウド（Google Cloud Platform のこと）の東京ゾーンで、g1-small（vCPU x 1、メモリ 1.7 GB）10GB SSD を動かし続けてみました。基礎的な値段を知るためです。<img loading="lazy" title="1week" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="1week" src="./../images/1week.png" width="640" height="256" /> </p>
<p>28日は、リソースをごにょごにょと切り替えてベンチマークしていたので、値段はおおよそです。</p>
<p><img loading="lazy" title="gcp_JunkHackup" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="gcp_JunkHackup" src="./../images/gcp_junkhackup.png" width="633" height="325" /> </p>
<p>コンパネからの値段は以上の表示でした。予想より低い値段ですね。１ヶ月４週として、720円、１０００円未満です。まぁ、ネットワーク負荷はまったくないですし、CPU もまったく使っていませんので１つの目安です。ちなみに、このインスタンスのベンチマークは前回計測しましたが、683 程度の Index Score です。ラズパイ3相当です。SSD ですがディスクへの I/O にもリソース制限があり、</p>
<p><img loading="lazy" title="Compute_Engine_-_JunkHackup" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="Compute_Engine_-_JunkHackup" src="./../images/compute_engine__junkhackup.png" width="381" height="116" /> </p>
<p>この IOPS がどのような条件かは不明ですが、300程度に絞られている感じです。まぁ、無料枠は、３．２万ほどありますからこのインスタンスを動かし続けても無料枠で１年はいけそうです。もし遅いなと思ったら、CPU コア数を増やすか、メモリを増やすかして調整してみることにします。</p>
<p>&#160;</p>
<h3>■WordPress を動かすアプリは何がよいか？</h3>
<p>OSや、その上に乗っけるWEB のアプリケーションは何がよいか改めて検討してみることにします。</p>
<p>現在、仮で動かしているOS は CentOS7 ですが、グーグルクラウドのブートディスクで用意されているものは以下のようになります。</p>
<p><img loading="lazy" title="Compute_Engine_-_JunkHackup 2" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="Compute_Engine_-_JunkHackup 2" src="./../images/compute_engine__junkhackup2.png" width="611" height="954" /> </p>
<p>Debian GNU/Linux 9 (stretch)が初期値ですが、RHEL6や RHEL7 も選べます。たぶん、インスタンスの値段があがると思いますが。また、Win系のOS も選べます。JunkHack 的には、お仕事でもなじみがある RHEL互換の CentOS を選ぶのがベストかなと思いますが、Debian系の OS を選べば、たとえばフェイスブックが開発している HHVM という PHP のようなエンジンがお手軽に使えるというメリットもあります。また、RHEL を選択し、開発アカウント上で挙動の確認をする（実運用はしない）という目的も達成できそうです。１からDVDブートなり USBブートなりして、OS を入れる方法があるかどうかはまだ不明です。</p>
<p> また、このイメージは、Cloud Launcher というポータルサイトから選ぶことも可能です。</p>
<blockquote>
<p>GCP Cloud Launchar 仮想マシン</p>
<p><a title="https://console.cloud.google.com/launcher/browse?filter=solution-type:vm" href="https://console.cloud.google.com/launcher/browse?filter=solution-type:vm" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">https://console.cloud.google.com/launcher/browse?filter=solution-type:vm<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>ここには、必要なアプリケーションの上にWordPress をプリインストールしてあるイメージもあります。お手軽に試してみるにはいいかもですが、他人が作ったものなので細部がわからないため、これはとりあえずパスです。</p>
<p> あと、手元の環境で作成したイメージを使って移行することも可能なはずで、この方法は次回以降検討したいと思います。大雑把な流れとしては、手元のバーチャルボックスで作成した各種OS環境をグーグル上で動作させる手順がわかればいろいろと応用が可能です。</p>
<p>&#160;</p>
<h3>■オンラインで追加DISKをつけてみた</h3>
<p> あと、DISKの追加をオンライン（電源を切らずに）で出来るか確認しておきました。結果、オンラインで追加でき、IOPS は以下のようになりました。</p>
<blockquote>
<p>・実行コマンド</p>
<p>wget http://www.winkey.jp/downloads/visit.php/fio-crystaldiskmark -O crystaldiskmark.fio     <br />sed -i &#8216;s/tmp/home\/tmp/&#8217; crystaldiskmark.fio      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^^^^^^^^テストしたいデバイスのあるパス      <br />fio crystaldiskmark.fio | tee log      <br />grep iops -B1 log</p>
</blockquote>
<blockquote>
<p>結果</p>
<p>・<font color="#ff0000">sda（10GB SSD bootDISK） xfs</font></p>
<p>Seq-Read: (groupid=0, jobs=1): err= 0: pid=22249: Sat Feb&#160; 3 16:45:49 2018     <br />&#160; read : io=1024.0MB, bw=249246KB/s, <font color="#ff0000">iops=243</font>, runt=&#160; 4207msec      <br />&#8212;      <br />Seq-Write: (groupid=1, jobs=1): err= 0: pid=22250: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; write: io=1024.0MB, bw=104036KB/s, <font color="#ff0000">iops=101</font>, runt= 10079msec      <br />&#8212;      <br />Rand-Read-512K: (groupid=2, jobs=1): err= 0: pid=22251: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; read : io=1024.0MB, bw=37647KB/s, iops=73, runt= 27853msec      <br />&#8212;      <br />Rand-Write-512K: (groupid=3, jobs=1): err= 0: pid=22260: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; write: io=1024.0MB, bw=104191KB/s, iops=203, runt= 10064msec      <br />&#8212;      <br />Rand-Read-4K: (groupid=4, jobs=1): err= 0: pid=22261: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; read : io=458240KB, bw=7637.3KB/s, iops=1909, runt= 60001msec      <br />&#8212;      <br />Rand-Write-4K: (groupid=5, jobs=1): err= 0: pid=22270: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; write: io=532956KB, bw=8882.5KB/s, iops=2220, runt= 60001msec      <br />&#8212;      <br />Rand-Read-4K-QD32: (groupid=6, jobs=1): err= 0: pid=22271: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; read : io=391988KB, bw=6530.9KB/s, iops=1632, runt= 60021msec      <br />&#8212;      <br />Rand-Write-4K-QD32: (groupid=7, jobs=1): err= 0: pid=22280: Sat Feb&#160; 3 16:45:49 2018      <br />&#160; write: io=361704KB, bw=6026.2KB/s, iops=1506, runt= 60022msec</p>
<p>&#160;</p>
<p>・<font color="#ff0000">sdb (30GB SSD 追加DISK) ext4</font></p>
<p>Seq-Read: (groupid=0, jobs=1): err= 0: pid=22576: Sat Feb&#160; 3 17:15:26 2018     <br />&#160; read : io=1024.0MB, bw=250496KB/s, <font color="#ff0000">iops=244</font>, runt=&#160; 4186msec      <br />&#8212;      <br />Seq-Write: (groupid=1, jobs=1): err= 0: pid=22577: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; write: io=1024.0MB, bw=37378KB/s, <font color="#ff0000">iops=36</font>, runt= 28053msec      <br />&#8212;      <br />Rand-Read-512K: (groupid=2, jobs=1): err= 0: pid=22580: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; read : io=1024.0MB, bw=104900KB/s, iops=204, runt=&#160; 9996msec      <br />&#8212;      <br />Rand-Write-512K: (groupid=3, jobs=1): err= 0: pid=22581: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; write: io=1024.0MB, bw=32532KB/s, iops=63, runt= 32232msec      <br />&#8212;      <br />Rand-Read-4K: (groupid=4, jobs=1): err= 0: pid=22589: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; read : io=407976KB, bw=6799.5KB/s, iops=1699, runt= 60001msec      <br />&#8212;      <br />Rand-Write-4K: (groupid=5, jobs=1): err= 0: pid=22598: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; write: io=226936KB, bw=3782.3KB/s, iops=945, runt= 60001msec      <br />&#8212;      <br />Rand-Read-4K-QD32: (groupid=6, jobs=1): err= 0: pid=22600: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; read : io=660252KB, bw=11000KB/s, iops=2750, runt= 60022msec      <br />&#8212;      <br />Rand-Write-4K-QD32: (groupid=7, jobs=1): err= 0: pid=22613: Sat Feb&#160; 3 17:15:26 2018      <br />&#160; write: io=361552KB, bw=6023.7KB/s, iops=1505, runt= 60022msec</p>
</blockquote>
<p>追加DISKの書き込みが遅いのは気になりますが、まぁ、もともと絞りこんであって遅いのでまぁどうでもいいです。まぁ、話はだいぶそれましたが、OSは、このまま centos7(kernel 3.10.0-693.17.1.el7.x86_64) で動かすことにします。</p>
<p>&#160;</p>
<h3>■PHP7 の変わりに HHVM を採用</h3>
<p>次に検討するのは、WEB,DB,PHPを何にするかです。一応、centos 標準だと以下のようになります。</p>
<blockquote>
<p>apache(httpd) 2.4.6 + mod_ssl</p>
<p>php 5.4.16</p>
<p>mariadb 5.5.56</p>
</blockquote>
<p>今のリポジトリは以下のようになっています。</p>
<blockquote>
<p># yum repolist     <br />::      <br />repo id&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; repo name&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />base/7/x86_64&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CentOS-7 &#8211; Base&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />epel/x86_64&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Extra Packages for Enterprise Linux 7 &#8211; x86_64      <br />extras/7/x86_64&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CentOS-7 &#8211; Extras&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />google-cloud-compute&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Google Cloud Compute&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />google-cloud-sdk&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Google Cloud SDK&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />updates/7/x86_64&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CentOS-7 &#8211; Updates&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </p>
</blockquote>
<p>一応、構想としては、WEB は apache じゃなく、nginx にして、DB は、MariaDB Galera Cluster で、PHP 相当は、HHVMにしようかという思いがあります。ずいぶん前ですが、ローカル環境に２台の構成で、LB経由で負荷テストをしましたが HHVM の速度が驚くほど速く感動した覚えがあります。今は、PHP7 がリリースされて速度は速くなったと聞きます。</p>
<p>以下にいい比較記事がありました。</p>
<blockquote>
<p>HHVM vs PHP 7 – The Competition Gets Closer!</p>
<p><a title="https://kinsta.com/blog/hhvm-vs-php-7/" href="https://kinsta.com/blog/hhvm-vs-php-7/" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">https://kinsta.com/blog/hhvm-vs-php-7/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>グラフを見ると、PHP7 もほとんど同じ速度ですが、CPU は HHVM のほうが節約できそうです。HHVM で行こうかなと思います。DBは、mariadb 5.5 でもいいんですが、２台構成の wordpress クラスタに実験的に運用してみようと思っていますのでお手軽に同期ができるDBとして使おうと思います。</p>
<p>&#160;</p>
<h3>■まとめ</h3>
<p>以下のような構想です。</p>
<p>・WEB nginx </p>
<p>・DB&#160; MariaDB Galera Cluster </p>
<p>・HHVM</p>
<p>・Gluster File System（glusterfs-server）wp-content/uploads の共有</p>
<p>LBは使わず、とりあえずはDNSラウンドロビンにて２台の WordPress サーバでそれぞれ振り分けるという感じです。可用性という観点は、まず置いておいて、その一歩手前までやってみようと思います。</p>
<p> この構成で興味があるのは、MariaDB の Cluster は本当に、１台で更新すれば２台目に同期されるのか？や、GlusterFS は実運用上、問題点はないかなどです。更新者は一人なので、同時書き込みの心配はほぼ無用なので、多少のラグがあっても問題はないのですが、実際に構成してみて、動作を確かめてみたいです。</p>
<p>&#160;</p>
<p> たかが、WordPress を動かすだけに os から選定し、アプリを選定したりするのは恐ろしく一般的ではないとは思いますが、こういうマニア向けの記事もどこかで需要があるかもしれません。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
			
	<nav class="navigation posts-navigation" role="navigation" aria-label="投稿">
		<h2 class="screen-reader-text">投稿ナビゲーション</h2>
		<div class="nav-links"><div class="nav-previous"><a href="./../category/viewup/page/2.html" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div></div>
	</nav>
		
		</main><!-- #main -->
	</section><!-- #primary -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer wrap" role="contentinfo">
		<div class="site-info">
			Copyleft - all rights reversed.
			<span class="sep"> | </span>
			JunkHack 2011 - 2021
			<span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">運営者情報<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/sendmail/" data-wpel-link="internal" rel="noopener noreferrer">お問い合わせ<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/privacy/" data-wpel-link="internal" rel="noopener noreferrer">プライバシーポリシー<span class="gf"></a>
		</div><!-- .site-info -->

	</footer><!-- #colophon -->
</div><!-- #page -->

        <div id="wpfront-scroll-top-container">
            <img src="./../images/1.png" alt="" />        </div>
                <script type="text/javascript">
            function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();
        </script>
        <script type='text/javascript' src='./../js/core.min.js' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='./../js/menu.min.js' id='jquery-ui-menu-js'></script>
<script type='text/javascript' src='./../js/wp-polyfill.min.js' id='wp-polyfill-js'></script>
<script type='text/javascript' id='wp-polyfill-js-after'>
( 'fetch' in window ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-fetch.min.js?ver=3.0.0"></scr' + 'ipt>' );( document.contains ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-node-contains.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.DOMRect ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-dom-rect.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.URL && window.URL.prototype && window.URLSearchParams ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-url.min.js?ver=3.6.4"></scr' + 'ipt>' );( window.FormData && window.FormData.prototype.keys ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-formdata.min.js?ver=3.0.12"></scr' + 'ipt>' );( Element.prototype.matches && Element.prototype.closest ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-element-closest.min.js?ver=2.0.2"></scr' + 'ipt>' );( 'objectFit' in document.documentElement.style ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-object-fit.min.js?ver=2.3.4"></scr' + 'ipt>' );
</script>
<script type='text/javascript' src='./../js/dom-ready.min.js' id='wp-dom-ready-js'></script>
<script type='text/javascript' src='./../js/hooks.min.js' id='wp-hooks-js'></script>
<script type='text/javascript' src='./../js/i18n.min.js' id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
</script>
<script type='text/javascript' id='wp-a11y-js-translations'>
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2021-05-20 01:00:08+0000","generator":"GlotPress\/3.0.0-alpha.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"Notifications":["\u901a\u77e5"]}},"comment":{"reference":"wp-includes\/js\/dist\/a11y.js"}} );
</script>
<script type='text/javascript' src='./../js/a11y.min.js' id='wp-a11y-js'></script>
<script type='text/javascript' id='jquery-ui-autocomplete-js-extra'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002","oneResult":"1\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","manyResults":"%d\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","itemSelected":"\u9805\u76ee\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u3002"};
/* ]]> */
</script>
<script type='text/javascript' src='./../js/autocomplete.min.js' id='jquery-ui-autocomplete-js'></script>
<script type='text/javascript' src='./../js/wpfront-scroll-top.min.js' id='wpfront-scroll-top-js'></script>
<script type='text/javascript' src='./../js/hew.js' id='hew-scripts-js'></script>
<script type='text/javascript' src='./../js/navigation.js' id='hew-navigation-js'></script>
<script type='text/javascript' src='./../js/skip-link-focus-fix.js' id='hew-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='./../js/wp-embed.min.js' id='wp-embed-js'></script>

</body>
</html>

<!--This file was exported by "Export WP Page to Static HTML" plugin which created by ReCorp (https://myrecorp.com) -->