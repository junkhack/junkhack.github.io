<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">


<title>Linux &#8211; ページ 9 &#8211; JunkHack</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="/feed">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; コメントフィード" href="/comments/feed">
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; Linux カテゴリーのフィード" href="/category/linux/feed">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="export-wp-page-to-static-html-css" href="/wp-content/plugins/export-wp-page-to-static-html-pro-premium/public/css/export-wp-page-to-static-html-public.css?ver=1.0.4" type="text/css" media="all">
<link rel="stylesheet" id="wpel-style-css" href="/wp-content/plugins/wp-external-links/public/css/wpel.css?ver=2.48" type="text/css" media="all">
<link rel="stylesheet" id="wpfront-scroll-top-css" href="/wp-content/plugins/wpfront-scroll-top/css/wpfront-scroll-top.min.css?ver=2.0.4.04013" type="text/css" media="all">
<link rel="stylesheet" id="related-frontend-css-css" href="/wp-content/plugins/ccrw_related/css/frontend-style.css?ver=0.1.0" type="text/css" media="all">
<link rel="stylesheet" id="hew-fonts-css" href="https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="/wp-content/themes/hew-wpcom/genericons/genericons.css?ver=3.4.1" type="text/css" media="all">
<link rel="stylesheet" id="hew-style-css" href="/wp-content/themes/hew-wpcom/style.css?ver=5.7.2" type="text/css" media="all">
		<script>
			/* <![CDATA[ */
			var rcewpp = {
				"ajax_url":"/wp-admin/admin-ajax.php",
				"nonce": "c8372d57e1",
				"home_url": "/",
				"settings_icon": '/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings.png',
				"settings_hover_icon": '/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings_hover.png'
			};
			/* ]]\> */
		</script>
		<script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-3.5.1.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-content/plugins/jquery-manager/assets/js/jquery-migrate-3.3.0.min.js" id="jquery-migrate-js"></script>
<script type="text/javascript" src="/wp-content/plugins/export-wp-page-to-static-html-pro-premium/public/js/export-wp-page-to-static-html-public.js?ver=1.0.4" id="export-wp-page-to-static-html-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/categories/47">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.7.2">
<script data-ad-client="ca-pub-2711753458083215" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-161935417-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-161935417-2');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-13YWDXYQE2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-13YWDXYQE2');
</script>
<body class="archive paged category category-linux category-47 paged-9 category-paged-9 has-sidebar has-header-image">
<div id="page" class="hfeed site">
		<div id="widgets-wrapper" class="hide">
		
<div id="secondary" class="wrap top-widget-area" role="complementary">
		<div id="sidebar-1" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">検索:</span>
					<input type="search" class="search-field" placeholder="検索&hellip;" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="検索">
			</form></aside>	</div>
<!-- #first .widget-area -->
	
	
	
	</div>
<!-- #secondary -->
	</div>
	
	<a class="skip-link screen-reader-text" href="#content">コンテンツへ移動</a>

	<header id="masthead" class="site-header" role="banner">
					<a class="site-logo" href="/" title="JunkHack" rel="home noopener noreferrer" data-wpel-link="internal">
				<img src="https://secure.gravatar.com/avatar/997681319c3cbb0bdcca95770d5edaa6/?s=80&#038;d=mm" width="80" height="80" alt="" class="no-grav header-image">
			</a>
		
		<div class="site-branding">
			<h1 class="site-title"><a href="/" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
			<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
		</div>

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button>
				<div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu">
<li id="menu-item-10711" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10711"><a href="/list.html" data-wpel-link="internal" rel="noopener noreferrer">LIST</a></li>
<li id="menu-item-10712" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10712"><a href="/status.html" data-wpel-link="internal" rel="noopener noreferrer">Status</a></li>
<li id="menu-item-10713" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10713"><a href="https://junkhack.gpl.jp/sendmail" data-wpel-link="internal" rel="noopener noreferrer">CONTACT</a></li>
</ul></div>			</nav><!-- #site-navigation -->
		
		
				<div class="toggle-wrapper">
			<a href="#" class="widgets-toggle toggle-button" title="ウィジェット">
				<span class="screen-reader-text">ウィジェット</span>
			</a>
		</div>
		
	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">カテゴリー: <span>Linux</span>
</h1>			</header><!-- .page-header -->

						
				
<article id="post-1990" class="post-1990 post type-post status-publish format-standard hentry category-aliexpress category-linux category-orangepi category-orangepipc category-parts">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/1990.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2016-01-03T23:32:07+09:00">2016年1月3日</time></a> </span><span class="posted-on">更新日:2016年1月3日</span> <span class="categories">  <a href="/category/aliexpress" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="/category/linux" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/orangepi" rel="category tag noopener noreferrer" data-wpel-link="internal">OrangePi</a>, <a href="/category/orangepipc" rel="category tag noopener noreferrer" data-wpel-link="internal">OrangePiPC</a>, <a href="/category/parts" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/1990.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">OrangePi PC をクロックダウン</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>OPI PC にファンをつけて、ついでに sccript.bin を作り直して1.5MHz から1.2MHz にクロックダウンして運用していますが、CPU 温度は30度から40 度を推移しているようです。</p>
<p><img loading="lazy" title="h3_temp-day-2" style="float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;" border="0" alt="h3_temp-day-2" src="/wp-content/uploads/2016/01/h3_tempday2.png" width="497" height="280"> </p>
<p>この状態でベンチマークがどのくらいいくかテストしてみました。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">   ========================================================================
   BYTE UNIX Benchmarks (Version 5.1.3)
   System: OrangePi: GNU/Linux
   OS: GNU/Linux -- 3.4.39-01-lobo -- #1 SMP PREEMPT Sun Oct 25 14:46:41 CET 2015
   Machine: armv7l (armv7l)
   Language: en_US.utf8 (charmap=&quot;UTF-8&quot;, collate=&quot;UTF-8&quot;)
   07:17:03 up 44 min,  2 users,  load average: 1.56, 1.61, 1.56; runlevel 3
   ------------------------------------------------------------------------
   Benchmark Run: Sun Jan 03 2016 07:17:03 - 07:46:42
   0 CPUs in system; running 4 parallel copies of tests
   ::
   System Benchmarks Index Values               BASELINE       RESULT    INDEX
   Dhrystone 2 using register variables         116700.0   17298899.9   1482.3
   Double-Precision Whetstone                       55.0       2969.0    539.8
   Execl Throughput                                 43.0       1464.1    340.5
   File Copy 1024 bufsize 2000 maxblocks          3960.0     149424.6    377.3
   File Copy 256 bufsize 500 maxblocks            1655.0      45277.4    273.6
   File Copy 4096 bufsize 8000 maxblocks          5800.0     380747.9    656.5
   Pipe Throughput                               12440.0     911007.9    732.3
   Pipe-based Context Switching                   4000.0     124699.6    311.7
   Process Creation                                126.0       3414.8    271.0
   Shell Scripts (1 concurrent)                     42.4       1865.6    440.0
   Shell Scripts (8 concurrent)                      6.0        307.0    511.6
   System Call Overhead                          15000.0    2100567.0   1400.4
   ========
   System Benchmarks Index Score                                         516.5</pre>
<p>おおよそ、RasPi2 より少し速い500ポイントちょいのスコアです。クロックダウンする前は、600ちょいだったので、すこし遅くなった感じですね。</p>
<p>&#160;</p>
<p>実際にサーバとして仮運用していますので、レスポンスなど見たい方は以下にアクセスしてみてください。昨年からテストで運用しています。</p>
<blockquote>
<p>Fedora22 OrangePi PC<br>
    <br><a title="/" href="/" data-wpel-link="internal" rel="noopener noreferrer">/</a> </p>
<p>・NGINX + php-fpm + MariaDB</p>
</blockquote>
<p>そこそこ重めのアプリケーションのWordPress が動作しています。ネットワーク的には、サーバからの下りは帯域は絞られていると思いますので差し引いてみてください。今のところ、そこそこストレスなく動作しています。</p>
<p>&#160;</p>
<p>当初、OpenStack として勉強用に使おうと思っていたのですが、何年ぶりかで自宅サーバを運用してみたら面白くてOpenStack の構成の検証に環境を壊したくないなぁという感じです。もう一台ほしいなぁと。</p>
<p>WEBを散歩しているとなにやら、Orange pi Oneという10ドルくらいのものも発売されるということで、すこし様子見をしています。</p>
<blockquote>
<p>CNXSoft<br>
    <br><a href="http://www.cnx-software.com/2016/01/02/orange-pi-one-is-a-10-quad-core-board-with-ethernet-and-hdmi/" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">Orange Pi One is a $10 Quad Core Board with Ethernet and HDMI<span class="wpel-icon wpel-image wpel-icon-1"></span></a> </p>
<p><img loading="lazy" title="Orange_Pi_One" style="float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;" border="0" alt="Orange_Pi_One" src="/wp-content/uploads/2016/01/orange_pi_one.jpg" width="640" height="421"> </p>
</blockquote>
<p>どうやら、WIFI 付きモデルと、10/100M Ethernet モデルが出るようです。なかなか面白そうです。比較表は、OSAKANA TARO さんのページにあります。</p>
<blockquote>
<p>OSAKANA TARO のメモ帳<br>
    <br><a href="http://blog.osakana.net/archives/6789" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">Orange Pi ONEの詳細が出た！<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>CPU は、今のと同じ 6ドルの H3 （4core）を使うようです。これで、9.99ドルで出せるとはほぼ原価並の価格ですね。メーカ（Shenzhen Xunlong Software）は、かなり大量にパーツを購入しているんでしょう。とにかくこれは出たら買いです。</p>
<p>&#160;</p>
<p>OpenStack Ironic としてベアメタルな構成を考えているのですが、動作に必要な PXE Boot の実験がまだ終わっていません。まだ、OpenStack 自体もあまり良くわかっていないのですが、おそらくベアメタルをコントロールする際に、PXE Boot が必要になると思います。あとIPMI で電源とかなにか操作するようです。このあたりの検証もしないといけません。おそらく、なにか工夫する必要があると思っています。</p>
<p>&#160;</p>
<p>5台くらいの構成で考えているのですが、安いほうがいいよねということで、Orange pi Oneが出てから考えたいなぁと思っています。5000円くらいで、最小構成を目指して OpenStack のベアメタルを勉強してみたいと思っています。</p>
<p>&#160;</p>
<p>まとめ</p>
<p>・クロックを1.2Mhz にダウンさせるとベンチマークは500ちょい</p>
<p>・ヒートシンクと、ファンをつけた状態でアイドル時、温度は30度から40度を推移</p>
<p>・負荷をかけると50度ちょいくらい</p>
<p>・追加購入は、OrangePi PC の15ドルより安い9.99ドルの Orange Pi One というのが出るまで待ち</p>
<p>・U-Boot する仕組みを勉強してみる</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1984" class="post-1984 post type-post status-publish format-standard hentry category-aliexpress category-linux category-orangepi category-orangepipc category-parts">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/1984.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2016-01-03T06:18:48+09:00">2016年1月3日</time></a> </span><span class="posted-on">更新日:2016年1月3日</span> <span class="categories">  <a href="/category/aliexpress" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="/category/linux" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/orangepi" rel="category tag noopener noreferrer" data-wpel-link="internal">OrangePi</a>, <a href="/category/orangepipc" rel="category tag noopener noreferrer" data-wpel-link="internal">OrangePiPC</a>, <a href="/category/parts" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/1984.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">Funの効果は、-15度！</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ちょっと、orange pi pc で作業をしようと思い、ファンの電源をONにしました。</p>
<p>すると、やっぱりかなり効果があったようで、15度は下がっています。</p>
<p> <img loading="lazy" title="h3_temp-day-1" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="h3_temp-day-1" src="/wp-content/uploads/2016/01/h3_tempday1.png" width="497" height="280">   </p>
<p align="center">※途中、空白なのはmunin の設定変えたけど再起動してなかった</p>
<p>今、CPUクロックが最高で1.5GHz くらいまであがる設定なので、速いですが温度もあがるようです。</p>
<p> <img loading="lazy" title="cpuspeed-day" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="cpuspeed-day" src="/wp-content/uploads/2016/01/cpuspeedday.png" width="497" height="316">   </p>
<p>途中、コンパイルしていて1.5Ghz まで上がっていますが温度は、50度くらいのようです。これで少し安心して作業ができますね。さすがに、80度とかちょっと心配になるので。上限のクロックを下げるという方法もあるのですが、どうせならぶん回したいので。</p>
<p>&#160;</p>
<p>クロックを下げるには、/sys 配下のscaling_max_freq と scaling_min_freq に起動したら設定を入れておく方法と、ブート領域のパラメータを持っているscrpt.bin で指定する方法があるようです。</p>
<p>以下のページが参考になります。</p>
<blockquote>
<p>Sunxi Wiki     <br>Orange Pi PC      <br><a title="http://linux-sunxi.org/Orange_Pi_PC#CPU_clock_speed_limit" href="http://linux-sunxi.org/Orange_Pi_PC#CPU_clock_speed_limit" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">http://linux-sunxi.org/Orange_Pi_PC#CPU_clock_speed_limit<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>当初、まったく意味不明だったのですがどうやら、sdCard のブート領域にあるscript.bin がuImage に渡すパラメータを持っているようです。今、動作させているのは loborisさんが作ったものですが、以下のようになっています。</p>
<p>&#160;</p>
<p>このscript.bin をfex2bin というツールで展開すると見れます。</p>
<blockquote>
<p>Sunxi-tools     <br><a title="http://linux-sunxi.org/Sunxi-tools#bin2fex" href="http://linux-sunxi.org/Sunxi-tools#bin2fex" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://linux-sunxi.org/Sunxi-tools#bin2fex<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>以下のようにして、実機でビルドしました。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;"># dnf install libusbx-devel
$ cd /usr/local/src/BUILD
$ git clone https://github.com/linux-sunxi/sunxi-tools
$ cd sunxi-tools/
$ LANG=C make</pre>
<p>今後も使うと思うので、パスが切れているところに入れておきます。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">sudo cp -pr ./bin2fex /usr/local/bin
sudo cp -pr ./fex2bin /usr/local/bin
sudo cp -pr ./sunxi-* /usr/local/bin

sudo chown root.root /usr/local/bin/bin2fex
sudo chown root.root /usr/local/bin/fex2bin
sudo chown root.root /usr/local/bin/sunxi-*</pre>
<p>で、以下のように使うようです。</p>
<blockquote>
<p>$ bin2fex script.bin lobo.fex</p>
</blockquote>
<p>この中はパラメータがたくさん書かれたもので、最大と最小が以下のように指定されていました。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">[dvfs_table]
pmuic_type = 2
pmu_gpio0 = port:PL06&lt;1&gt;&lt;1&gt;&lt;2&gt;&lt;1&gt;
pmu_level0 = 11300
pmu_level1 = 576
extremity_freq = 1536000000
max_freq = 1536000000
min_freq = 480000000
LV_count = 8
LV1_freq = 1536000000
LV1_volt = 1500
LV2_freq = 1200000000
LV2_volt = 1300
LV3_freq = 0
LV3_volt = 1100
LV4_freq = 0
LV4_volt = 1100
LV5_freq = 0
LV5_volt = 1100
LV6_freq = 0
LV6_volt = 1100
LV7_freq = 0
LV7_volt = 1100
LV8_freq = 0
LV8_volt = 1100</pre>
<p>このファイルは、.fex というのが通り名称のようです。sunxi の git リポジトリに昨年の12月22日にリリースされた.fex ファイルは以下にあります。</p>
<blockquote>
<p>sunxi-boards/sys_config/h3/<br>
    <br><a title="https://github.com/linux-sunxi/sunxi-boards/tree/master/sys_config/h3" href="https://github.com/linux-sunxi/sunxi-boards/tree/master/sys_config/h3" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/linux-sunxi/sunxi-boards/tree/master/sys_config/h3<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>現在の、script.bin の内容と比較すると以下のようです。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">[junkhack@OrangePi BUILD]$ mkdir tmp_boot
[junkhack@OrangePi BUILD]$ cp -pr /media/boot/* tmp_boot/
[junkhack@OrangePi BUILD]$ ll tmp_boot/
::
-rwxr-xr-x 1 501 root    35812 12月 19 14:29 script.bin
-rwxr-xr-x 1 501 root 10917600 12月 19 14:29 uImage
[junkhack@OrangePi BUILD]$ 
[junkhack@OrangePi BUILD]$ cp -p ./sunxi-boards/sys_config/h3/xunlong_orange_pi_pc.fex tmp_boot/
[junkhack@OrangePi BUILD]$ cd tmp_boot/

[junkhack@OrangePi tmp_boot]$ bin2fex script.bin lobo.fex

[junkhack@OrangePi tmp_boot]$ diff -up lobo.fex xunlong_orange_pi_pc.fex &gt; lobo_opipc.patch</pre>
<p>違いは以下のようです。</p>
<p>&#8212;- lobo_opipc.patch</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">--- lobo.fex    2016-01-03 04:30:34.000000000 +0900
+++ xunlong_orange_pi_pc.fex    2016-01-03 04:10:45.000000000 +0900
@@ -8,7 +8,8 @@ eraseflag = 1
 next_work = 2
 
 [target]
-boot_clock = 1536
+#boot_clock = 1008
+boot_clock = 1200
 storage_type = -1
 
 [key_detect_en]
@@ -146,7 +147,7 @@ twi_scl = port:PA11&lt;2&gt;&lt;default&gt;&lt;default&gt;
 twi_sda = port:PA12&lt;2&gt;&lt;default&gt;&lt;default&gt;&lt;default&gt;
 
 [twi1]
-twi_used = 1
+twi_used = 0
 twi_scl = port:PA18&lt;3&gt;&lt;default&gt;&lt;default&gt;&lt;default&gt;
 twi_sda = port:PA19&lt;3&gt;&lt;default&gt;&lt;default&gt;&lt;default&gt;
 
@@ -165,14 +166,14 @@ uart_rx = port:PA05&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;defau
 [uart1]
 uart_used = 0
 uart_port = 1
-uart_type = 2
+uart_type = 4
 uart_tx = port:PG06&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 uart_rx = port:PG07&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 uart_rts = port:PG08&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 uart_cts = port:PG09&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 
 [uart2]
-uart_used = 1
+uart_used = 0
 uart_port = 2
 uart_type = 4
 uart_tx = port:PA00&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
@@ -181,16 +182,16 @@ uart_rts = port:PA02&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;defa
 uart_cts = port:PA03&lt;2&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 
 [uart3]
-uart_used = 1
+uart_used = 0
 uart_port = 3
-uart_type = 2
+uart_type = 4
 uart_tx = port:PA13&lt;3&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 uart_rx = port:PA14&lt;3&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 uart_rts = port:PA15&lt;3&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 uart_cts = port:PA16&lt;3&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 
 [spi0]
-spi_used = 1
+spi_used = 0
 spi_cs_bitmap = 1
 spi_mosi = port:PC00&lt;3&gt;&lt;default&gt;&lt;default&gt;&lt;default&gt;
 spi_miso = port:PC01&lt;3&gt;&lt;default&gt;&lt;default&gt;&lt;default&gt;
@@ -209,50 +210,66 @@ spi_miso = port:PA16&lt;2&gt;&lt;default&gt;&lt;default
 spi_dev_num = 1
 
 [spi_board0]
-modalias = &quot;spidev&quot;
+modalias = &quot;m25p32&quot;
 max_speed_hz = 33000000
 bus_num = 0
 chip_select = 0
 mode = 0
-full_duplex = 1
-manual_cs = 0
 
 [gpio_para]
 gpio_used = 1
-gpio_num = 19
-gpio_pin_1 = port:PL10&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_2 = port:PA15&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;1&gt;
-gpio_pin_3 = port:PA06&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_4 = port:PA13&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_5 = port:PA14&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_6 = port:PD14&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_7 = port:PA03&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_8 = port:PC04&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_9 = port:PC07&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_10 = port:PC03&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_11 = port:PA21&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_12 = port:PA07&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_13 = port:PA08&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_14 = port:PG08&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_15 = port:PA09&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_16 = port:PA10&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_17 = port:PG09&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_18 = port:PG06&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-gpio_pin_19 = port:PG07&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
-
-[led_assign]
-normal_led = &quot;gpio_pin_2&quot;
-standby_led = &quot;gpio_pin_1&quot;
+gpio_num = 30
+; gpio_pin_1 = port:PL10&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;1&gt;
+; gpio_pin_2 = port:PA15&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_3 = port:PA12&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_4 = port:PA11&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_5 = port:PA06&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_6 = port:PA13&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_7 = port:PA14&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_8 = port:PA01&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_9 = port:PD14&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_10 = port:PA00&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_11 = port:PA03&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_12 = port:PC04&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_13 = port:PC07&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_14 = port:PC00&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_15 = port:PC01&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_16 = port:PA02&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_17 = port:PC02&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_18 = port:PC03&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_19 = port:PA21&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_20 = port:PA19&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_21 = port:PA18&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_22 = port:PA07&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_23 = port:PA08&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_24 = port:PG08&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_25 = port:PA09&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_26 = port:PA10&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_27 = port:PG09&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_28 = port:PA20&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_29 = port:PG06&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+gpio_pin_30 = port:PG07&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+
+;[led_assign]
+;normal_led = &quot;gpio_pin_2&quot;
+;standby_led = &quot;gpio_pin_1&quot;
+
+[leds_para]
+leds_used = 1
+green_led = port:PL10&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+green_led_active_low = 0
+red_led = port:PA15&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;0&gt;
+red_led_active_low = 0
 
 [ths_para]
 ths_used = 1
-ths_trip1_count = 5
-ths_trip1_0 = 75
-ths_trip1_1 = 85
-ths_trip1_2 = 90
-ths_trip1_3 = 100
-ths_trip1_4 = 105
-ths_trip1_5 = 0
+ths_trip1_count = 6
+ths_trip1_0 = 70
+ths_trip1_1 = 80
+ths_trip1_2 = 85
+ths_trip1_3 = 90
+ths_trip1_4 = 95
+ths_trip1_5 = 100
 ths_trip1_6 = 0
 ths_trip1_7 = 0
 ths_trip1_0_min = 0
@@ -264,21 +281,22 @@ ths_trip1_2_max = 3
 ths_trip1_3_min = 3
 ths_trip1_3_max = 4
 ths_trip1_4_min = 4
-ths_trip1_4_max = 4
-ths_trip1_5_min = 0
-ths_trip1_5_max = 0
+ths_trip1_4_max = 5
+ths_trip1_5_min = 5
+ths_trip1_5_max = 5
 ths_trip1_6_min = 0
 ths_trip1_6_max = 0
 ths_trip2_count = 1
 ths_trip2_0 = 105
 
 [cooler_table]
-cooler_count = 5
-cooler0 = &quot;1536000 4 4294967295 0&quot;
+cooler_count = 6
+cooler0 = &quot;1296000 4 4294967295 0&quot;
 cooler1 = &quot;1200000 4 4294967295 0&quot;
 cooler2 = &quot;1008000 4 4294967295 0&quot;
-cooler3 = &quot;816000 3 4294967295 0&quot;
-cooler4 = &quot;504000 1 4294967295 0&quot;
+cooler3 =  &quot;816000 4 4294967295 0&quot;
+cooler4 =  &quot;648000 4 4294967295 0&quot;
+cooler5 =  &quot;480000 1 4294967295 0&quot;
 
 [nand0_para]
 nand_support_2ch = 0
@@ -316,17 +334,15 @@ hdmi_mode_check = 1
 disp_init_enable = 1
 disp_mode = 0
 screen0_output_type = 3
-screen0_output_mode = 10
+screen0_output_mode = 4
 screen1_output_type = 3
-screen1_output_mode = 10
+screen1_output_mode = 4
 fb0_format = 0
 fb0_width = 0
 fb0_height = 0
 fb1_format = 0
 fb1_width = 0
 fb1_height = 0
-fb0_framebuffer_num = 3
-sunxi_fb_mem_reserve = 32
 
 [hdmi_para]
 hdmi_used = 1
@@ -340,6 +356,7 @@ tv_dac_src0 = 0
 [pwm0_para]
 pwm_used = 0
 pwm_positive = port:PA05&lt;3&gt;&lt;0&gt;&lt;default&gt;&lt;default&gt;
+;       If set gamc_phy to use = 2
 
 [gmac0]
 gmac_used = 2
@@ -500,8 +517,8 @@ smc_sda = port:PA08&lt;2&gt;&lt;default&gt;&lt;default&gt;
 
 [usbc0]
 usb_used = 1
-usb_port_type = 1
-usb_detect_type = 0
+usb_port_type = 2
+usb_detect_type = 1
 usb_id_gpio = port:PG12&lt;0&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 usb_det_vbus_gpio = port:PG12&lt;0&gt;&lt;1&gt;&lt;default&gt;&lt;default&gt;
 usb_drv_vbus_gpio = port:PL02&lt;1&gt;&lt;0&gt;&lt;default&gt;&lt;0&gt;
@@ -693,31 +710,54 @@ ir_addr_code12 = 65344
 ir_used = 1
 ir_tx = port:PH07&lt;2&gt;&lt;default&gt;&lt;default&gt;&lt;default&gt;
 
+;----------------------------------------------------------------------------------
+; dvfs voltage-frequency table configuration
+;
+; pmuic_type:0:none, 1:gpio, 2:i2c
+; pmu_gpio0: gpio config.
+; pmu_levelx: 0~9999: voltage(mV), 10000~90000:gpio0 state. voltage form high to low.
+;
+; extremity_freq(Hz): cpu extremity frequency when run benckmark or demo apk
+;                     1536MHz@1500mV with radiator, 1296MHz@1340mV without radiator
+; max_freq: cpu maximum frequency, based on Hz, can not be more than 1200MHz
+; min_freq: cpu minimum frequency, based on Hz, can not be less than 60MHz
+;
+; LV_count: count of LV_freq/LV_volt, must be &lt; 16
+;
+; LV1: core vdd is 1.50v if cpu frequency is (1296Mhz,  1536Mhz]
+; LV2: core vdd is 1.34v if cpu frequency is (1200Mhz,  1296Mhz]
+; LV3: core vdd is 1.32v if cpu frequency is (1008Mhz,  1200Mhz]
+; LV4: core vdd is 1.20v if cpu frequency is (816Mhz,   1008Mhz]
+; LV5: core vdd is 1.10v if cpu frequency is (648Mhz,    816Mhz]
+; LV6: core vdd is 1.04v if cpu frequency is (0Mhz,      648Mhz]
+; LV7: core vdd is 1.04v if cpu frequency is (0Mhz,      648Mhz]
+; LV8: core vdd is 1.04v if cpu frequency is (0Mhz,      648Mhz]
+;
+;----------------------------------------------------------------------------------
 [dvfs_table]
 pmuic_type = 2
 pmu_gpio0 = port:PL06&lt;1&gt;&lt;1&gt;&lt;2&gt;&lt;1&gt;
 pmu_level0 = 11300
-pmu_level1 = 576
-extremity_freq = 1536000000
-max_freq = 1536000000
-min_freq = 480000000
+pmu_level1 = 1100
+max_freq = 1296000000
+min_freq = 648000000
 LV_count = 8
-LV1_freq = 1536000000
-LV1_volt = 1500
+LV1_freq = 1296000000
+LV1_volt = 1340
 LV2_freq = 1200000000
-LV2_volt = 1300
-LV3_freq = 0
-LV3_volt = 1100
-LV4_freq = 0
+LV2_volt = 1320
+LV3_freq = 1008000000
+LV3_volt = 1200
+LV4_freq = 816000000
 LV4_volt = 1100
-LV5_freq = 0
-LV5_volt = 1100
+LV5_freq = 648000000
+LV5_volt = 1040
 LV6_freq = 0
-LV6_volt = 1100
+LV6_volt = 1040
 LV7_freq = 0
-LV7_volt = 1100
+LV7_volt = 1040
 LV8_freq = 0
-LV8_volt = 1100
+LV8_volt = 1040
 
 [gpu_dvfs_table]
 G_LV_count = 3
@@ -797,13 +837,3 @@ din_gpio = port:PD00&lt;1&gt;&lt;default&gt;&lt;default
 clk_gpio = port:PD01&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;1&gt;
 stb_gpio = port:PD02&lt;1&gt;&lt;default&gt;&lt;default&gt;&lt;1&gt;
 
-[mali_para]
-mali_used = 1
-mali_clkdiv = 1
-mali_extreme_freq = 600
-mali_extreme_vol = 1400
-
-[w1_para]
-w1_used = 1
-gpio = 20
-</pre>
<p>ファンがなくても、まぁいいようにクロックダウンしたほうが良さそうですね。ということで、fex2bin で作ったscript.bin でリブートしておきました。しばらくこれで様子をみることに。</p>
<p>&#160;</p>
<p>▼まとめ</p>
<p>・script.bin は、bin2fex や fex2bin で取り扱う</p>
<p>・これがブート領域からkernel に引き渡すパラメータを持っている模様</p>
<p>・VDD を1.34vで扱うLV2 が安全の模様</p>
<p>・*.txt から読み込むようにする u-boot イメージはどうやって作るのか？</p>
<p>・あるいは、今でも kernel に渡す方法があるのかも。</p>
<p>・sunxi からのfex ファイルには gpio ピンのマッピングも追加変更されているようだ</p>
<p>・ヒートシンク＋ファンをつければ、40度くらいまでアイドル時になるようで、負荷時は60度くらいかな？</p>
<p>・ファンの効果は絶大だけれども、もう少し設定を下げて運用しようかと思う。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1980" class="post-1980 post type-post status-publish format-standard hentry category-aliexpress category-linux category-orangepi category-orangepipc category-parts">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/1980.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2016-01-02T19:53:06+09:00">2016年1月2日</time></a> </span><span class="posted-on">更新日:2016年1月2日</span> <span class="categories">  <a href="/category/aliexpress" rel="category tag noopener noreferrer" data-wpel-link="internal">Aliexpress</a>, <a href="/category/linux" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/orangepi" rel="category tag noopener noreferrer" data-wpel-link="internal">OrangePi</a>, <a href="/category/orangepipc" rel="category tag noopener noreferrer" data-wpel-link="internal">OrangePiPC</a>, <a href="/category/parts" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/1980.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">OPIにFAN をつけると温度はどのくらい下がるか？</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>aliexpress からFAN と熱シールが届きましたので、OPI に取り付けました。</p>
<p>&#160;</p>
<p><a href="/wp-content/uploads/2016/01/1.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="1" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="1" src="/wp-content/uploads/2016/01/1_thumb.jpg" width="640" height="480"></a> </p>
<p>FAN は2個入り、3M の熱伝道シールは3枚で14ｍｍにカットしてあります。1枚に５ｘ７で35枚でした。</p>
<p><img loading="lazy" title="2" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="2" src="/wp-content/uploads/2016/01/2.jpg" width="640" height="480"> </p>
<p>CPU とメモリ部分にシールを取り付け、簡易的にファンもシールで貼り付け。</p>
<p><img loading="lazy" title="3" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="3" src="/wp-content/uploads/2016/01/3.jpg" width="640" height="480"> </p>
<p>安い割りには、薄いのでこれで十分ですね。実測で、6.87mm です。</p>
<p>ファンを回す前と、回さない前でCPU 温度をmunin で取得しようと以下を設定。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">[root@opi 19:43:22 plugins]# pwd
/etc/munin/plugins
[root@opi 19:43:23 plugins]# cat h3_temp 
#!/bin/sh

#%# family=auto
#%# capabilities=autoconf

GETNUM=`/bin/cat /sys/class/thermal/thermal_zone0/temp`

if [ &quot;$1&quot; = &quot;autoconf&quot; ]; then
        if [ -n ${GETNUM} ] ; then
                echo yes
                exit 0
        else
                echo no
                exit 0
        fi
fi

if [ &quot;$1&quot; = &quot;config&quot; ]; then
        echo 'graph_title CPU Temp'
        echo 'graph_args -r --lower-limit 0'
        echo 'graph_vlabel Temp'
        echo 'graph_category Apps'
        echo 'total.label CPU0 Temp'
        echo 'total.min 0'
        echo 'total.draw AREA'
        echo 'total.type GAUGE'
        exit 0
fi

echo &quot;total.value $GETNUM&quot;;</pre>
<p>確認は以下を実行。</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">[root@opi 19:46:32 plugins]# ./h3_temp autoconf
yes
[root@opi 19:46:37 plugins]# ./h3_temp config
graph_title CPU Temp
graph_args -r --lower-limit 0
graph_vlabel Temp
graph_category Apps
total.label CPU0 Temp
total.min 0
total.draw AREA
total.type GAUGE
[root@opi 19:46:44 plugins]# ./h3_temp 
total.value 57
[root@opi 19:46:52 plugins]# </pre>
<p>で、munin-node を再起動</p>
<blockquote>
<p># systemctl restart munin-node</p>
</blockquote>
<p>すると、以下な感じでグラフができます。</p>
<p><img loading="lazy" title="h3_temp-day" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="h3_temp-day" src="/wp-content/uploads/2016/01/h3_tempday.png" width="497" height="280"> </p>
<p>ファンをつける前のデータをとりあえず記録するため、まだ回していません。結構熱そうですね。70 度くらいになっています。</p>
<p>しばらく、このまま記録をとってからファンを回したいと思います。最初、テストで回していたときは、上のグラフの最初の部分で40 度くらいでした。効果はかなり期待できそうです。</p>
<p>&#160;</p>
<p>参考</p>
<blockquote>
<p>muninプラグインを作成<br>
    <br><a title="https://www.seeds-std.co.jp/seedsblog/671.html" href="https://www.seeds-std.co.jp/seedsblog/671.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">https://www.seeds-std.co.jp/seedsblog/671.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1654" class="post-1654 post type-post status-publish format-standard hentry category-linux category-parts category-pt3">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/1654.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-11-08T22:58:19+09:00">2015年11月8日</time></a> </span><span class="posted-on">更新日:2015年11月8日</span> <span class="categories">  <a href="/category/linux" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/parts" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a>, <a href="/category/pt3" rel="category tag noopener noreferrer" data-wpel-link="internal">PT3</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/1654.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">PT3 到着</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>PT3 が ドスパラより到着。</p>
<p>10,480円也。PCBの厚みは、1.6mm で金色に光る胴箔部分が綺麗です。</p>
<p><a href="/wp-content/uploads/2015/11/61.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="6" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="6" src="/wp-content/uploads/2015/11/6_thumb.jpg" width="640" height="480"></a></p>
<p>Rev.A で2012.04.24 のようです。3年前ですか。なかなか息の長い商品ですね。</p>
<p><a href="/wp-content/uploads/2015/11/51.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="5" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="5" src="/wp-content/uploads/2015/11/5_thumb.jpg" width="640" height="480"></a> S と T のアンテナ端子。</p>
<blockquote>
<p>S&#160;&#160;&#160; 衛星      <br>T&#160;&#160;&#160; 地上</p>
</blockquote>
<p>&#160;</p>
<p><a href="/wp-content/uploads/2015/11/41.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="4" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="4" src="/wp-content/uploads/2015/11/4_thumb.jpg" width="640" height="480"></a> TOSHIBAのチップ TC90522XBG と、向かい側に見えるのは何でしょうか？</p>
<p><a href="/wp-content/uploads/2015/11/31.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="3" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="3" src="/wp-content/uploads/2015/11/3_thumb.jpg" width="640" height="480"></a>チューナー部分は銀色のボックスの中にあります。これはモジュール化されているパーツのようですね。シャープのVA4M6JC2103</p>
<p>東芝のICは、このモジュールとつながっているようですので、何か電波の調整をやっているのでしょう。</p>
<p>レギュレータICも大きなのが２つあるようです。200WN3M（PQ200WN3MZPH） ともうひとつは、012ENB1 （PQ012ENB1ZPH）シャープのようです。他にもレギュレータはあって全部シャープのを使っているようです。</p>
<p><a href="/wp-content/uploads/2015/11/21.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="2" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="2" src="/wp-content/uploads/2015/11/2_thumb.jpg" width="640" height="480"></a> ALTERA Cyclone IV と書いてありますかね？EP4CGX15BF14C8N</p>
<p>これは横のSDRAMとがっつり、つながっているようです。PCI-EX からのラインがこのICに入っているようです。</p>
<p>インダクタも２つありますね。何かスイッチングして電源を生成しているのかな？</p>
<p><a href="/wp-content/uploads/2015/11/12.jpg" target="_blank" rel="noopener noreferrer" data-wpel-link="internal"><img loading="lazy" title="1" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="1" src="/wp-content/uploads/2015/11/1_thumb.jpg" width="640" height="480"></a> これはちょっと作れそうにもありません。仮に作れたとしても中のソフトウェアがわかりません。解析にはかなりの技術と知識が必要でしょう。デジタルの電波の知識が必須となりそうです。</p>



<p>&#160;</p>
<p>PCの中に組み込んだらこうして、基板をみるのもこれが最後になりそう。</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1575" class="post-1575 post type-post status-publish format-standard hentry category-linux category-parts category-pt3">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/1575.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-11-05T00:22:09+09:00">2015年11月5日</time></a> </span><span class="posted-on">更新日:2015年11月5日</span> <span class="categories">  <a href="/category/linux" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/parts" rel="category tag noopener noreferrer" data-wpel-link="internal">Parts</a>, <a href="/category/pt3" rel="category tag noopener noreferrer" data-wpel-link="internal">PT3</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/1575.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">テレビを見たければ運動せよ！ PT3 をGET</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>PT3 の存在は前から知っていたのですが、友人のところに遊びにいったらnasune でリモートで録画してあるTED を見せてもらい触発されて思わずポチりました。nasune というのは、nass にTVチューナーが付いて録画できるというもの。</p>
<p>&#160;</p>
<blockquote>
<p>Sony</p>
<p><a href="http://pur.store.sony.jp/nasne/products/nasne/CECH-ZNR2J01_product/?s_tc=aff_012_0_10_51141&amp;utm_medium=aff&amp;utm_source=001" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">nasne(ナスネ) CECH-ZNR2J<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>&#160;</p>
<p>お値段は、2万弱くらいで購入できるんですが、出来合いの製品だけに面白さにかけるところがあり、またチューナが1チャンネルなので同時録画はできません。</p>
<p>&#160;</p>
<p>そこで、アースソフトさんがハードとWINDOWS 用のドライバだけ作っている面白い機器が以下。これをポチりました。</p>
<p>&#160;</p>
<blockquote>
<p>アースソフト</p>
<p><a href="http://earthsoft.jp/PT3/specification.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">PT3 仕様<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>&#160;</p>
<p>ISDB-S 2TS と ISDB-T 2TS の合計 4TS を同時に受信可能です。要するに、衛星デジタル放送用のISDB-S、地上デジタル放送用のISDB-Tがそれぞれ2チャンネルづつ、受信できるという代物。</p>
<p><img loading="lazy" title="PT3_img" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="PT3_img" src="/wp-content/uploads/2015/11/pt3_img.png" width="582" height="795"> </p>
<p>PC とそれらを受信するソフトウェアやB-CAS カードと読み取るカードリーダなどが必要です。当初はこれらを完全自作しようと思っていましたが、ハードルが高すぎて断念。いつかチャレンジしてみたいお題ではあります。</p>
<p>&#160;</p>
<p>PT3 を活用するには、いろんな手法がありますが、今のところ方針としてOSはLinuxにし、Chinachu というEPG閲覧と、予約＋Webストリーミング用のUIを備えたソフトウェアの組み合わせで使ってみようと思います。幸い、入れるマシンは余っているものがあるので、追加投資はHDDくらいです。が、これも使ってみないと自分のライフスタイルでどのくらいの容量が必要かはわかりません。今付いているHDDで事足りるかもしれません。</p>
<p>&#160;</p>
<p>もともと、テレビはほとんど見ませんが、今回はTEDなど面白い番組もやるのでそういうのを予約して視聴するのが目的です。あと、PCに向かいすぎて腰が悪くなので、息抜きを強制的に行うためリビングのTVでごろ寝しながら見て体を休めるという目的もあります。また休めるの反対に鍛えるという目的も盛り込んでも面白いかもしれません。</p>
<p>&#160;</p>
<p>インストールやセットアップなどの情報はごろごろと出るので、困ることはなさそうです。ただ、自分が使うシーンというのが想像できません。とりあえず、箇条書きにしてみます。出来るといいなと思っている要点は以下です。</p>
<p>&#160;</p>
<p>・番組予約はPCからさくさくと簡単にやりたい</p>
<p>・外出先のちょっとした空き時間にみたい</p>
<p>・録画した映像は見たら消す感じ or 古いものは自動的に消えるように</p>
<p>・CMをカットするか飛ばせるといいな。またその逆にCMだけコレクションできるようにしたい。</p>
<p>・i-Phone や タブレットで気軽に見たい</p>
<p>・普段使いはOSXのモニタで見て、ゆっくり見たいときはリビングのTVからも見たい</p>
<p>・寝る前に、タブレットでみたい</p>
<p>・録画したデータは飛んでもいいので、RAID1 や5 などはしない。安さ優先</p>
<p>・PCの電源は録画直前に入り、終了したら消える（スリープとか）ようにしたい</p>
<p>・今作成中のWiFi E-ink に録画した番組を表示できるようにしたい。</p>
<p>・電気代を節約するために、自転車の室内ローラで発電し、電力供給をしたい</p>
<p align="center"><a href="http://chainreactionhub.com/cycindoor-jpn" target="_blank" rel="noopener noreferrer external" data-wpel-link="external"><img loading="lazy" title="trainerlaptop" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="trainerlaptop" src="/wp-content/uploads/2015/11/trainerlaptop.jpg" width="640" height="357"></a> ※イメージですが、まぁこんな感じ</p>
<p align="center"><a href="http://303cycling.com/6-Inspiring-Adventure-Films-that-Will-Keep-You-Going-on-the-Trainer" target="_blank" rel="noopener noreferrer external" data-wpel-link="external"><img loading="lazy" title="indoor-cycling_0" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="indoor-cycling_0" src="/wp-content/uploads/2015/11/indoorcycling_0.jpg" width="642" height="428"></a> </p>
<p align="center">Indoor Bike Trainer make とかで検索</p>
<p align="center">&#160;</p>
<p>・ローラーの前には体重計があって、載れば自動的に記録される仕組みも作りたい。あと１０Kg減量したいのです。</p>
<p>&#160;</p>
<p>こんな工夫が出来れば、テレビが見たければ、運動しなさいというスタイルにできるかもと思っています。座りっぱなしの生活から、少しは運動もでき、そして結果的にTVの情報ソースを今より見れればと思います。</p>
<p>&#160;</p>
<p>このプロジェクトは少しづつ進行していきます。</p>
<p>テレビを見たければ運動せよの、ネーミングを考えないとですね。Running Tv ですかね？</p>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-900" class="post-900 post type-post status-publish format-standard hentry category-filesystem category-linux category-osx category-raspberry-pi">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="/900.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-07-25T22:16:28+09:00">2015年7月25日</time></a> </span><span class="posted-on">更新日:2015年7月25日</span> <span class="categories">  <a href="/category/filesystem" rel="category tag noopener noreferrer" data-wpel-link="internal">FileSystem</a>, <a href="/category/linux" rel="category tag noopener noreferrer" data-wpel-link="internal">Linux</a>, <a href="/category/osx" rel="category tag noopener noreferrer" data-wpel-link="internal">osx</a>, <a href="/category/raspberry-pi" rel="category tag noopener noreferrer" data-wpel-link="internal">Raspberry Pi</a></span>			</div>
<!-- .entry-meta -->

							<h1 class="entry-title"><a href="/900.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">NFS Boot の IOPS</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>fio の手順が載っていたので、以下でNFS Boot の IO性能を計測。</p>
<p>母艦のosx の DISK は SSD です。Samsung MZ-7TD500BW 840 SSD </p>
<blockquote>
<p>cd /usr/local/src/     <br>sudo apt-get install -y libaio-dev      <br>git clone -b fio-2.2.5 git://git.kernel.dk/fio.git      <br>cd fio      <br>./configure &amp;&amp; make &amp;&amp; sudo make install      <br>cd ..      <br>wget <a href="http://www.winkey.jp/downloads/visit.php/fio-crystaldiskmark" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.winkey.jp/downloads/visit.php/fio-crystaldiskmark<span class="wpel-icon wpel-image wpel-icon-1"></span></a>      <br>fio fio-crystaldiskmark | perl -ne &#8216;      <br>print &quot;$1 : &quot; if(/(.+): \(groupid=/);      <br>print &quot;$1 &quot; if(/bw=([\d. ]+[KM]?B\/s)/);      <br>print &quot;[ $1 IOPS]\n&quot; if(/iops=(\d+)/)&#8217;</p>
</blockquote>
<p>4K の読み書きが SDCard よりだんぜん速いです。</p>
<blockquote>
<p>Seq-Read : 9555.8KB/s [ 9 IOPS]     <br>Seq-Write : 10250KB/s [ 10 IOPS]      <br>Rand-Read-512K : 9145.4KB/s [ 17 IOPS]      <br>Rand-Write-512K : 10085KB/s [ 19 IOPS]      <br>Rand-Read-4K : 3624.8KB/s [ 906 IOPS]      <br>Rand-Write-4K : 3300.5KB/s [ 825 IOPS]      <br>Rand-Read-4K-QD32 : 8885.1KB/s [ 2221 IOPS]      <br>Rand-Write-4K-QD32 : 10492KB/s [ 2622 IOPS]</p>
</blockquote>
<p>なるほどー。いいかも。</p>
<p>&#160;</p>
<p>参考</p>
<blockquote>
<p>discypus.jp/wiki/ </p>
<p><a href="http://discypus.jp/wiki/?%C1%C8%A4%DF%B9%FE%A4%DF%2FRaspberryPi#content_1_45" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">fio &#8211; Flexible I/O Tester (2015-02-22)<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
					</div>
<!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div>
<!-- .entry-wrapper -->
</article><!-- #post-## -->

			
			
	<nav class="navigation posts-navigation" role="navigation" aria-label="投稿">
		<h2 class="screen-reader-text">投稿ナビゲーション</h2>
		<div class="nav-links">
<div class="nav-previous"><a href="/category/linux/page/10" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div>
<div class="nav-next"><a href="/category/linux/page/8" data-wpel-link="internal" rel="noopener noreferrer">新しい投稿</a></div>
</div>
	</nav>
		
		</main><!-- #main -->
	</section><!-- #primary -->


	</div>
<!-- #content -->

	<footer id="colophon" class="site-footer wrap" role="contentinfo">
		<div class="site-info">
			Copyleft - all rights reversed.
			<span class="sep"> | </span>
			JunkHack 2011 - 2021
			<span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/about-junkhack/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">運営者情報<span class="gf"><span class="wpel-icon wpel-image wpel-icon-1"></span></span></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/sendmail/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">お問い合わせ<span class="gf"><span class="wpel-icon wpel-image wpel-icon-1"></span></span></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/privacy/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">プライバシーポリシー<span class="gf"><span class="wpel-icon wpel-image wpel-icon-1"></span></span></a>
		</div>
<!-- .site-info -->

	</footer><!-- #colophon -->
</div>
<!-- #page -->

        <div id="wpfront-scroll-top-container">
            <img src="/wp-content/plugins/wpfront-scroll-top/images/icons/1.png" alt="">        </div>
                <script type="text/javascript">
            function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();
        </script>
        <script type="text/javascript" src="/wp-content/plugins/wpfront-scroll-top/js/wpfront-scroll-top.min.js?ver=2.0.4.04013" id="wpfront-scroll-top-js"></script>
<script type="text/javascript" src="/wp-content/themes/hew-wpcom/js/hew.js?ver=20140909" id="hew-scripts-js"></script>
<script type="text/javascript" src="/wp-content/themes/hew-wpcom/js/navigation.js?ver=20120206" id="hew-navigation-js"></script>
<script type="text/javascript" src="/wp-content/themes/hew-wpcom/js/skip-link-focus-fix.js?ver=20130115" id="hew-skip-link-focus-fix-js"></script>
<script type="text/javascript" src="/wp-includes/js/wp-embed.min.js?ver=5.7.2" id="wp-embed-js"></script>

</body>
</html>