<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://hack.gpl.jp/xmlrpc.php">

<title>sdk &#8211; JunkHack</title>
<style type="text/css">.wpfts-result-item .wpfts-smart-excerpt {}.wpfts-result-item .wpfts-not-found {color:#808080;font-size:0.9em;}.wpfts-result-item .wpfts-score {color:#006621;font-size:0.9em;}.wpfts-shift {margin-left:40px;}.wpfts-result-item .wpfts-download-link {color:#006621;font-size:0.9em;}.wpfts-result-item .wpfts-file-size {color:#006621;font-size:0.9em;}</style><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//hack.gpl.jp' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; ãƒ•ã‚£ãƒ¼ãƒ‰" href="https://hack.gpl.jp/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; ã‚³ãƒ¡ãƒ³ãƒˆãƒ•ã‚£ãƒ¼ãƒ‰" href="https://hack.gpl.jp/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; sdk ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ãƒ•ã‚£ãƒ¼ãƒ‰" href="https://hack.gpl.jp/category/sdk/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/hack.gpl.jp\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' href='./../css/dist-block-library-style.min.css'>
<link rel='stylesheet' href='./../css/export-wp-page-to-static-html-pro-premium-public-css-export-wp-page-to-static-html-public.css'>
<link rel='stylesheet' href='./../css/fulltext-search-style-wpfts_autocomplete.css'>
<link rel='stylesheet' href='./../css/wp-external-links-public-css-wpel.css'>
<link rel='stylesheet' href='./../css/wpfront-scroll-top-css-wpfront-scroll-top.min.css'>
<link rel='stylesheet' href='./../css/ccrw_related-css-frontend-style.css'>
<link rel='stylesheet' id='hew-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' href='./../css/hew-wpcom-genericons-genericons.css'>
<link rel='stylesheet' href='./../css/hew-wpcom-style.css'>
		<script>
			/* <![CDATA[ */
			var rcewpp = {
				"ajax_url":"https://hack.gpl.jp/wp-admin/admin-ajax.php",
				"nonce": "4eef5ded05",
				"home_url": "https://hack.gpl.jp/",
				"settings_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings.png',
				"settings_hover_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings_hover.png'
			};
			/* ]]\> */
		</script>
		<script type='text/javascript' src='./../js/jquery-3.5.1.min.js' id='jquery-core-js'></script>
<script type='text/javascript' src='./../js/jquery-migrate-3.3.0.min.js' id='jquery-migrate-js'></script>
<script type='text/javascript' src='./../js/export-wp-page-to-static-html-public.js' id='export-wp-page-to-static-html-js'></script>
<script type='text/javascript' src='./../js/wpfts_frontend.js' id='wpfts_frontend-js'></script>
<link rel="https://api.w.org/" href="https://hack.gpl.jp/wp-json/" /><link rel="alternate" type="application/json" href="https://hack.gpl.jp/wp-json/wp/v2/categories/71" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hack.gpl.jp/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hack.gpl.jp/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.7.2" />
<script type="text/javascript">
		document.wpfts_ajaxurl = "https://hack.gpl.jp/wp-admin/admin-ajax.php";
	</script>				<style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none}}</style>
			<script data-ad-client="ca-pub-2711753458083215" async src="./../js/adsbygoogle.js"></script>
</head>

<script async src="./../js/7480.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-13YWDXYQE2');
</script>
<body class="archive category category-sdk category-71 has-sidebar">
<div id="page" class="hfeed site">
		<div id="widgets-wrapper" class="hide">
		
<div id="secondary" class="wrap top-widget-area" role="complementary">
	
	
	
		<div id="sidebar-4" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://hack.gpl.jp/">
				<label>
					<span class="screen-reader-text">æ¤œç´¢:</span>
					<input type="search" class="search-field" placeholder="æ¤œç´¢&hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="æ¤œç´¢" />
			</form></aside>	</div><!-- #four .widget-area -->
	</div><!-- #secondary -->
	</div>
	
	<a class="skip-link screen-reader-text" href="">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ç§»å‹•</a>

	<header id="masthead" class="site-header" role="banner">
		
		<div class="site-branding">
			<h1 class="site-title"><a href="./../index.html" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
			<h2 class="site-description">ã‚¢ãƒªã‚¨ã‚¯ã§ãƒãƒã£ãŸ JUNKHACK</h2>
		</div>

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<button class="menu-toggle toggle-button"><span class="screen-reader-text">ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼</span></button>
				<div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu"><li id="menu-item-9578" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9578"><a href="./../index.html" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-9594" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9594"><a href="./../status.html" data-wpel-link="internal" rel="noopener noreferrer">Status</a></li>
</ul></div>			</nav><!-- #site-navigation -->
		
		
				<div class="toggle-wrapper">
			<a href="" class="widgets-toggle toggle-button" title="ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ">
				<span class="screen-reader-text">ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ</span>
			</a>
		</div>
		
	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">ã‚«ãƒ†ã‚´ãƒªãƒ¼: <span>sdk</span></h1>			</header><!-- .page-header -->

						
				
<article id="post-1252" class="post-1252 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">æŠ•ç¨¿æ—¥: <a href="https://hack.gpl.jp/1252/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-23T20:13:18+09:00">2015å¹´9æœˆ23æ—¥</time></a> </span><span class="posted-on">æ›´æ–°æ—¥:2015å¹´9æœˆ23æ—¥</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="https://hack.gpl.jp/category/espeink/" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /1252.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink ã®ã‚½ãƒ¼ã‚¹ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ã•ã¦ã€ãƒãƒ¼ãƒ‰ã®èª¿æŸ»ãŒçµ‚ã‚ã£ãŸã®ã§ã€ä»Šåº¦ã¯ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¿æŸ»ã§ã™ã€‚</p>
<p>ã¾ãšã€ã–ã£ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p>
<p>osx 10.9.5 ã§ã‚„ã£ã¦ã„ã¾ã™ã€‚</p>
<blockquote>
<p>â–¼ã‚½ãƒ¼ã‚¹ã‚’ã‚²ãƒƒãƒˆ     <br />$ git clone <a href="http://git.spritesserver.nl/espeink.git/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://git.spritesserver.nl/espeink.git/<span class="wpel-icon wpel-image wpel-icon-1"></span></a>      <br />$ cd espeink/      <br />$ git submodule init      <br />$ git submodule update</p>
</blockquote>
<p>ä»¥ä¸‹ã®ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>
<p>â–¼ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢æ¦‚ç•¥   <br />ãƒ»ESP12 ã®ä¸­ã§å‹•ä½œã™ã‚‹webã‚µãƒ¼ãƒãŒmkespfsimageã‚’ä½¿ã„e-ink ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°    <br />ãƒ»ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ã¯ã€PhantomJSï¼ˆpixelserver.jsï¼‰ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†    <br />ãƒ»ç”»åƒå½¢å¼ã¯ã€.bm ã¨ã„ã†ç™½é»’ï¼’å€¤ï¼ˆã‚°ãƒ¬ãƒ¼è¡¨ç¤ºã¯ã‚ã‚‹ã®ã‹ãªï¼Ÿï¼‰800&#215;600ã‚’ä½¿ç”¨    <br />ãƒ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§60ç§’ã”ã¨ã«sleep ã‹ã‚‰ç›®è¦šã‚ã‚‹ã‚ˆã† -&gt; sleeptime , system_deep_sleep(60*1000*1000);    <br />ãƒ»åˆå›èµ·å‹•æ™‚ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã®è¡¨ç¤ºã®åˆæœŸè¨­å®šãŒå‹•ä½œã€‚ãƒ¡ãƒ¢ãƒªã®ç‰¹å®šé ˜åŸŸã«å€¤ãŒã‚ã‚‹ã‹ãªã„ã‹ã‚’è¦‹ã¦ã„ã‚‹æ¨¡æ§˜ -&gt; RTC_MAGIC    <br />ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ã€Beer-Ware license ğŸ™‚    <br /><a href="https://en.wikipedia.org/wiki/Beerware" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://en.wikipedia.org/wiki/Beerware<span class="wpel-icon wpel-image wpel-icon-1"></span></a>    <br />&" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/atomicobject/heatshrink<span class="wpel-icon wpel-image wpel-icon-1"></span></a>    <br />&#160; Lempelâ€“Zivâ€“Storerâ€“Szymanski (LZSS)ãƒ™ãƒ¼ã‚¹ã®ã‚ˆã†ã§ã™ã€‚    <br />ãƒ»ã‚½ãƒ¼ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã«ã¯ã€SDK (toolchain) ãŒå¿…è¦    <br />ãƒ»esp-open-sdkã®ç’°å¢ƒã‚’ä½œã‚Œã°è‰¯ã„ã‹ã¨æ€ã†    <br />ãƒ»ç’°å¢ƒæ§‹ç¯‰ã¯ã€osx ã§ã¾ãšãƒãƒ£ãƒ¬ãƒ³ã‚¸</p>
<p>&#160;</p>
<p>PhantomJSã£ã¦ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<p>ã¨ã‚Šã‚ãˆãšã€ã¾ãã€ä½¿ã£ã¦ã¿ã‚Œã°ç†è§£ã‚‚æ·±ã¾ã‚‹ã¯ãšã§ã™ã€‚</p>
<p>osx ã®ãƒ­ãƒ¼ã‚«ãƒ«ã«å…¥ã‚Œã¦ã¿ã¾ã™ã€‚</p>
<blockquote>
<p>$ brew install phantomjs</p>
</blockquote>
<p>ã‚µãƒ³ãƒ—ãƒ«ã¯ã‚°ã‚°ã£ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- test.js
// Headless ãƒ–ãƒ©ã‚¦ã‚¶ã®ç”Ÿæˆ
var page = require('webpage').create();

// URL ã‚’é–‹ã
page.open('https://hack.gpl.jp/about/', function(status) {
    if (status === 'success') {
        // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚­ãƒ£ãƒ—ãƒãƒ£
        page.render('junkhack.png');
        // ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ JS ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹
        var title = page.evaluate(function() {
            var title = document.title;
            return title;
        });
        console.log(title);
    }
    // exit ã—ãªã„ã¨çµ‚äº†ã—ãªã„
    phantom.exit();
});</pre>
<p>&#160;</p>
<p>ãƒ»å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p>
<blockquote>
<p>$ phantomjs test.js</p>
</blockquote>
<p>ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€junkhack.png ãŒã§ãã¦ã„ã‚‹ã€‚ã»ãƒ¼ãªã‚‹ã»ã©ã€‚<br />
  <br />ã¨ã„ã†ã“ã¨ã¯ã€PhantomJSãŒå‹•ä½œã™ã‚‹ã‚µãƒ¼ãƒãŒå¿…è¦ã ã£ã¦ã“ã¨ã§ã—ã‚‡ã†ã‹ã­ï¼ŸESP12 ã§PhantomJSãŒå‹•ä½œã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã‹ã­ï¼Ÿã¡ã‚‡ã£ã¨ã“ã®ã‚ãŸã‚Šã¯è‰¯ãã‚ã‹ã£ã¦ã„ã¾ã›ã‚“ã€‚</p>
<p>ãã®å†…ã€é€²ã‚€ã«ã¤ã‚Œè§£ã‚‹ã¯ãšã ã¨æ€ã†ã®ã§ã€ã‚¹ãƒ«ãƒ¼ã—ã¾ã™ã€‚</p>
<p>&#160;</p>
<p><img loading="lazy" title="junkhack 2" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="junkhack 2" src="./../images/junkhack2.png" width="400" height="1096" /> </p>
<p>ã¨ã‚Šã‚ãˆãšã€osx ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ç’°å¢ƒã‚’æ•´ãˆã¦ã¿ã‚‹ã“ã¨ã«ã—ã¦ã¿ã¾ã™ã€‚</p>
<p>&#160;</p>
<p>â–¼ãƒ“ãƒ«ãƒ‰ã™ã‚‹ç’°å¢ƒã®æ§‹ç¯‰ for osx 10.9.5 </p>
<p>ãƒ»ä»¥ä¸‹ã«ã‚ã‚‹èª¬æ˜é€šã‚Š </p>
<p><a href="https://github.com/pfalcon/esp-open-sdk" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/pfalcon/esp-open-sdk<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<blockquote>
<p>$ brew tap homebrew/dupes<br />
    <br />$ brew install binutils coreutils automake wget gawk libtool gperf gnu-sed &#8211;with-default-names grep</p>
</blockquote>
<p>â˜…ã¡ã‚‡ã£ã¨æ™‚é–“ã¯ã‹ã‹ã‚Šã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãªã„ã‹ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã€‚</p>
<p>&#160;</p>
<p>ãƒ»sed ã¯ gnu ã®ã‚’ä½¿ã†ã‚ˆã†ã«ã™ã‚‹ã‚ˆã†ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‰ãªã‘ã‚Œã°ã€ãƒ‘ã‚¹ã‚’.bash_profileã«è¨­å®šã—ã¦ãŠãã¾ã™ã€‚ </p>
<p>&#160;&#160;&#160; $ which sed<br />
  <br />&#160;&#160;&#160; /usr/local/opt/gnu-sed/libexec/gnubin/sed </p>
<p>$ export PATH=&quot;/usr/local/opt/gnu-sed/libexec/gnubin:$PATH&quot;</p>
<p>&#160;</p>
<p>ãƒ»10G ã®å¤§æ–‡å­—å°æ–‡å­—ãƒ•ã‚¡ã‚¤ãƒ«åã‚’åŒºåˆ¥ã™ã‚‹HFS+ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ä½œè£½ã€‚ãƒã‚¦ãƒ³ãƒˆã—ã€ç§»å‹•ã€‚ </p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ sudo hdiutil create ~/Documents/case-sensitive.dmg -volname &quot;case-sensitive&quot; -size 10g -fs &quot;Case-sensitive HFS+&quot;
$ sudo hdiutil mount ~/Documents/case-sensitive.dmg
$ cd /Volumes/case-sensitive

$ git clone --recursive https://github.com/pfalcon/esp-open-sdk.git</pre>
<p>ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ¼ãƒ³ãªSDK ã‚’ä½œã‚Œã°ã€-Iã¨-Lãƒ•ãƒ©ã‚°ã‚’ä»˜ã‘ãªãã¦ã‚ˆã„ã‚ˆã†ã§ã™ãŒã€espeink ã®makefile ã¯<br />
  <br />-I ã¨ -L ã¯æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€SDK ã‚’åˆ†é›¢ã—ã¦ä½œã‚Šã¾ã™ã€‚ </p>
<blockquote>
<p>$ cd esp-open-sdk/<br />
    <br />$ make STANDALONE=n</p>
</blockquote>
<p>â˜…ã¡ã‚‡ã£ã¨æ™‚é–“ã¯ã‹ã‹ã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ’ãƒ¼ã‚¿ã‚¤ãƒ ã§ã™ã€‚<br />
  <br />ESP8266 ã®ãƒãƒƒãƒ—ã¯ã€ã‚±ã‚¤ãƒ‡ãƒ³ã‚¹ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ã‚·ã‚¹ãƒ†ãƒ ã‚ºç¤¾ãŒä½œã£ã¦ã„ã‚‹Xtensaãƒ—ãƒ­ã‚»ãƒƒã‚µãªã‚“ã§ã™ã­ã€‚</p>
<p>Espressif Systemsç¤¾ãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã€ãƒ†ãƒ³ã‚·ãƒªã‚«Xtensaãƒ—ãƒ­ã‚»ãƒƒã‚µãŒè¼‰ã£ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã®</p>
<p>ã‚ˆã†ã§ã™ã€‚</p>
<p>https://www.cadence.co.jp/news/2015-01-29-929.html</p>
<p>&#160;</p>
<p>ãƒ»ã•ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚Œã°OKã§ã™ã€‚ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚ </p>
<p>&#160;&#160;&#160; ::<br />
  <br />&#160;&#160;&#160; Xtensa toolchain is built, to use it:</p>
<p>&#160;&#160;&#160; export PATH=/Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin:$PATH</p>
<p>&#160;&#160;&#160; Espressif ESP8266 SDK is installed. Toolchain contains only Open Source components</p>
<p>&#160;&#160;&#160; To link external proprietary libraries add:</p>
<p>&#160;&#160;&#160; xtensa-lx106-elf-gcc -I/Volumes/case-sensitive/esp-open-sdk/sdk/include -L/Volumes/case-sensitive/esp-open-sdk/sdk/lib</p>
<p>&#160;</p>
<p>ãƒ»ã“ã“ã‚‚ãƒ‘ã‚¹ã‚’é€šã—ã¦ãŠãã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- .bashrcã€€è¿½è¨˜
export PATH=/Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin:$PATH</pre>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">ä»¥ä¸‹ã«ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã‚ã‚Šã¾ã™ã€‚</pre>
<blockquote>
<p>$ ls /Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin<br />
    <br />esptool.py&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-ct-ng.config&#160;&#160;&#160; xtensa-lx106-elf-gcov&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-ranlib</p>
<p>xtensa-lx106-elf-addr2line&#160;&#160;&#160; xtensa-lx106-elf-elfedit&#160;&#160;&#160; xtensa-lx106-elf-gdb&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-readelf</p>
<p>xtensa-lx106-elf-ar&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-g++&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gprof&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-size</p>
<p>xtensa-lx106-elf-as&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-ld&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-strings</p>
<p>xtensa-lx106-elf-c++&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc-4.8.2&#160;&#160;&#160; xtensa-lx106-elf-ld.bfd&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-strip</p>
<p>xtensa-lx106-elf-c++filt&#160;&#160;&#160; xtensa-lx106-elf-gcc-ar&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-nm</p>
<p>xtensa-lx106-elf-cc&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc-nm&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-objcopy</p>
<p>xtensa-lx106-elf-cpp&#160;&#160;&#160;&#160;&#160;&#160;&#160; xtensa-lx106-elf-gcc-ranlib&#160;&#160;&#160; xtensa-lx106-elf-objdump </p>
</blockquote>
<p>&#160;</p>
<p>ãƒ»ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå‘¼ã³å‡ºã›ã‚Œã°OKã§ã™ã€‚ </p>
<blockquote>
<p>$ which xtensa-lx106-elf-gcc<br />
    <br />/Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin/xtensa-lx106-elf-gcc</p>
</blockquote>
<blockquote>
<p>$ xtensa-lx106-elf-gcc &#8211;version<br />
    <br />xtensa-lx106-elf-gcc (crosstool-NG 1.20.0) 4.8.2</p>
<p>Copyright (C) 2013 Free Software Foundation, Inc.</p>
<p>This is free software; see the source for copying conditions.&#160; There is NO</p>
<p>warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. </p>
</blockquote>
<p>ãƒ»ä½•ã‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å‹•ä½œç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ git clone https://github.com/esp8266/source-code-examples.git
$ cd source-code-examples/blinky</pre>
<p>&#160;</p>
<p>ãƒ»sed ã§ make ãƒ•ã‚¡ã‚¤ãƒ«ã®æŒ‡å®šã‚’æ›¸ãæ›ãˆã¾ã™ã€‚<br />
  <br /> â€»ãƒ‘ã‚¹ãŒã‚ã‚‹ã®ã§ã€è§£ã‚Šã«ãã„ã€‚sed ã¯ s/ç½®ãæ›ãˆå‰/ç½®ãæ›ãˆå¾Œ/g ã§ã™ã€‚ </p>
<p>ä»¥ä¸‹ã ã¨ã€<br />
  <br /> Espressif/crosstool-NG/builds/xtensa-lx106-elf/bin</p>
<p> ã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆ</p>
<p> esp-open-sdk/xtensa-lx106-elf/bin </p>
<p>&#160; Espressif/ESP8266_SDK<br />
  <br />&#160; ã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆ</p>
<p>&#160; esp-open-sdk/sdk </p>
<p>&#160; Espressif<br />
  <br />&#160; ã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆ</p>
<p>&#160; esp-open-sdk </p>
<p>&#160; opt/<br />
  <br />&#160; ã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆ</p>
<p>&#160; Volumes/case-sensitive/</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ sed -i 's/Espressif\/crosstool-NG\/builds\/xtensa-lx106-elf\/bin/esp-open-sdk\/xtensa-lx106-elf\/bin/g' Makefile
$ sed -i 's/Espressif\/ESP8266_SDK/esp-open-sdk\/sdk/g' Makefile
$ sed -i 's/Espressif/esp-open-sdk/g' Makefile
$ sed -i 's/opt\//Volumes\/case-sensitive\//g' Makefile</pre>
<p>&#160;</p>
<p>make ã—ã¦ã¿ã¾ã™ã€‚</p>
<p>$ make </p>
<p>ãƒ»ä»¥ä¸‹ãŒå®Ÿè¡Œçµæœã§ã™ã€‚ã‚¨ãƒ©ãƒ¼ãªããƒ“ãƒ«ãƒ‰ã§ãã‚Œã°ã¾ãã€å‹•ãã§ã—ã‚‡ã†ã€‚</p>
<blockquote>
<p>$ tree<br />
    <br />.</p>
<p>â”œâ”€â”€ Makefile</p>
<p>â”œâ”€â”€ README</p>
<p>â”œâ”€â”€ build</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ app.outâ˜…å®Ÿè¡Œãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ app_app.a</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ driver</p>
<p>â”‚&#160;&#160; â””â”€â”€ user</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â””â”€â”€ user_main.o</p>
<p>â”œâ”€â”€ firmware</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ 0x00000.binâ˜…</p>
<p>â”‚&#160;&#160; â””â”€â”€ 0x40000.binâ˜…</p>
<p>â””â”€â”€ user</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ user_config.h</p>
<p>&#160;&#160;&#160; â””â”€â”€ user_main.c </p>
<p>5 directories, 9 files</p>
</blockquote>
<p>&#160;</p>
<p>â–¼ã¨ã‚Šã‚ãˆãšã€esp-open-sdk ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã¿ã¾ã™ã€‚Makefile ã®ã‚³ãƒ”ãƒ¼ã‚’å–ã£ã¦ãƒ‘ã‚¹ã‚’æ›¸ãæ›ãˆã€‚ </p>
<blockquote>
<p>$ cd espeinkã®ã‚½ãƒ¼ã‚¹<br />
    <br />$ cp Makefile Makefile_org </p>
</blockquote>
<p>â€»è¡Œé ­ã®$ ã¯å–ã£ã¦ã‚ã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">sed -i 's/Espressif\/crosstool-NG\/builds\/xtensa-lx106-elf\/bin/esp-open-sdk\/xtensa-lx106-elf\/bin/g' Makefile
sed -i 's/Espressif\/ESP8266_SDK/esp-open-sdk\/sdk/g' Makefile
sed -i 's/Espressif/esp-open-sdk/g' Makefile
sed -i 's/opt\/Espressif\/arch\/lib/Volumes\/case-sensitive\/esp-open-sdk\/sdk\/lib/g' Makefile
sed -i 's/opt\//Volumes\/case-sensitive\//g' Makefile</pre>
<p>ãƒ»osx ã˜ã‚ƒãªãã€Linux ã§ã‚„ã£ã¦ã„ã‚‹å ´åˆã¯ã»ã©ã‚ˆãæ›¸ãæ›ãˆã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‘ã‚¹ã‚’å¤‰æ›´ã—ã¾ã—ãŸã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ diff Makefile Makefile_org 
15c15
&lt; XTENSA_TOOLS_ROOT ?= /Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin
---
&gt; XTENSA_TOOLS_ROOT ?= /opt/Espressif/crosstool-NG/builds/xtensa-lx106-elf/bin
18,19c18,19
&lt; SDK_EXTRA_INCLUDES ?= /Volumes/case-sensitive/esp-open-sdk/include
&lt; SDK_EXTRA_LIBS ?= /Volumes/case-sensitive/esp-open-sdk/sdk/lib
---
&gt; SDK_EXTRA_INCLUDES ?= /opt/Espressif/include
&gt; SDK_EXTRA_LIBS ?= /opt/Espressif/arch/lib
22c22
&lt; SDK_BASE    ?= /Volumes/case-sensitive/esp-open-sdk/sdk
---
&gt; SDK_BASE    ?= /opt/Espressif/ESP8266_SDK</pre>
<p>&#160;</p>
<p>ãƒ»ã•ã¦ã€makeã—ã¦ã¿ã¾ã™ã€‚</p>
<p>make ã—ã¾ã—ãŸãŒã€ãªã‚“ã‹ã‚¨ãƒ©ãƒ¼ã§ã¾ã™ã­ã€‚ä½œè€…ã¯ã€SDK ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã„ãã¤ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<p>unknown type name &#8216;uint32_t&#8217;<br />
  <br />unknown type name &#8216;uint8_t&#8217;</p>
<p>unknown type name &#8216;uint16_t&#8217;</p>
<p>conflicting types for &#8216;os_random&#8217; </p>
<p>&#160;&#160;&#160; $ make<br />
  <br />&#160;&#160;&#160; CC user/cgiwifi.c</p>
<p>&#160;&#160;&#160; In file included from /Volumes/case-sensitive/esp-open-sdk/sdk/include/os_type.h:10:0,</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; from /Volumes/case-sensitive/esp-open-sdk/sdk/include/user_interface.h:9,</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; from user/cgiwifi.c:17:</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:14:1: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; typedef uint32_t ETSSignal;</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:15:1: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; typedef uint32_t ETSParam;</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:27:1: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; typedef uint32_t ETSHandle;</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:32:5: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; uint32_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; timer_expire;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/ets_sys.h:33:5: error: unknown type name &#8216;uint32_t&#8217;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; uint32_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; timer_period;</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:17:0:</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/user_interface.h:316:1: error: unknown type name &#8216;uint8_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; void wifi_promiscuous_set_mac(const uint8_t *address);</p>
<p>&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:20:0:</p>
<p>&#160;&#160;&#160; user/io.h:3:16: error: unknown type name &#8216;uint16_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; void ioSpiSend(uint16_t data);</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; user/io.h:8:18: error: unknown type name &#8216;uint8_t&#8217;</p>
<p>&#160;&#160;&#160;&#160; void ioEinkWrite(uint8_t data);</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:21:0:</p>
<p>&#160;&#160;&#160; include/espmissingincludes.h:42:5: error: conflicting types for &#8216;os_random&#8217;</p>
<p>&#160;&#160;&#160;&#160; int os_random();</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; In file included from user/cgiwifi.c:16:0:</p>
<p>&#160;&#160;&#160; /Volumes/case-sensitive/esp-open-sdk/sdk/include/osapi.h:45:15: note: previous declaration of &#8216;os_random&#8217; was here</p>
<p>&#160;&#160;&#160;&#160; unsigned long os_random(void);</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^</p>
<p>&#160;&#160;&#160; make: *** [build/user/cgiwifi.o] Error 1</p>
<p>&#160;</p>
<p>â–¼sdk ã‚’ã„ã‚ã„ã‚ä»£ãˆã¦è©¦ã—ã€0.9.5ã‚ãŸã‚Šã‹ã‚‰è©¦ã—ã¾ã—ãŸã€‚</p>
<blockquote>
<p>$ cd /Volumes/case-sensitive/esp-open-sdk/<br />
    <br />$ ln -s esp_iot_sdk_v0.9.5 sdk</p>
</blockquote>
<p>â–¼ãƒã‚¤ãƒŠãƒªã¯ã§ãã‚‹ã‘ã©ã‚‚ã€ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ãŒã§ããªã„ã®ã§ã€Makefile ã‚’æ›¸ãæ›ãˆã€‚<br />
  <br /> â€» ã¾ã å®Ÿæ©Ÿã§è©¦ã—ã¦ã„ãªã„ã®ã§ã€ã“ã‚Œã§è‰¯ã„ã‹ä¸æ˜ã§ã™ãŒã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ cat Makefile.patch 
--- Makefile_org    2015-09-11 00:13:00.000000000 +0900
+++ Makefile    2015-09-23 15:29:56.000000000 +0900
@@ -12,18 +12,18 @@ BUILD_BASE    = build
 FW_BASE        = firmware
 
 # Base directory for the compiler
-XTENSA_TOOLS_ROOT ?= /opt/Espressif/crosstool-NG/builds/xtensa-lx106-elf/bin
+XTENSA_TOOLS_ROOT ?= /Volumes/case-sensitive/esp-open-sdk/xtensa-lx106-elf/bin
 
 #Extra Tensilica includes from the ESS VM
-SDK_EXTRA_INCLUDES ?= /opt/Espressif/include
-SDK_EXTRA_LIBS ?= /opt/Espressif/arch/lib
+SDK_EXTRA_INCLUDES ?= /Volumes/case-sensitive/esp-open-sdk/include
+SDK_EXTRA_LIBS ?= /Volumes/case-sensitive/esp-open-sdk/sdk/lib
 
 # base directory of the ESP8266 SDK package, absolute
-SDK_BASE    ?= /opt/Espressif/ESP8266_SDK
+SDK_BASE    ?= /Volumes/case-sensitive/esp-open-sdk/sdk
 
 #Esptool.py path and port
-ESPTOOL        ?= esptool
-ESPPORT        ?= /dev/ttyUSB0
+ESPTOOL        ?= esptool.py
+ESPPORT        ?= /dev/tty.SLAB_USBtoUART
 #ESPDELAY indicates seconds to wait between flashing the two binary images
 ESPDELAY    ?= 3
 ESPBAUD        ?= 115200
@@ -61,9 +61,9 @@ SDK_INCDIR    = include include/json
 # we create two different files for uploading into the flash
 # these are the names and options to generate them
 FW_FILE_1    = 0x00000
-FW_FILE_1_ARGS    = -bo $@ -bs .text -bs .data -bs .rodata -bc -ec
+#FW_FILE_1_ARGS    = -bo $@ -bs .text -bs .data -bs .rodata -bc -ec
 FW_FILE_2    = 0x40000
-FW_FILE_2_ARGS    = -es .irom0.text $@ -ec
+#FW_FILE_2_ARGS    = -es .irom0.text $@ -ec
 
 # select which tools to use as compiler, librarian and linker
 CC        := $(XTENSA_TOOLS_ROOT)/xtensa-lx106-elf-gcc
@@ -117,13 +117,17 @@ endef
 
 all: checkdirs $(TARGET_OUT) $(FW_FILE_1) $(FW_FILE_2)
 
-$(FW_FILE_1): $(TARGET_OUT) firmware
-    $(vecho) &quot;FW $@&quot;
-    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)
-
-$(FW_FILE_2): $(TARGET_OUT) firmware
-    $(vecho) &quot;FW $@&quot;
-    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_2_ARGS)
+$(FW_BASE)/%.bin: $(TARGET_OUT) | $(FW_BASE)
+    $(vecho) &quot;FW $(FW_BASE)/&quot;
+    $(Q) $(ESPTOOL) elf2image -o $(FW_BASE)/ $(TARGET_OUT)
+    
+#$(FW_FILE_1): $(TARGET_OUT) firmware
+#    $(vecho) &quot;FW $@&quot;
+#    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)
+
+#$(FW_FILE_2): $(TARGET_OUT) firmware
+#    $(vecho) &quot;FW $@&quot;
+#    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_2_ARGS)
 
 $(TARGET_OUT): $(APP_AR)
     $(vecho) &quot;LD $@&quot;
@@ -138,14 +142,20 @@ checkdirs: $(BUILD_DIR) $(FW_BASE)
 $(BUILD_DIR):
     $(Q) mkdir -p $@
 
-firmware:
+#firmware:
+#    $(Q) mkdir -p $@
+$(FW_BASE):
     $(Q) mkdir -p $@
 
+#flash: $(FW_FILE_1) $(FW_FILE_2)
+#    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x00000 -cf firmware/0x00000.bin -v
+#    $(Q) [ $(ESPDELAY) -ne 0 ] &amp;&amp; echo &quot;Please put the ESP in bootloader mode...&quot; || true
+#    $(Q) sleep $(ESPDELAY) || true
+#    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x40000 -cf firmware/0x40000.bin -v
 flash: $(FW_FILE_1) $(FW_FILE_2)
-    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x00000 -cf firmware/0x00000.bin -v
-    $(Q) [ $(ESPDELAY) -ne 0 ] &amp;&amp; echo &quot;Please put the ESP in bootloader mode...&quot; || true
-    $(Q) sleep $(ESPDELAY) || true
-    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x40000 -cf firmware/0x40000.bin -v
+    $(ESPTOOL) --port $(ESPPORT) write_flash $(FW_FILE_1_ADDR) $(FW_FILE_1) $(FW_FILE_2_ADDR) $(FW_FILE_2)
+
+
 
 clean:
     $(Q) rm -f $(APP_AR)</pre>
<p>ãƒ»å†åº¦make </p>
<blockquote>
<p>$ make clean<br />
    <br />$ make</p>
<p>CC user/cgiwifi.c</p>
<p>CC user/config.c</p>
<p>CC user/eink.c</p>
<p>CC user/espfs.c</p>
<p>CC user/heatshrink_decoder.c</p>
<p>CC user/httpd.c</p>
<p>CC user/httpdclient.c</p>
<p>CC user/httpdespfs.c</p>
<p>CC user/io.c</p>
<p>CC user/stdout.c</p>
<p>CC user/user_main.c</p>
<p>AR build/einkdisp_app.a</p>
<p>LD build/einkdisp.out</p>
<p>FW firmware/</p>
</blockquote>
<p>ã‚¨ãƒ©ãƒ¼ã¯ãªããªã‚Šã¾ã—ãŸã€‚</p>
<p>ãƒ»ã¨ã‚Šã‚ãˆãšã€ã“ã‚“ãªæ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚ </p>
<p>$ tree<br />
  <br />.</p>
<p>â”œâ”€â”€ Makefile</p>
<p>â”œâ”€â”€ Makefile.patch</p>
<p>â”œâ”€â”€ Makefile_org</p>
<p>â”œâ”€â”€ README</p>
<p>â”œâ”€â”€ build</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ driver</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ einkdisp.outâ˜…ã“ã‚Œã¯ã©ã®é ˜åŸŸã«æ›¸ãè¾¼ã‚ã°ã„ã„ã®ã§ã—ã‚‡ã†ã‹ã­ï¼Ÿ</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ einkdisp_app.a</p>
<p>â”‚&#160;&#160; â””â”€â”€ user</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ cgiwifi.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ config.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ eink.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ espfs.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_decoder.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ httpd.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ httpdclient.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ httpdespfs.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ io.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ stdout.o</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â””â”€â”€ user_main.o</p>
<p>â”œâ”€â”€ firmware</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ 0x00000.binâ˜…</p>
<p>â”‚&#160;&#160; â””â”€â”€ 0x40000.binâ˜…</p>
<p>â”œâ”€â”€ html</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ 140medley.min.js</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ apconnect.bm</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ batempty.bm</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ connecting.html</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ icons.png</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ neterror.bm</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ style.css</p>
<p>â”‚&#160;&#160; â””â”€â”€ wifi.tpl</p>
<p>â”œâ”€â”€ icons</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ apconnect.png</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ batempty.png</p>
<p>â”‚&#160;&#160; â””â”€â”€ neterror.png</p>
<p>â”œâ”€â”€ include</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ espmissingincludes-ip.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ espmissingincludes.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ ip_addr.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ lwipopts.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ spi_register.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ stdint.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ uart_hw.h</p>
<p>â”‚&#160;&#160; â””â”€â”€ user_config.h</p>
<p>â”œâ”€â”€ lib</p>
<p>â”‚&#160;&#160; â””â”€â”€ heatshrink</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ LICENSE</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ Makefile</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ README.md</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ dec_sm.dot</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ enc_sm.dot</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ greatest.h</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink.c</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_common.h</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_config.h</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_decoder.c</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_decoder.h</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_encoder.c</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ heatshrink_encoder.h</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ test_heatshrink_dynamic.c</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â”œâ”€â”€ test_heatshrink_dynamic_theft.c</p>
<p>â”‚&#160;&#160;&#160;&#160;&#160;&#160; â””â”€â”€ test_heatshrink_static.c</p>
<p>â”œâ”€â”€ mkespfsimage</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ Makefile</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ espfsformat.h</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ heatshrink_encoder.c</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ heatshrink_encoder.o</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ main.c</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ main.o</p>
<p>â”‚&#160;&#160; â””â”€â”€ mkespfsimage</p>
<p>â”œâ”€â”€ mkimg.php</p>
<p>â”œâ”€â”€ server</p>
<p>â”‚&#160;&#160; â”œâ”€â”€ README</p>
<p>â”‚&#160;&#160; â””â”€â”€ pixelserver.js</p>
<p>â””â”€â”€ user</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ cgiwifi.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ cgiwifi.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ config.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ config.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ eink.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ eink.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ espfs.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ espfs.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ heatshrink_config_httpd.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ heatshrink_decoder.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpd.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpd.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpdclient.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpdclient.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpdconfig.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpdespfs.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ httpdespfs.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ io.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ io.h</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ stdout.c</p>
<p>&#160;&#160;&#160; â”œâ”€â”€ stdout.h</p>
<p>&#160;&#160;&#160; â””â”€â”€ user_main.c </p>
<p>12 directories, 86 files</p>
<p>&#160;</p>
<p>â–¼ã¾ã¨ã‚</p>
<p>ãƒ»SDK ã«ã„ãã¤ã‚’ä½¿ã£ã¦ã„ãŸã‹ä¸æ˜ã€‚ä½œè€…ã«èãã“ã¨ã«</p>
<p>ãƒ»PhantomJS ã§å‹•ä½œã™ã‚‹ pixelserver.js ã¯åˆ¥ã‚µãƒ¼ãƒã«ãŠãã®ã‹ã©ã†ã‹ï¼Ÿ</p>
<p>ãƒ»ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã«ã¯ã€esp-open-sdk ã‚’ä½¿ãˆã°ã„ã„ã®ã‹ã€ãã‚Œã¨ã‚‚ä»–ã®æ–¹æ³•ã‹ä¸æ˜ã€‚</p>
<p>ãƒ»ãƒ“ãƒ«ãƒ‰ã—ã¦ã§ããŸã‚‚ã®ã¯ã€ã©ã®ã‚ˆã†ã«ã©ã®é ˜åŸŸã«æ›¸ãè¾¼ã‚ã°ã„ã„ã®ã‹ä¸æ˜ã€‚</p>
<p>&#160;</p>
<p>â–¼å‚è€ƒ<br />
  <br /><a href="http://nemuisan.blog.bai.ne.jp/?eid=215341" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://nemuisan.blog.bai.ne.jp/?eid=215341<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://dsas.blog.klab.org/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://dsas.blog.klab.org/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://www.homu.net/esp8266%E7%94%A8open-sdk%E3%82%92macosx%E7%94%A8%E3%81%AB%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.homu.net/esp8266%E7%94%A8open-sdk%E3%82%92macosx%E7%94%A8%E3%81%AB%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://bbs.espressif.com/viewforum.php?f=46" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewforum.php?f=46<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="https://github.com/esp8266/esp8266-wiki/tree/master/sdk" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/esp8266/esp8266-wiki/tree/master/sdk<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p><a href="http://nemuisan.blog.bai.ne.jp/?eid=215341" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://nemuisan.blog.bai.ne.jp/?eid=215341<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1256" class="post-1256 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">æŠ•ç¨¿æ—¥: <a href="https://hack.gpl.jp/1256/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-24T02:19:22+09:00">2015å¹´9æœˆ24æ—¥</time></a> </span><span class="posted-on">æ›´æ–°æ—¥:2015å¹´9æœˆ24æ—¥</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="https://hack.gpl.jp/category/espeink/" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /1256.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink make ãã®2</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ä½œè€…ã«ãƒ˜ãƒ«ãƒ—è¦è«‹ã‚’å‡ºã—ã¦ãŠãã¾ã—ãŸã€‚ä½œè€…ã‹ã‚‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒã‚ã‚‹ã¾ã§ã€è‡ªåˆ†ãªã‚Šã«ã‚‚ã†å°‘ã—èª¿ã¹ã¿ã¾ã™ã€‚</p>
<p>ãã®å¾Œã€å†èª¿æŸ»ã§SDK 1.3.0ã‚’ä½¿ã†ã¨ã€   <br />unknown type name &#8216;uint16_t&#8217;    <br />ãŒå‡ºã‚‹ã‚ˆã†ã§ã™ã€‚ä»¥ä¸‹ã«æƒ…å ±ãŒã€‚</p>
<blockquote>
<p><a href="https://github.com/pfalcon/esp-open-sdk/issues/90" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/pfalcon/esp-open-sdk/issues/90<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ã“ã‚Œã¯ã€å†åº¦æŒ‡å®šã™ã‚Œã°å›é¿ã§ããã†ã§ã™ã€‚     <br />#include &lt;stdint.h&gt;</p>
</blockquote>
<p>ã¾ãã€ã§ã‚‚ã“ã‚“ãªã“ã¨ã¯ä½œè€…ã¯ã‚„ã£ã¦ã„ãªã„ã‚ã‘ã§ã€ã¨ã„ã†ã“ã¨ã¯ã€ã‚‚ã£ã¨å¤ã„sdkã§ã‚„ã£ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã ã¨æ€ã†ã®ã§ä»£ãˆã¦ã¿ã¾ã™ã€‚esp_iot_sdk_v1.1.1 ã§ ã¨ã‚Šã‚ãˆãšãƒãƒ£ãƒ¬ãƒ³ã‚¸ã€‚</p>
<blockquote>
<p>$ rm sdk     <br />$ ln -s esp_iot_sdk_v1.1.1 sdk </p>
</blockquote>
<p>ãƒ»unknown type name ã¯å‡ºãªããªã‚‹ãŒã€conflicting types ãŒå‡ºã‚‹ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">    $ make
    CC user/cgiwifi.c
    In file included from user/cgiwifi.c:20:0:
    include/espmissingincludes.h:42:5: error: conflicting types for 'os_random'
     int os_random();
         ^
    In file included from user/cgiwifi.c:15:0:
    /Volumes/case-sensitive/esp-open-sdk/sdk/include/osapi.h:45:15: note: previous declaration of 'os_random' was here
     unsigned long os_random(void);
                   ^
    make: *** [build/user/cgiwifi.o] Error 1</pre>
<p>&#160;</p>
<p>ãƒ»ã¡ã‚‡ã£ã¨çŠ¶æ³ã¯é•ã†ã‹ã‚‚ã§ã™ãŒã€ä»¥ä¸‹ã«æƒ…å ±ãŒã€‚</p>
<blockquote>
<p>
    <br /><a href="http://www.esp8266.com/viewtopic.php?p=18868" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.esp8266.com/viewtopic.php?p=18868<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ãŠãã‚‰ãä½œè€…ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã§ã€include/espmissingincludes.h ã®os_randomã‚’å–ã£ã¦ã—ã¾ãˆã°ï¼Ÿã¨ã€‚<br />
    <br />ã¯ã„ã€ã¨ã‚Šã¾ã—ãŸã€‚</p>
</blockquote>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- espmissingincludes.h
::
uint32 system_get_time();
//int os_random();
int rand(void);
::</pre>
<p>&#160;</p>
<p>ãƒ»ã™ã‚‹ã¨ã€user/cgiwifi.c ã¯é€šã‚Šã€æ¬¡ãªã‚‹ã‚¨ãƒ©ãƒ¼ãŒã€‚ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å®£è¨€ãŒãªã„ã‚ˆã†ã§ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">    $ make
    CC user/cgiwifi.c
    CC user/config.c
    CC user/eink.c
    user/eink.c: In function 'einkTimerCb':
    user/eink.c:60:3: error: implicit declaration of function 'os_update_cpu_frequency' [-Werror=implicit-function-declaration]
       os_update_cpu_frequency(160);
       ^
    cc1: all warnings being treated as errors
    make: *** [build/user/eink.o] Error 1</pre>
<p>&#160;</p>
<p>&#160;</p>
<p>einkTimerCbé–¢æ•°ã®ä¸­ã‹ã‚‰å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚<br />
  <br />ã“ã„ã¤ã¯ã€ã‚½ãƒ¼ã‚¹å…¨ä½“ã‚’grep ã—ã¦ã‚‚å‡ºãªã„ã®ã§ã€sdk ã®çµ„ã¿è¾¼ã¿é–¢æ•°ã®ã‚ˆã†ã§ã™ã€‚ãªã‚“ã¨å®£è¨€ã™ã‚Œã°ã‚ˆã„ã®ã§ã—ã‚‡ã†ã‹ã­ï¼Ÿ </p>
<p>ä»¥ä¸‹ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«ã‚ˆã‚‹ã¨ã€esp_iot_sdk_v1.1.0_15_05_26 ã§ãªããªã£ãŸã‚ˆã†ã§ã™ï¼<br />
  <br /><a href="http://www.esp8266.com/viewtopic.php?p=18496" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.esp8266.com/viewtopic.php?p=18496<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ãã®å‰ã®ã€esp_iot_sdk_v1.0.1/include/osapi.h ã«ã¯ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<p>ã¨ã„ã†ã“ã¨ã¯ã€ä½œè€…ã¯esp_iot_sdk_v1.0.1ã‚ˆã‚Šå‰ã®SDK ã‚’ä½¿ã£ã¦ã„ãŸã¨ã„ã†ã“ã¨ã§ã™ã­ã€‚ </p>
<p>ã‚½ãƒ¼ã‚¹ä¿®æ­£ã¯ã¨ã‚Šã‚ãˆãšã€å¾Œå›ã—ã§ã€ä»Šã¯ä½œè€…ã®ç’°å¢ƒã‚’æ¨æ¸¬ã—ã€æœ€å¾Œã¾ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‹ç’°å¢ƒã‚’æ¢ã‚‹ã®ãŒå„ªå…ˆã§ã™ã€‚ </p>
<p><a href="http://bbs.espressif.com/viewforum.php?f=46" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewforum.php?f=46<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ã®ä¸€è¦§ã‹ã‚‰ã€esp_iot_sdk_v1.0.1_15_04_24 ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
<p>ãƒªãƒªãƒ¼ã‚¹æ—¥ã¯ã€Fri Apr 24, 2015 10:49 pm ã§ã™ã€‚</p>
<p><a href="http://bbs.espressif.com/viewtopic.php?f=46&amp;t=398" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewtopic.php?f=46&amp;t=398<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<blockquote>
<p>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€è§£å‡ã—ã¦ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å¼µã‚Šç›´ã—ã¾ã™ã€‚<br />
    <br />$ rm sdk</p>
<p>$ ln -s esp_iot_sdk_v1.0.1 sdk</p>
</blockquote>
<p>ãƒ»å†åº¦make</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ make clean
$ make
CC user/cgiwifi.c
CC user/config.c
CC user/eink.c
CC user/espfs.c
CC user/heatshrink_decoder.c
CC user/httpd.c
CC user/httpdclient.c
CC user/httpdespfs.c
CC user/io.c
CC user/stdout.c
CC user/user_main.c
AR build/einkdisp_app.a
LD build/einkdisp.out
FW firmware/0x00000.bin
make: esptool: No such file or directory
make: *** [firmware/0x00000.bin] Error 1</pre>
<p>&#160;</p>
<p>ãƒ»ãŠãŠãŠã€make ã¯é€šã£ãŸã‚ˆã†ã§ã™ã€‚esptool ãŒãªã„ã¨ã‹è¨€ã£ã¦ã„ã¾ã™ã­ã€‚</p>
<blockquote>
<p>$ which esptool.py<br />
    <br />/usr/local/bin/esptool.py </p>
</blockquote>
<p>ãƒ»ã‚ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ‡å®šã—ç›´ã—ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- Makefile
::
#Esptool.py path and port
ESPTOOL        ?= /usr/local/bin/esptool.py
::</pre>
<p>ãƒ»ã•ã¦ã€å†åº¦æŒ‘æˆ¦ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ make clean
$ make
CC user/cgiwifi.c
CC user/config.c
CC user/eink.c
CC user/espfs.c
CC user/heatshrink_decoder.c
CC user/httpd.c
CC user/httpdclient.c
CC user/httpdespfs.c
CC user/io.c
CC user/stdout.c
CC user/user_main.c
AR build/einkdisp_app.a
LD build/einkdisp.out
FW firmware/0x00000.bin
usage: esptool [-h] [--port PORT] [--baud BAUD]
               
               {load_ram,dump_mem,read_mem,write_mem,write_flash,run,image_info,make_image,elf2image,read_mac,flash_id,read_flash,erase_flash}
               ...
esptool: error: argument operation: invalid choice: 'build/einkdisp.out' (choose from 'load_ram', 'dump_mem', 'read_mem', 'write_mem', 'write_flash', 'run', 'image_info', 'make_image', 'elf2image', 'read_mac', 'flash_id', 'read_flash', 'erase_flash')
make: *** [firmware/0x00000.bin] Error 2</pre>
<p>&#160;</p>
<p>ãƒ»ã†ã†ã‚€ã€esptool ã®ä½¿ã„æ–¹ãŒé•ã†ã‚ˆã¨å‡ºã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚<br />
  <br /> makefile ã«ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- Makefile
::
$(FW_FILE_1): $(TARGET_OUT) firmware
    $(vecho) &quot;FW $@&quot;
    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)
::</pre>
<p>&#160;</p>
<p>ä½¿ã„æ–¹ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã§ã™ã€‚<br />
  <br />-eo ã¨ã‹ãªã‚“ã§ã—ã‚‡ã†ã­ï¼Ÿ èª¬æ˜ã«ã‚ã‚Šã¾ã›ã‚“ãŒã€ã€ã€</p>
<p>&#160;</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">    $ esptool.py -h
    usage: esptool [-h] [--port PORT] [--baud BAUD]
                   
                   {load_ram,dump_mem,read_mem,write_mem,write_flash,run,image_info,make_image,elf2image,read_mac,flash_id,read_flash,erase_flash}
                   ...
    
    ESP8266 ROM Bootloader Utility
    
    positional arguments:
      {load_ram,dump_mem,read_mem,write_mem,write_flash,run,image_info,make_image,elf2image,read_mac,flash_id,read_flash,erase_flash}
                            Run esptool {command} -h for additional help
        load_ram            Download an image to RAM and execute
        dump_mem            Dump arbitrary memory to disk
        read_mem            Read arbitrary memory location
        write_mem           Read-modify-write to arbitrary memory location
        write_flash         Write a binary blob to flash
        run                 Run application code in flash
        image_info          Dump headers from an application image
        make_image          Create an application image from binary files
        elf2image           Create an application image from ELF file
        read_mac            Read MAC address from OTP ROM
        flash_id            Read SPI flash manufacturer and device ID
        read_flash          Read SPI flash content
        erase_flash         Perform Chip Erase on SPI flash
    
    optional arguments:
      -h, --help            show this help message and exit
      --port PORT, -p PORT  Serial port device
      --baud BAUD, -b BAUD  Serial port baud rate</pre>
<p>&#160;</p>
<p>ãƒ»å¤‰æ•°ã«ã¯ä»¥ä¸‹ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ã€â˜…ã¯ä»¥ä¸‹ã®ã‚ˆã†ã§ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">/usr/local/bin/esptool.py -eo build/einkdisp.out -bo $@ -bs .text -bs .data -bs .rodata -bc -ec</pre>
<p>&#160;</p>
<p>ã†ãƒ¼ã‚“ã€ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã­ã€‚ã¾ãã€ã¨ã«ã‹ãesptool.pyã®ä½¿ã„æ–¹ã¨ã„ã†ã“ã¨ã‚’èª¿æŸ»ã™ã‚Œã°è§£æ±ºã™ã‚‹ã‹ã‚‚ã§ã™ã€‚<br />
  <br />esptool.pyã£ã¦ã„ã†ã®ã¯ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã ã‘ã®ã‚‚ã®ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€ä»–ã«ã‚‚ç”¨é€”ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã‹ã­ã€‚</p>
<p>&#160;</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- Makefile
::
BUILD_BASE    = build
::
ESPTOOL        ?= /usr/local/bin/esptool.py
::
# name for the target project
TARGET        = einkdisp
::
TARGET_OUT    := $(addprefix $(BUILD_BASE)/,$(TARGET).out)
::
# we create two different files for uploading into the flash
# these are the names and options to generate them
FW_FILE_1    = 0x00000
FW_FILE_1_ARGS    = -bo $@ -bs .text -bs .data -bs .rodata -bc -ec
FW_FILE_2    = 0x40000
FW_FILE_2_ARGS    = -es .irom0.text $@ -ec
::
$(FW_FILE_1): $(TARGET_OUT) firmware
    $(vecho) &quot;FW $@&quot;
    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)â˜…
::</pre>
<p>&#160;</p>
<p>ãƒ»ä»¥ä¸‹ãªæ„Ÿã˜ã«ã—ã¦ã¿ã‚‹ã¨ã€ä½œã‚‰ã‚Œã¾ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ã„ã®ã§ã€ã‚„ã£ã±ã‚Šã ã‚ã‹ãªï¼Ÿ</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- Makefile
::
$(FW_BASE)/%.bin: $(TARGET_OUT) | $(FW_BASE)
    $(vecho) &quot;FW $(FW_BASE)/&quot;
    $(Q) $(ESPTOOL) elf2image -o $(FW_BASE)/ $(TARGET_OUT)
#    $(Q) $(ESPTOOL) -o $(TARGET_OUT) $(FW_FILE_1_ARGS)

$(FW_FILE_2): $(TARGET_OUT) firmware
    $(vecho) &quot;FW $(FW_BASE)/&quot;
    $(Q) $(ESPTOOL) -o $(TARGET_OUT) $(FW_FILE_2_ARGS)
::</pre>
<p>&#160;</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ make
CC user/cgiwifi.c
CC user/config.c
CC user/eink.c
CC user/espfs.c
CC user/heatshrink_decoder.c
CC user/httpd.c
CC user/httpdclient.c
CC user/httpdespfs.c
CC user/io.c
CC user/stdout.c
CC user/user_main.c
AR build/einkdisp_app.a
LD build/einkdisp.out
FW firmware/

$ ls -ltr firmware/ build/
firmware/:
total 408
-rw-r--r--  1 junkhack  staff  166264  9 24 02:00 0x40000.bin
-rw-r--r--  1 junkhack  staff   37632  9 24 02:00 0x00000.bin

build/:
total 1464
drwxr-xr-x   2 junkhack  staff      68  9 23 02:05 driver
drwxr-xr-x  13 junkhack  staff     442  9 24 02:00 user
-rw-r--r--   1 junkhack  staff  231984  9 24 02:00 einkdisp_app.a
-rwxr-xr-x   1 junkhack  staff  514957  9 24 02:00 einkdisp.out</pre>
<p>&#160;</p>
<p>ã“ã®ã‚ãŸã‚Šã‚’èª­ã‚“ã§ã¿ã¾ã™ã‹ã€‚<br />
  <br /><a href="https://github.com/themadinventor/esptool" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/themadinventor/esptool<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ã¨ã‚Šã‚ãˆãšã€æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>
<p>â–¼ã¾ã¨ã‚</p>
<p>ãƒ»sdk ã¯ã€esp_iot_sdk_v1.0.1ã‚ˆã‚Šå‰ã®ã‚’ä½¿ã£ã¦ã„ãŸã‚ˆã†ã§ã™ã€‚</p>
<p>ãƒ»esp_iot_sdk_v1.0.1_15_04_24 ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¯ãªããªã£ãŸ</p>
<p>ãƒ»esptool.py ã§ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ä½œã‚‹ã¨ã“ã‚ãŒã†ã¾ãã„ã‹ãªã„</p>
<p>ãƒ»linux ç‰ˆã®esptool.py ã¨ã‹ã ã¨ã€ã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®šãŒé€šã‚‹ã®ã‹ï¼Ÿ</p>
<p>ãƒ»å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«einkdisp.outã¯ã€ä½œæˆã§ãã¦ã„ã‚‹æ¨¡æ§˜</p>
<p>ãƒ»ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã®ã©ã®é ˜åŸŸã«ã©ã†ã‚„ã£ã¦ä½œæˆã™ã‚‹ã®ã‹ã‚’èª¿æŸ»ã™ã‚Œã°ã‚ˆã•ãã†</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1261" class="post-1261 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">æŠ•ç¨¿æ—¥: <a href="https://hack.gpl.jp/1261/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-25T04:39:37+09:00">2015å¹´9æœˆ25æ—¥</time></a> </span><span class="posted-on">æ›´æ–°æ—¥:2015å¹´9æœˆ25æ—¥</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="https://hack.gpl.jp/category/espeink/" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /1261.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink make ãã®ï¼“</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ã•ã¦ã€ãã®å¾Œesptool ã£ã¦ã„ã†ã®ã‚’èª¿æŸ»ã—ã¾ã—ãŸã€‚ </p>
<p>Makefile ã«ã¯ã€-eo ã‚„ã€2ç•ªç›®ã®å¼•æ•°ã®å¤‰æ•°ã«å±•é–‹ã•ã‚Œã‚‹ â€“bo ã‚„ â€“bs ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- Makefile
::
# we create two different files for uploading into the flash
# these are the names and options to generate them
FW_FILE_1    = 0x00000
FW_FILE_1_ARGS    = -bo $@ -bs .text -bs .data -bs .rodata -bc -ec
FW_FILE_2    = 0x40000
FW_FILE_2_ARGS    = -es .irom0.text $@ -ec
::
$(FW_FILE_1): $(TARGET_OUT) firmware
    $(vecho) &quot;FW $@&quot;
    $(Q) $(ESPTOOL) -eo $(TARGET_OUT) $(FW_FILE_1_ARGS)â˜…
::</pre>
<p>&#160;</p>
<p>python ã® esptool.py ã®å¼•æ•°ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã‚‹ã¨ </p>
<blockquote>
<p><a href="https://github.com/themadinventor/esptool/blob/master/esptool.py" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/themadinventor/esptool/blob/master/esptool.py<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>ãã‚“ãªå¼•æ•°ã¯ãªã„ã®ã§ã€ãŠã‹ã—ã„ã‚ˆãªãã¨æ€ã„å†åº¦ã‚°ã‚°ã‚‹ã¨ã€esptool-ck ã¨ã„ã† C ã§æ›¸ã‹ã‚ŒãŸãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚‹ã˜ã‚ƒã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ esptool ã¨ã„ã†åå‰ã¯åŒã˜ãªã®ã§ã€ã¦ã£ãã‚Špython ã®ãƒ„ãƒ¼ãƒ«ã®ã“ã¨ã ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚</p>
<blockquote>
<p><a title="https://github.com/igrr/esptool-ck" href="https://github.com/igrr/esptool-ck" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/igrr/esptool-ck<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>ã‚ã€ã“ã‚Œã§ã™ã­ã€ãã£ã¨ã€‚å…¥ã‚Œã¦ã¿ã‚‹ã“ã¨ã«ã€‚</p>
<p>â–¼esptool-ck</p>
<p>ãƒ»ä»¥ä¸‹ã‚ˆã‚Šdownload </p>
<blockquote>
<p><a href="https://github.com/igrr/esptool-ck/releases" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/igrr/esptool-ck/releases<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>&#160;</p>
<p> osx ãªã®ã§ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¦ãŠãã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ sudo hdiutil mount ~/Documents/case-sensitive.dmg
$ cd /Volumes/case-sensitive</pre>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æ–°ã—ã„ã®ã‚’ã¾ãšè©¦ã—ã¦ã¿ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ wget https://github.com/igrr/esptool-ck/archive/0.4.6.tar.gz
$ tar xvfz 0.4.6.tar.gz 
$ mv esptool-ck-0.4.6/ esptool-ck
$ cd esptool-ck</pre>
<p>&#160;</p>
<p>gcc ã¯å…¥ã£ã¦ã„ã‚‹ã®ã§ã€make ã—å®Ÿè¡Œæ¨©é™ã‚’ã¤ã‘ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$make
$ chmod +x esptool</pre>
<p>&#160;</p>
<p>ãƒ»/opt/é…ä¸‹ã«ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å¼µã£ã¦ãŠãã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ sudo ln -s /Volumes/case-sensitive/esp-open-sdk/ /opt/Espressif</pre>
<p>ãƒ»ãƒ‘ã‚¹ã‚’åæ˜ </p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ export PATH=/opt/Espressif/xtensa-lx106-elf/bin:/opt/Espressif/esptool-ck:$PATH
$ echo 'export PATH=/opt/Espressif/xtensa-lx106-elf/bin:/opt/Espressif/esptool-ck:$PATH' &gt;&gt; ~/.bashrc</pre>
<p>ãƒ»å‘¼ã³å‡ºã›ã‚Œã°OK</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ which esptool
/opt/Espressif/esptool-ck/esptool</pre>
<p>â˜…espeink ã®ã‚½ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">sed -i 's/opt\/Espressif\/crosstool-NG\/builds\/xtensa-lx106-elf\/bin/opt\/Espressif\/xtensa-lx106-elf\/bin/g' Makefile
sed -i 's/\/opt\/Espressif\/ESP8266_SDK/\/opt\/Espressif\/sdk\//g' Makefile
sed -i 's/\/opt\/Espressif\/include/\/opt\/Espressif\/sdk\/include/g' Makefile
sed -i 's/\/opt\/Espressif\/arch\/lib/\/opt\/Espressif\/sdk\/lib/g' Makefile
sed -i 's/ttyUSB0/cu.SLAB_USBtoUART/g' Makefile</pre>
<p>&#160;</p>
<p>ã•ã¦ã€make ã•ã‚Œã¦ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚‚ã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ make
CC user/cgiwifi.c
CC user/config.c
CC user/eink.c
CC user/espfs.c
CC user/heatshrink_decoder.c
CC user/httpd.c
CC user/httpdclient.c
CC user/httpdespfs.c
CC user/io.c
CC user/stdout.c
CC user/user_main.c
AR build/einkdisp_app.a
LD build/einkdisp.out
FW firmware/0x00000.bin
FW firmware/0x40000.bin</pre>
<p>&#160;</p>
<p>ã‚ã£ã•ã‚Šè¡Œã‘ã¾ã—ãŸã­ã€‚ã§ã‚‚ã€ã‚µã‚¤ã‚ºãŒå°ã•ã„ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ ls -al build/ firmware/
build/:
total 1464
drwxr-xr-x   6 junkhack  staff     204  9 25 02:03 .
drwxr-xr-x  16 junkhack  staff     544  9 25 02:03 ..
drwxr-xr-x   2 junkhack  staff      68  9 25 02:03 driver
-rwxr-xr-x   1 junkhack  staff  514717  9 25 02:03 einkdisp.out
-rw-r--r--   1 junkhack  staff  231744  9 25 02:03 einkdisp_app.a
drwxr-xr-x  13 junkhack  staff     442  9 25 02:03 user

firmware/:
total 408
drwxr-xr-x   4 junkhack  staff     136  9 25 02:03 .
drwxr-xr-x  16 junkhack  staff     544  9 25 02:03 ..
-rw-r--r--   1 junkhack  staff   37632  9 25 02:03 0x00000.bin
-rw-r--r--   1 junkhack  staff  166264  9 25 02:03 0x40000.bin</pre>
<p>&#160;</p>
<p>500k ãã‚‰ã„ã‚ã‚‹einkdisp.out ãŒãƒ•ã‚¡ãƒ¼ãƒ ã«å…¥ã£ã¦ã„ãªã„ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶é ˜åŸŸã˜ã‚ƒãªã„ã®ã§ã—ã‚‡ã†ã‹ã­ã€‚ãƒ¡ãƒ¢ãƒªãƒãƒƒãƒ—ã¯ã‚ã¾ã‚Šè¦‹ã¦ã„ãªã„ã®ã§ã€ã“ã‚Œã‚’ã©ã®ã‚ˆã†ã«æ›¸ãè¾¼ã‚ã°ã„ã„ã‹ã¯ã¾ã ä¸æ˜ã§ã™ã€‚</p>
<p>&#160;</p>
<p>ãŒã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯ã‚¨ãƒ©ãƒ¼ãªãé€šã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<p>SDK ã¯ã€1.0.1 ã§ã¨ã‚Šã‚ãˆãšã‚„ã£ã¦ã„ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ cd /opt/Espressif/
HOPE:Espressif junkhack$ ll
total 128
-rw-r--r--   1 junkhack  staff  11263  9 22 22:52 Makefile
-rw-r--r--   1 junkhack  staff   5725  9 22 22:52 README.md
-rw-r--r--   1 junkhack  staff   1101  9 22 22:52 c_types-c99.patch
drwxr-xr-x  18 junkhack  staff   1462  9 22 23:24 crosstool-NG
-rw-r--r--   1 junkhack  staff    199  9 22 22:52 crosstool-config-overrides
-rw-r--r--   1 junkhack  staff    146  9 22 22:52 empty_user_rf_pre_init.c
drwxr-xr-x@ 10 junkhack  staff    442  9 23 22:34 esp_iot_sdk_v0.9.5
drwxr-xr-x@ 10 junkhack  staff    374  4 24 17:08 esp_iot_sdk_v1.0.1
drwxr-xr-x@ 10 junkhack  staff    408  9 23 14:43 esp_iot_sdk_v1.1.1
drwxr-xr-x@ 10 junkhack  staff    374  6 12 20:49 esp_iot_sdk_v1.1.2
drwxr-xr-x  10 junkhack  staff    442  9 23 00:24 esp_iot_sdk_v1.3.0
drwxr-xr-x@ 10 junkhack  staff    374  9 18 21:55 esp_iot_sdk_v1.4.0
drwxr-xr-x   2 junkhack  staff    272  9 22 22:56 esptool
drwxr-xr-x   9 junkhack  staff    646  9 24 19:58 esptool-ck
drwxr-xr-x   9 junkhack  staff    510  9 24 19:44 esptool-ck_git
drwxr-xr-x   2 junkhack  staff    170  9 22 22:52 examples
drwxr-xr-x   6 junkhack  staff    612  9 23 00:25 lx106-hal
-rw-r--r--   1 junkhack  staff  24726  8  8 16:20 release_note.txt
lrwxr-xr-x   1 junkhack  staff     18  9 23 23:53 sdk -&gt; esp_iot_sdk_v1.0.1
drwxr-xr-x   8 junkhack  staff    306  9 23 00:21 xtensa-lx106-elf</pre>
<p>&#160;</p>
<p>Makefile ã«ã¯ã€ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€æ›¸ãè¾¼ã¿ã§ãã‚‹ã¯ãšã§ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">::
flash: $(FW_FILE_1) $(FW_FILE_2)
    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x00000 -cf firmware/0x00000.bin -v
    $(Q) [ $(ESPDELAY) -ne 0 ] &amp;&amp; echo &quot;Please put the ESP in bootloader mode...&quot; || true
    $(Q) sleep $(ESPDELAY) || true
    $(Q) $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x40000 -cf firmware/0x40000.bin -v

::


webpages.espfs: html/ mkespfsimage/mkespfsimage
    cd html; find | ../mkespfsimage/mkespfsimage &gt; ../webpages.espfs; cd ..

mkespfsimage/mkespfsimage: mkespfsimage/
    make -C mkespfsimage

htmlflash: webpages.espfs
    if [ $$(stat -c '%s' webpages.espfs) -gt $$(( 0x2E000 )) ]; then echo &quot;webpages.espfs too big!&quot;; false; fi
    $(ESPTOOL) -cp $(ESPPORT) -cb $(ESPBAUD) -ca 0x12000 -cf webpages.espfs -v
::</pre>
<p>åœŸæ—¥ã«esp ã«æ›¸ãè¾¼ã‚“ã§ã¿ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚</p>
<p>&#160;</p>
<p>esp12 ã‚’ã¤ãªã’ã¦ã„ãªã„ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ make webpages.espfs
cd html; find | ../mkespfsimage/mkespfsimage &gt; ../webpages.espfs; cd ..
/bin/sh: ../mkespfsimage/mkespfsimage: cannot execute binary file
usage: find [-H | -L | -P] [-EXdsx] [-f path] path ... [expression]
       find [-H | -L | -P] [-EXdsx] -f path [path ...] [expression]
HOPE:espeink junkhack$ 

HOPE:espeink junkhack$ make mkespfsimage/mkespfsimage
make: `mkespfsimage/mkespfsimage' is up to date.
HOPE:espeink junkhack$ 

HOPE:espeink junkhack$ make htmlflash
if [ $(stat -c '%s' webpages.espfs) -gt $(( 0x2E000 )) ]; then echo &quot;webpages.espfs too big!&quot;; false; fi
stat: illegal option -- c
usage: stat [-FlLnqrsx] [-f format] [-t timefmt] [file ...]
/bin/sh: line 0: [: -gt: unary operator expected
esptool -cp /dev/cu.SLAB_USBtoUART -cb 115200 -ca 0x12000 -cf webpages.espfs -v
esptool vb64eebd - (c) 2014 Ch. Klippel &lt;ck@atelier-klippel.de&gt;
opening port /dev/cu.SLAB_USBtoUART at 115200
opening bootloader
resetting board
trying to connect
trying to connect
trying to connect
resetting board
trying to connect
trying to connect
trying to connect
resetting board
trying to connect
trying to connect
trying to connect
warning: espcomm_sync failed
error: espcomm_open failed
make: *** [htmlflash] Error 255
HOPE:espeink junkhack$ 

HOPE:espeink junkhack$ make flash
esptool vb64eebd - (c) 2014 Ch. Klippel &lt;ck@atelier-klippel.de&gt;
opening port /dev/cu.SLAB_USBtoUART at 115200
opening bootloader
resetting board
trying to connect
trying to connect
trying to connect
resetting board
trying to connect
trying to connect
trying to connect
resetting board
trying to connect
trying to connect
trying to connect
warning: espcomm_sync failed
error: espcomm_open failed
make: *** [flash] Error 255
HOPE:espeink junkhack$ </pre>
<p>â–¼ã¾ã¨ã‚</p>
<p>ãƒ»esptool ã¯ python ã®ã˜ã‚ƒãªãã¦ã€C è£½ã® esptool-ck ã¨ã„ã†ã®ã‚’ä½¿ã†</p>
<p>ãƒ»esptool-ck ã«ã¯ã„ã‚ã„ã‚ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<p>ãƒ»é…ç·šã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã€resetmethod=wifio ãªã©ã¨ã™ã‚Œã°ã€UART ã® RTS and DTRã‚’ä½¿ã£ã¦ãƒ–ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ã«ã—ãŸã‚Šã§ãã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<p> <a title="https://github.com/esp8266/Arduino/issues/22" href="https://github.com/esp8266/Arduino/issues/22" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/esp8266/Arduino/issues/22<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ãƒ»ã§ããŸï¼’ã¤ã®ãƒ•ã‚¡ãƒ¼ãƒ ã¯ã‚µã‚¤ã‚ºãŒå°ã•ã„ã‚ˆã†ã ãŒï¼Ÿ</p>
<p>ãƒ»make ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æ›¸ãè¾¼ã¿ã‚„ã€ãã®ä»–ã®ä½•ã‹ä½œæ¥­ã™ã‚‹ã‚‚ã®ãŒã‚ã‚‹</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1269" class="post-1269 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">æŠ•ç¨¿æ—¥: <a href="https://hack.gpl.jp/1269/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-26T21:51:15+09:00">2015å¹´9æœˆ26æ—¥</time></a> </span><span class="posted-on">æ›´æ–°æ—¥:2015å¹´9æœˆ26æ—¥</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="https://hack.gpl.jp/category/espeink/" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /1269.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink make ãã®ï¼”</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ç¶šãã‚’ã‚„ã£ã¦ã„ã¾ã™ã€‚æ˜¨æ—¥ã€esptool ã¯ C è£½ã®ã‚’ä½¿ã†ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ä»Šå›ã¯å®Ÿéš›ã« ESP12 ã«æ›¸ãè¾¼ã‚“ã§ã¿ã¾ã™ã€‚</p>
<p>ã¾ã ã€PCB ãƒœãƒ¼ãƒ‰ã¯ä½œã£ã¦ã„ã¾ã›ã‚“ãŒã€é–‹ç™ºãƒœãƒ¼ãƒ‰ã«ã¨ã‚Šã‚ãˆãšæ›¸ãè¾¼ã‚ã‚‹ã‹ã‚„ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p>
<p>&#160;</p>
<p>æ›¸ãè¾¼ã‚€é–‹ç™ºãƒœãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹ã®ã‚‚ã®ã§ã™ã€‚ä»–2å°ã¯ã€ä»¥å‰ã«ã‚ã‚Œã“ã‚Œã‚„ã£ã¦ã„ã‚‹æœ€ä¸­ã«3.3V ä»¥ä¸Šå…¥ã‚Œã™ãã¦å£Šã‚ŒãŸã‚ˆã†ã§ã™ã€‚2å°ã¯æ˜‡å¤©ã—ã¾ã—ãŸã®ã§ã€æ­£å¸¸ãªã®ã¯ã“ã‚Œã¨ã€ã‚ã¨æœªé–‹å°ã®ãŒï¼‘ã¤ã‚ã‚Šã¾ã™ã€‚</p>
<p> <img loading="lazy" title="dev" style="float:none;margin-left:auto;display:block;margin-right:auto;border-width:0;" border="0" alt="dev" src="./../images/dev.jpg" width="640" height="480" />   </p>
<p>&#160;</p>
<p>ã•ã¦ã€ã‚½ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€make flash ã—ã¦ã¿ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ make flash
esptool vb64eebd - (c) 2014 Ch. Klippel &lt;ck@atelier-klippel.de&gt;
opening port /dev/cu.SLAB_USBtoUART at 115200
opening bootloader
resetting board
trying to connect
trying to connect
Uploading 37632 bytes from firmware/0x00000.bin to flash at 0x00000000
.....................................
starting app without reboot
closing bootloader
Please put the ESP in bootloader mode...â˜…å†åº¦ã€RST ã‚’ GND ã«
esptool vb64eebd - (c) 2014 Ch. Klippel &lt;ck@atelier-klippel.de&gt;
opening port /dev/cu.SLAB_USBtoUART at 115200
opening bootloader
resetting board
trying to connect
trying to connect
Uploading 166264 bytes from firmware/0x40000.bin to flash at 0x00040000
...................................................................................................................................................................
starting app without reboot
closing bootloader
HOPE:espeink junkhack$ </pre>
<p>&#160;</p>
<p>ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Œã°æ›¸ãè¾¼ã¿ã¯OK ãªã‚ˆã†ã§ã™ã€‚</p>
<p>esptool(esptool-ck) ãŒã€ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ãŒï¼’ã¤æ›¸ãè¾¼ã‚€ã®ã§ã™ãŒã€2ã¤ç›®ã®æ™‚ã«ã‚‚å†åº¦æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã‚’è¦æ±‚ã—ã¦ãã‚‹ã‚ˆã†ãªã®ã§ã€RST pin ã‚’GNDã«è½ã¨ã—ã¦ãƒ–ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ã«ã—ã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã¯ã€å®Ÿéš›ã®PCB åŸºç›¤ã«ã¤ã‘ãŸçŠ¶æ…‹ã ã¨ã©ã†ãªã‚‹ã®ã§ã—ã‚‡ã†ã‹ã­ï¼Ÿè¦æ¤œè¨ã§ã™ã€‚</p>
<p>&#160;</p>
<p>ç¶šã„ã¦ã€html ã‚’ mkespfsimage ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦åœ§ç¸®ã—ãã‚Œã‚’ 0x12000 ã®é ˜åŸŸã«æ›¸ãè¾¼ã‚€ã‚ˆã†ã§ã™ã€‚ã“ã‚Œã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<blockquote>
<p>$ make webpages.espfs</p>
</blockquote>
<p>ãŒã€ã“ã“ã§å•é¡ŒãŒï¼’ã¤ç™ºç”Ÿã€‚ã¾ãšã€osx ã ã¨ã€ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ˜¨æ—¥è©¦ã—ãŸã‚ˆã†ã«ã€</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ make webpages.espfs
cd html; find | ../mkespfsimage/mkespfsimage &gt; ../webpages.espfs; cd ..
/bin/sh: ../mkespfsimage/mkespfsimage: cannot execute binary file
usage: find [-H | -L | -P] [-EXdsx] [-f path] path ... [expression]
       find [-H | -L | -P] [-EXdsx] -f path [path ...] [expression]
HOPE:espeink junkhack$</pre>
<p>&#160;</p>
<p>ã¨ãªã£ã¦ã—ã¾ã„find ã®ä½¿ã„æ–¹ãŒæ‚ªã„ã‚ˆã¨ã€å‡ºã¦ã—ã¾ã„ã¾ã™ã€‚make ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã¨</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ cd html/
HOPE:html junkhack$ find
usage: find [-H | -L | -P] [-EXdsx] [-f path] path ... [expression]
       find [-H | -L | -P] [-EXdsx] -f path [path ...] [expression]</pre>
<p>&#160;</p>
<p>ã¨ãªã‚Šã¾ã™ã€‚osx ã® find ã¯ã€å¼•æ•°ã‚’ä¸ãˆãªã„ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‡ºãªã„ä»•æ§˜ã®ã‚ˆã†ã§ã™ã€‚ãªã®ã§ã€GNU ã® find ã‚’å…¥ã‚Œã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">$ brew install findutils --with-default-names</pre>
<p>&#160;</p>
<p>ã¾ãšã€1ã¤ç›®ã®å•é¡Œã¯ã“ã‚Œã§ã‚¯ãƒªã‚¢ã§ã™ã€‚ã—ã‹ã—ã€ã¾ã ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ make webpages.espfs
cd html; find | ../mkespfsimage/mkespfsimage &gt; ../webpages.espfs; cd ..
/bin/sh: ../mkespfsimage/mkespfsimage: cannot execute binary file</pre>
<p>&#160;</p>
<p>ã‚·ã‚§ãƒ«ãŒã€mkespfsimage ã®ã€ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã§ããªã„ã‚ˆã†ã§ã™ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å†åº¦ make ã—ã¦ã¿ã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:mkespfsimage junkhack$ cd mkespfsimage

HOPE:mkespfsimage junkhack$ make clean
rm -f mkespfsimage main.o heatshrink_encoder.o
HOPE:mkespfsimage junkhack$ 

HOPE:mkespfsimage junkhack$ make
cc -I../lib/heatshrink -std=gnu99   -c -o main.o main.c
main.c:59:38: warning: passing 'char *' to parameter of type 'uint8_t *' (aka 'unsigned char *') converts between pointers to integer types with
      different sign [-Wpointer-sign]
                        sres=heatshrink_encoder_sink(enc, inp, insize, &amp;len);
                                                          ^~~
../lib/heatshrink/heatshrink_encoder.h:97:14: note: passing argument to parameter 'in_buf' here
    uint8_t *in_buf, size_t size, size_t *input_size);
             ^
main.c:65:38: warning: passing 'char *' to parameter of type 'uint8_t *' (aka 'unsigned char *') converts between pointers to integer types with
      different sign [-Wpointer-sign]
                        pres=heatshrink_encoder_poll(enc, outp, outsize, &amp;len);
                                                          ^~~~
../lib/heatshrink/heatshrink_encoder.h:102:14: note: passing argument to parameter 'out_buf' here
    uint8_t *out_buf, size_t out_buf_size, size_t *output_size);
             ^
2 warnings generated.
cc -I../lib/heatshrink -std=gnu99   -c -o heatshrink_encoder.o heatshrink_encoder.c
cc -o mkespfsimage main.o heatshrink_encoder.o
HOPE:mkespfsimage junkhack$</pre>
<p>&#160;</p>
<p>ã¨ã‚Šã‚ãˆãšã€ãªã‚“ã‹è­¦å‘Šã¯å‡ºã¦ã„ã¾ã™ãŒã§ããŸã‚ˆã†ã§ã™ã€‚Linux (Ubuntu)ã®gcc 4.8.2ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">root@ub:~/work/espeink/mkespfsimage# rm mkespfsimage
root@ub:~/work/espeink/mkespfsimage# make clean
rm -f mkespfsimage main.o heatshrink_encoder.o
root@ub:~/work/espeink/mkespfsimage# 
root@ub:~/work/espeink/mkespfsimage# make
cc -I../lib/heatshrink -std=gnu99   -c -o main.o main.c
cc -I../lib/heatshrink -std=gnu99   -c -o heatshrink_encoder.o heatshrink_encoder.c
cc -o mkespfsimage main.o heatshrink_encoder.o
root@ub:~/work/espeink/mkespfsimage# </pre>
<p>&#160;</p>
<p>osx ã§ã¯ã€gcc ã«ä»¥ä¸‹ã‚’ä½¿ã£ã¦ã„ãŸã®ã§å‡ºãŸã‚ˆã†ã§ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:mkespfsimage junkhack$ gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)
Target: x86_64-apple-darwin13.4.0
Thread model: posix</pre>
<p>&#160;</p>
<p>ã¨ã‚Šã‚ãˆãšã€è­¦å‘Šã¯å‡ºã¦ã„ã¾ã™ãŒã€ãƒ“ãƒ«ãƒ‰ã¯ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ã‚¹ãƒ«ãƒ¼ã—ã¾ã™ã€‚ã•ã¦ã€ã“ã‚Œã§2ç•ªç›®ã®å•é¡Œã‚‚è§£æ±ºã§ããŸã¯ãšã§ã™ã€‚å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ make webpages.espfs
cd html; find | ../mkespfsimage/mkespfsimage &gt; ../webpages.espfs; cd ..
140medley.min.js (74%)
apconnect.bm (15%)
batempty.bm (13%)
connecting.html (95%)
icons.png (100%)
neterror.bm (16%)
style.css (73%)
wifi.tpl (54%)
HOPE:espeink junkhack$ 

HOPE:espeink junkhack$ ll
total 120
-rw-r--r--@  1 junkhack  staff   4946  9 24 21:27 Makefile
-rw-r--r--@  1 junkhack  staff   3261  9 23 15:34 Makefile.patch
-rw-r--r--@  1 junkhack  staff   4960  9 11 00:13 Makefile_org
-rw-r--r--@  1 junkhack  staff    207  9 22 22:32 README
drwxr-xr-x   6 junkhack  staff    204  9 24 21:31 build
drwxr-xr-x   4 junkhack  staff    136  9 24 21:31 firmware
drwxr-xr-x  10 junkhack  staff    340  9 22 22:32 html
drwxr-xr-x   5 junkhack  staff    170  9 22 22:32 icons
drwxr-xr-x  10 junkhack  staff    340  9 22 22:32 include
drwxr-xr-x   3 junkhack  staff    102  9 22 22:32 lib
drwxr-xr-x   9 junkhack  staff    306  9 26 22:08 mkespfsimage
-rw-r--r--   1 junkhack  staff    638  9 22 22:32 mkimg.php
drwxr-xr-x   4 junkhack  staff    136  9 22 22:32 server
drwxr-xr-x  24 junkhack  staff    816  9 22 22:32 user
-rw-r--r--   1 junkhack  staff  31024  9 26 22:17 webpages.espfsâ˜…
HOPE:espeink junkhack$</pre>
<p>&#160;</p>
<p>â˜…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚Œã°OK ã§ã™ã€‚</p>
<p>ãªã‚‹ã»ã©ã€ã“ã‚Œã§esp12 ã®ä¸­ã«å…¥ã£ã¦ã„ã‚‹web ã‚µãƒ¼ãƒãŒã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§è¡¨ç¤ºã—ã¦ã„ã‚‹ã‚“ã§ã™ã­ã€‚</p>
<p>ã‚„ã£ã¨ã“ã‚Œã§html ãŒæ›¸ãè¾¼ã‚ã‚‹ã¯ãšã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">HOPE:espeink junkhack$ make htmlflash
if [ $(stat -c '%s' webpages.espfs) -gt $(( 0x2E000 )) ]; then echo &quot;webpages.espfs too big!&quot;; false; fi
stat: illegal option -- c
usage: stat [-FlLnqrsx] [-f format] [-t timefmt] [file ...]
/bin/sh: line 0: [: -gt: unary operator expected
esptool -cp /dev/cu.SLAB_USBtoUART -cb 115200 -ca 0x12000 -cf webpages.espfs -v
esptool vb64eebd - (c) 2014 Ch. Klippel &lt;ck@atelier-klippel.de&gt;
opening port /dev/cu.SLAB_USBtoUART at 115200
opening bootloader
resetting board
trying to connect
trying to connect
Uploading 31024 bytes from webpages.espfs to flash at 0x00012000
...............................
starting app without reboot
closing bootloader
HOPE:espeink junkhack$ </pre>
<p>&#160;</p>
<p>æ›¸ãè¾¼ã‚ã¦ã¯ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€æœ€åˆã®éƒ¨åˆ†ã§ stat ã®ä½¿ã„æ–¹ãŒæ‚ªãã†ã¨å‡ºã¦ã„ã¾ã™ã€‚ãŠãã‚‰ãã“ã‚Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ã‹éããªã„ã‹ã©ã†ã‹ã‚’è¦‹ã¦ã„ã‚‹ã‚“ã ã¨æ€ã„ã¾ã™ãŒã€ã¨ã‚Šã‚ãˆãšã‚¹ãƒ«ãƒ¼ã—ã¾ã™ã€‚</p>
<p>ã‚ã¨ã¯è¨­å®šã¨ã‹ã€WiFi E-ink ã¨ãã‚Œã‚’è¦‹ã«è¡Œãã‚µãƒ¼ãƒã®è¨­å®šãªã©ã¨ãªã‚‹ã¯ãšã§ã™ã€‚</p>
<p>&#160;</p>
<p>â–¼ã¾ã¨ã‚</p>
<p>ãƒ»ESP12 ã§å‹•ä½œã™ã‚‹WEB ã¯ã€åœ§ç¸®ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã«è¡Œã</p>
<p>ãƒ»ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€mkespfsimage ã§ heatshrink ã‚’ä½¿ã£ãŸåœ§ç¸®ã§ä½œæˆã•ã‚Œã‚‹</p>
<p>ãƒ»osx ã® find ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ãªã—ã ã¨ã€å‹•ä½œã—ãªã„ã®ã§ã€gnu ç‰ˆã‚’å…¥ã‚Œã‚‹</p>
<p>ãƒ»mkspsimage ã‚³ãƒãƒ³ãƒ‰ã¯ã€å†åº¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã€‚</p>
<p>ãƒ»ESP12 ã¸ã®æ›¸ãè¾¼ã¿ã¯ã€ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã¯ã€make flash ã§æ›¸ãè¾¼ã‚€</p>
<p>ãƒ»ESP12 ã¸ã®html ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã¯ã€make htmlflash ã‚’ä½¿ã†</p>
<p>ãƒ»make htmlflash ã‚’ä½¿ã£ãŸã¨ãã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®å¤§ãã•ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã“ã‚ŒãŒosx ã§ã¯ã€å‹•ä½œã—ã¦ã„ãªã„æ¨¡æ§˜</p>
<p>ãƒ»ãŠãã‚‰ãæ›¸ãè¾¼ã¿ã«ã¯ã€Linux ã‚’ä½¿ã£ãŸã»ã†ãŒæ¥½ã§ã™ã€‚</p>
<p>&#160;</p>
<p>ã¾ã ã€è‰¯ãã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã¯è¿½ã£ã¦èª¿æŸ»ã—ã¾ã™ã€‚</p>
<p>â–¼è‰¯ãã‚ã‹ã‚‰ãªã„ã“ã¨</p>
<p>ãƒ»æœ€åˆã®èµ·å‹•æ™‚ã«ã€192.168.4.1 ã§ mode(3) ã®ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§èµ·å‹•ã—ã¦ãã‚‹ãŒã€ã“ã®ã¨ãã®wifi ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«å…¥ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ï¼Ÿ</p>
<p>ãƒ»EPS12 ãŒè¨­å®šã‚’çµ‚ãˆã‚Œã°ã€å®šæœŸé–“éš”ã§WEB ã‚µãƒ¼ãƒã‚’è¦‹ã«è¡ŒããŒã€ã“ã®å‡¦ç†ã¯ã©ã†ã‚„ã‚Œã°ã„ã„ã®ã‹ï¼Ÿ</p>
<p>&#160;</p>
<p>æ¨æ¸¬ã§ã¯ã€ç”»åƒã®URL ã‚’æŒ‡å®šã™ã‚Œã°ã„ã‘ã‚‹æ°—ãŒã—ã¾ã™ã€‚ãã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€bm å½¢å¼ã®ã‚‚ã®ã§ã€‚ã“ã®ã‚ãŸã‚Šã¯ã€ã‚‚ã†å°‘ã—èª¿æŸ»ã—ãªã„ã¨ç™½é»’è¨€ãˆã¾ã›ã‚“ãŒã€ãªã‚“ã¨ã‹ã„ã‘ãã†ãªæ°—ãŒã—ã¦ãã¾ã—ãŸã®ã§ã€éƒ¨å“ã‚’ç™ºæ³¨ã—ãŸã‚Šã€åŸºæ¿ã‚’ç™ºæ³¨ã—ãŸã‚Šã™ã‚‹ã‹ã©ã†ã‹è€ƒãˆã¦è¦‹ã¾ã™ã€‚å®Ÿéš›ã®ãƒœãƒ¼ãƒ‰ã¨E-ink ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãŒãªã„ã¨ã“ã‚Œä»¥ä¸Šã®ç¢ºèªã¯ã¡ã‚‡ã£ã¨å³ã—ã„ã§ã™ã€‚ã§ããªãã¯ãªã„ã§ã™ãŒã€ã‚ã¨ã¯ç¾å ´åˆã‚ã›ã§æ¥½ã—ã‚“ã§ã‚‚ã„ã„ã‹ãªãã¨ã€‚</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1277" class="post-1277 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">æŠ•ç¨¿æ—¥: <a href="https://hack.gpl.jp/1277/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-27T02:17:42+09:00">2015å¹´9æœˆ27æ—¥</time></a> </span><span class="posted-on">æ›´æ–°æ—¥:2015å¹´9æœˆ27æ—¥</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="https://hack.gpl.jp/category/espeink/" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /1277.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink ã®æŒ™å‹•</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ã¨ã‚Šã‚ãˆãšã€å…¨ä½“ãŒã¾ã è‰¯ãã‚ã‹ã£ã¦ã„ãªã„ã‘ã‚Œã©ã‚‚ã€E-ink ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒ ã™ã‚‹ã‚µãƒ¼ãƒãŒå¿…è¦ã ã¨ã„ã†ã“ã¨ã¯ã‚ã‹ã£ãŸã®ã§ã€ãã®ãƒ¡ãƒ¢ã§ã™ã€‚</p>
<p>&#160;</p>
<p>ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã® user/config.c ä¸­ã«ã‚ã‚‹URL ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦ã€ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ã‚¢ãƒƒãƒ—ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- user/config.c
::
void configLoad() {
    int c;
    spi_flash_read(ESP_PARAM_SEC*SPI_FLASH_SEC_SIZE, (uint32 *)&amp;myConfig, sizeof(MyConfig));
    c=calcChsum();
    if (c!=myConfig.chsum) {
        // os_strcpy(myConfig.url, &quot;http://meuk.spritesserver.nl/espbm.php&quot;);
        os_strcpy(myConfig.url, &quot;http://192.168.1.17:8266/server/espbm.php&quot;);
    }
}
::</pre>
<p>192.168.1.17:8266 ã¯ã€ã¨ã‚Šã‚ãˆãšosx ã§èµ·å‹•ã—ã¦ã„ã‚‹apache ã§ã™ã€‚</p>
<p>æœ¬æ¥ã€mode ãŒ 3 ã§æœ€åˆã«èµ·å‹•ã™ã‚‹ã¨ãã¯å‹•ä½œã—ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«æ¥ç¶šã—ãŸã‚‰ 192.168.4.1 ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã¯ãšãªã‚“ã ã‚ã†ã‘ã©ã‚‚ã€ãã®ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«å…¥ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒè‰¯ãã‚ã‹ã‚‰ãšã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸­ã§ã¨ã‚Šã‚ãˆãšã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«æ¥ç¶šã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸã€‚ãã—ã¦ã€esp12 ã«ä»–ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ãŸã®ãŒä»¥ä¸‹ã€‚</p>
<p><img loading="lazy" title="WiFi_connection" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="WiFi_connection" src="./../images/wifi_connection.png" width="640" height="325" /> </p>
<p>&#160;</p>
<p>Datasource ã® URL ã«ã‚ã‚‹espbm.php ã¯ãŠãã‚‰ãã€.bm ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã™ã‚‹ã‚‚ã®ã ã¨æ€ã†ã‘ã‚Œã©ã‚‚ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã«ã¯ãªãã€ã¨ã‚Šã‚ãˆãšå¤‰æ›æ¸ˆã¿ã®.bm ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ã‚‚ã®ã‚’ç”¨æ„ã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">&lt;?php
fpassthru(fopen(&quot;../html/apconnect.bm&quot;, &quot;r&quot;));
exit(0);
?&gt;</pre>
<p>ã“ã‚ŒãŒæ­£ã—ã„ã®ã‹ã©ã†ã‹ã¯ã€ä»Šã®ã¨ã“ã‚ä¸æ˜ã§ã™ãŒã€ã“ã†ã—ã¦ã¿ã‚‹ã¨ã€ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">â˜…Reset å¾Œã® UART ã®å†…å®¹
::

 ets Jan  8 2013,rst cause:4, boot mode:(3,7)

wdt reset
load 0x40100000, len 31640, room 16 
tail 8
chksum 0x70
load 0x3ffe8000, len 2572, room 0 
tail 12
chksum 0x06
ho 0 tail 12 room 4
load 0x3ffe8a10, len 3528, room 12 
tail 12
chksum 0x7d
csum 0x7d
rlDatasource http://192.168.1.17:8266/server/espbm.php
mode : sta(18:fe:34:9b:99:a3)
add if0
scandone
reconnect
scandone
add 0
aid 5
pm open phy_2,type:2 0 0
cnt 

connected with JunkHackAP, channel 6
dhcp client start...
No heap available, failed to malloc 440â˜…ãƒ’ãƒ¼ãƒ—ãŒãªã„ã¨ã•ã€‚IPãŒã¨ã‚Œã¦ã„ãªã„
Wdt. This takes too long. Go to sleep.
del if0
usl
sul 3 0
rm mismatch
pm close 7 0 0/17956334
deep sleep 60sâ˜…ä¸€å›ã‚¹ãƒªãƒ¼ãƒ—ã™ã‚‹ãŒã€

.Ã¡rl.lÂœÂ|.ÂŒlÃ |....ÂŒ.lÃ¬.b|ÂÂ‚.Ã¬.Â’rÂ’blÂbÂŒÃ²nnÂlnnÂœÃ¢Ã¬.b.pÃ¬Âlrlrl.Â‚rÃ²Â’nÃ bÃ¢nbp.Ã¼
â˜…60ç§’å¾Œã«èµ·ããŸæ™‚ã«ã¯å‹•ä½œã›ãšã€‚</pre>
<p>ã†ãƒ¼ã‚“ã€ãŠã—ã„ã¨ã“ã‚ã¾ã§ã¯ãã¦ã„ã¾ã™ãŒã€ä½•ã‹ãŒãŠã‹ã—ã„ã§ã™ã­ã€‚</p>
<p>ãƒ†ã‚¹ãƒˆã®ãŸã‚ã«ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã¯ä»¥ä¸‹ã®å¤‰æ›´ãŒã—ã¦ã‚ã‚Šã¾ã™ã€‚</p>
<p>1) 3.1V ä»¥ä¸‹ã§ã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ã«å®šæ•°ã‚’æ›¸ãæ›ãˆ</p>
<p>2) åˆå› mode(3) ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«å…¥ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸æ˜ã§ã€æ¥ç¶šã™ã‚‹ã‚ˆã†è¨­å®šã—ã¦ã‚ã‚‹</p>
<p>&#160;</p>
<p>ãªã‚“ã‹ã€2ã®å¤‰æ›´ãŒã¾ãšãã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<p>ã¾ãã€ã§ã‚‚ã“ã“ã¾ã§ã§ã€ä»¥ä¸‹ã®äº‹ãŒã€ã¼ã‚„ã£ã¨ã§ã™ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>
<p>&#160;</p>
<p>â–¼ã¾ã¨ã‚</p>
<p>ãƒ»ESP12 ã‹ã‚‰è¡¨ç¤ºã™ã‚‹URLã¯æŒ‡å®šã§ãã€ãã“ã‹ã‚‰ç”»åƒã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã—ã¦è¡¨ç¤ºã—ã¦ã„ã‚‹ã ã‚ã†ã€‚</p>
<p>ãƒ»ESP12 ã«è¡¨ç¤ºã•ã›ã‚‹ç”»åƒã¯ã€åˆ¥ã‚µãƒ¼ãƒã‹ã‚‰å–å¾—ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚</p>
<p>ãƒ»åˆå›ãƒ–ãƒ¼ãƒˆã‹ã©ã†ã‹ã‚’åˆ¤åˆ¥ã•ã›ã‚‹ã€RTC_MAGICã‚³ãƒ¼ãƒ‰éƒ¨åˆ†ã¯ã†ã¾ãå‹•ä½œã—ã¦ã„ã‚‹</p>
<p>ãƒ»åˆå›ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã®è¨­å®šã«è¡Œã£ãŸã¨ãã€é–‹ç™ºãƒœãƒ¼ãƒ‰ã®LED ã¯å…‰ã‚Šã€ç”»åƒå‡ºåŠ›pin ã¸ã¯ãƒ‡ãƒ¼ã‚¿ãŒæµã‚Œã¦ã„ã‚‹ã‚ˆã†ã ã€‚</p>
<p>&#160;</p>
<p>â–¼ä¸æ˜ãªã“ã¨</p>
<p>ãƒ»å‰å›ä¸æ˜ã ã£ãŸã“ã¨ãŒã¾ã ã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ãªã„ã€‚</p>
<blockquote>
<p>ãƒ»æœ€åˆã®èµ·å‹•æ™‚ã«ã€192.168.4.1 ã§ mode(3) ã®ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§èµ·å‹•ã—ã¦ãã‚‹ãŒã€ã“ã®ã¨ãã®wifi ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«å…¥ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ï¼Ÿ </p>
<p>ãƒ»EPS12 ãŒè¨­å®šã‚’çµ‚ãˆã‚Œã°ã€å®šæœŸé–“éš”ã§WEB ã‚µãƒ¼ãƒã‚’è¦‹ã«è¡ŒããŒã€ã“ã®å‡¦ç†ã¯ã©ã†ã‚„ã‚Œã°ã„ã„ã®ã‹ï¼Ÿ</p>
</blockquote>
<p>æœ€åˆã®éƒ¨åˆ†ã¯ã€ESP8266 ã®æŒ™å‹•ã‚’çŸ¥ã‚Œã°è§£æ±ºã§ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚wifi_set_opmode(3); ã‹ã‚‰ãƒªã‚¹ã‚¿ãƒ¼ãƒˆãŒã‹ã‹ã‚‹ã¨ãã®æŒ™å‹•ã¨ã„ã†ã‹ã€ã‚µãƒ³ãƒ—ãƒ«ã«ã‚ã‚‹WEBã‚µãƒ¼ãƒã®æŒ™å‹•ãŒã©ã†ãªã‚‹ã‹èª¿æŸ»ã™ã‚‹ã“ã¨ã«ã€‚</p>
<p>å¾Œè€…ã¯ã€æ¨æ¸¬ãªã®ã§ãªã‚“ã¨ã‚‚è¨€ãˆãªã„ã®ã§ã™ãŒã€ä»Šã®ã¨ã“ã‚ä»¥ä¸‹ã®ã‚ˆã†ã«è€ƒãˆã¦ã„ã¾ã™ã€‚</p>
<p>ãƒ»800&#215;600 ã®ç”»åƒã‚’.bm ã®å½¢å¼ã§ã‚¹ãƒˆãƒªãƒ¼ãƒ ã•ã›ã‚‹ã€‚png ã‚’ bm ã«å¤‰æ›ã•ã›ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸­ã®mkimg.php ãŒãã‚Œã§ã™ã€‚å‡ºåŠ›ç”»åƒã®éƒ¨åˆ†ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã•ã›ã‚Œã°ã„ã„ã‹ã¨ã€‚ã©ã‚“ãªhttpãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ã¤ã‘ã‚Œã°ã„ã„ã®ã§ã™ã‹ã­ï¼Ÿ</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">&lt;?php

//Small script to convert an 800x600 png into a .bm file the
//eink display can render from its internal espfs.

function convertImage($file, $out) {
    $im=imagecreatefrompng($file);
    $of=fopen($out, &quot;w&quot;);
    for ($y=0; $y&lt;600; $y++) {
        for ($x=0; $x&lt;800; $x+=8) {
            $b=0;
            for ($z=0; $z&lt;8; $z++) {
                $b&lt;&lt;=1;
                $c=imagecolorat($im, $x+$z, $y);
                if ((($c)&amp;0xff)&lt;0x80) $b|=1;
            }
            fprintf($of, &quot;%c&quot;, $b);
        }
    }
    imagedestroy($im);
    fclose($of);
}

convertImage(&quot;icons/apconnect.png&quot;, &quot;html/apconnect.bm&quot;);
//convertImage(&quot;â˜…ã‚½ãƒ¼ã‚¹ç”»åƒ&quot;, &quot;â˜…å‡ºåŠ›ç”»åƒ&quot;);

?&gt;</pre>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-1280" class="post-1280 post type-post status-publish format-standard hentry category-esp8266 category-espeink category-pcb category-sdk">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">æŠ•ç¨¿æ—¥: <a href="https://hack.gpl.jp/1280/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-09-28T01:49:32+09:00">2015å¹´9æœˆ28æ—¥</time></a> </span><span class="posted-on">æ›´æ–°æ—¥:2015å¹´9æœˆ28æ—¥</span> <span class="categories">  <a href="https://hack.gpl.jp/category/esp8266/" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="https://hack.gpl.jp/category/espeink/" rel="category tag noopener noreferrer" data-wpel-link="internal">espeink</a>, <a href="./../category/pcb.html" rel="category tag noopener noreferrer" data-wpel-link="internal">PCB</a>, <a href="./../category/sdk.html" rel="category tag noopener noreferrer" data-wpel-link="internal">sdk</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../ /1280.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">espeink ã®ç¾åœ¨ã®èª¿æŸ»çŠ¶æ³</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>ã¨ã‚Šã‚ãˆãšã€å•é¡Œç‚¹ã¨ãªã‚‹ãƒã‚¤ãƒ³ãƒˆãŒçµã‚Œã¦ãã¾ã—ãŸã€‚</p>
<p>è¨­å®šã‚’çµ‚ãˆã¦ã€å†åº¦èµ·å‹•ã™ã‚‹ã¨ãã«ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">deep sleep 60s

Ã¾Ã¡rl.lÂœÂ|.ÂŒlÃ |....ÂŒ.lÃ¬.b|ÂÂ‚.Ã¬.Â’rÂ’bÂŒ.bÂŒÃ²nnÂlnnÂœÃ¢Ã¬.b.pÂŒÂlrlrlpÃ²nÃ ....Â‚.l......b.nÃ¢|.ÂŒll..ÂbÂŒÃ²nnÃ®.lÂŒÂl`.Â..nn.l`...nrÂÂ’Â’n...lÂœ.lpÃ²nÃ ....rÂŒÂœÂœÃ¢Ã ....b.nÃ¢|.ÂŒÂŒÂ.Ã .bÂŒÃ²nnÃ®...l`.Â..nnlÂŒl`...nrÂÂ’Â’n..rÂŒÂ’`.`Ã²n...ÂÃ bÂ‚nlÂŒ.ÂŒÃ²nnÃ®..Â.lpÃ²nÃ ....rÂŒÂœÂœÃ¢Ã lÂ’..b.nÃ¢|.Ã¬Ã¬Ã¬ÂŒÂbÂŒÃ²nnÃ®.lÂŒ.l`.Â..nnlÂŒl`...nrÂÂ’Â’n..Â‚Ã²l`..rÂ’Â’n..Â‚Ã²l`.Ã¤r.Datasource http://192.168.1.17/server/espbm.php
mode : sta(18:fe:34:9b:99:a3)
add if0
scandone
add 0
aid 4
pm open phy_2,type:2 0 0
cnt 

connected with JunkHackAP, channel 6
dhcp client start...
ip:192.168.1.24,mask:255.255.255.0,gw:192.168.1.1
Wdt. This takes too long. Go to sleep.
rm match
pm close 7 0 0/19987670
deep sleep 60s

.Ã¡rl.lÂœÂ|.ÂŒlÃ |....ÂŒ.lÃ¬.b|ÂÂ‚.Ã¬.Â’rÂ’bÂŒ.bÂŒÃ²nnÂlnnÂœÃ¢Ã¬.b.pÂŒÂlrlrlpÃ²nÃ ....Â‚.l......b.nÃ¢|.ÂŒll..ÂbÂŒÃ²nnÃ®.lÂŒÂl`.Â..nn.l`...nrÂÂ’Â’n...lÂœ.lpÃ²nÃ ....rÂŒÂœÂœÃ¢Ã ....b.nÃ¢|.ÂŒÂŒÂ.Ã .bÂŒÃ²nnÃ®...l`.Â..nnlÂŒl`...nrÂÂ’Â’n..rÂŒÂ’`.`Ã²n...ÂÃ bÂ‚nlÂŒ.ÂŒÃ²nnÃ®..Â.lpÃ²nÃ ....rÂŒÂœÂœÃ¢Ã lÂ’..b.nÃ¢|.Ã¬Ã¬Ã¬ÂŒÂbÂŒÃ²nnÃ®.lÂŒ.l`.Â..nnlÂŒl`...nrÂÂ’Â’n..Â‚Ã²l`..rÂ’Â’n..Â‚Ã²l`.Ã¤r.Datasource http://192.168.1.17/server/espbm.php
mode : sta(18:fe:34:9b:99:a3)
add if0
scandone
add 0
aid 4
pm open phy_2,type:2 0 0
cnt 

connected with JunkHackAP, channel 6
dhcp client start...
ip:192.168.1.24,mask:255.255.255.0,gw:192.168.1.1
Wdt. This takes too long. Go to sleep.
rm match
pm close 7 0 0/19987656
deep sleep 60s

Ã¾Ã¡</pre>
<p>ã“ã‚Œã¯ã€DHCP ã§IP ã‚’å–å¾—ã™ã‚‹ã¾ãˆã«ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®URL ã‚’ãƒ•ã‚§ãƒƒãƒã—ã«ã„ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã€WiFi ã®ã‚³ãƒã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ãŒã‚¢ãƒœãƒ¼ãƒˆã—ã¦ã„ã‚‹ã®ã§ã€URLã«ã‚³ãƒã‚¯ãƒˆã—ã¦ã„ãªã„çŠ¶æ³ã§ã™ã€‚ã©ã†ã„ã†ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€æ¥µã¾ã‚Œã«ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã¨ããŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">deep sleep 60s

.Ã¡rl.lÂœÂ|.ÂŒlÃ |....ÂŒ.lÃ¬.b|ÂÂ‚.Ã¬.Â’rÂ’bÂŒ.bÂŒÃ²nnÂlnnÂœÃ¢Ã¬.b.pÃ¬ÂlrlrlpÃ²nÃ ....Â‚.l......b.nÃ¢|.Ã¬llÂÂÂbÂŒÃ²nnÃ®.lÂŒÂl`.Â..nn.l`...nrÂÂ’Â’n..Â’lÂ.lpÃ²nÃ ....rÂŒÂœÂœÃ¢Ã ....b.nÃ¢|.ÂŒ.ÂÂÂbÂŒÃ²nnÃ®...l`.Â..nnlÂŒl`...nrÂÂ’Â’n..Â‚ÂŒÂ.l`Ã²n...ÂÃ bÂ‚nlÂŒ.ÂŒÃ²nnÃ®..Â.lpÃ²nÃ ....rÂŒÂœÂœÃ¢Ã lÂŒ..b.nÃ¢|.Ã¬lÂ.Ã .bÂŒÃ²nnÃ®.lÂŒ.l`.Â..nnlÂŒl`...nrÂÂ’Â’n..Ã².Âœ.l.rÂ’Â’n..Ã².Âœ.lÃ¤rlDatasource http://192.168.1.17:8266/server/espbm.php
mode : sta(18:fe:34:9b:99:a3)
add if0
scandone
reconnect
scandone
reconnect
scandone
reconnect
scandone
reconnect
scandone
reconnect
scandone
reconnect
scandone
reconnect
scandone
reconnect
scandone
add 0
aid 4
pm open phy_2,type:2 0 0
cnt 

connected with JunkHackAP, channel 6
dhcp client start...
No heap available, failed to malloc 440
No heap available, failed to malloc 440
Wdt. This takes too long. Go to sleep.
rm match
pm close 7 0 0/10213903
No heap available, failed to malloc 440
del if0
usl
sul 0 0
deep sleep 60s

.Ã¡</pre>
<p>ç¾åœ¨ã¾ã§ã§ã€SDK ã¯ã¨ã‚Šã‚ãˆãšä»¥ä¸‹ã§èª¿æŸ»ã—ã¾ã—ãŸã€‚</p>
<table cellspacing="0" cellpadding="2" width="600" border="0">
<tbody>
<tr>
<td valign="top" width="99">SDK Version</td>
<td valign="top" width="104">makeå¯å¦</td>
<td valign="top" width="246">makeå•é¡Œç‚¹</td>
<td valign="top" width="83">å®Ÿéš›ã®æŒ™å‹•</td>
<td valign="top" width="68">å‚™è€ƒ</td>
</tr>
<tr>
<td valign="top" width="99">0.9.2</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">&#160;</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">0.9.3</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">&#160;</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">0.9.5</td>
<td valign="top" width="104">O</td>
<td valign="top" width="246">ãªã—</td>
<td valign="top" width="83">URL ãƒ•ã‚§ãƒƒãƒã—ãªã„</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">0.9.6_b1</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">unknown type name &#8216;uint32_t&#8217;<br />
        <br />unknown type name &#8216;uint16_t&#8217;</p>
<p>unknown type name &#8216;uint8_t&#8217;</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">cgiwifi.c<br />
        <br />io.h</td>
</tr>
<tr>
<td valign="top" width="99">1.0.0</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">åŒä¸Š</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">1.0.1b1</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">åŒä¸Š</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">1.0.1b2</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">åŒä¸Š</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">1.0.1</td>
<td valign="top" width="104">O</td>
<td valign="top" width="246">ãªã—</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">1.1.0</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">eink.c ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹<br />
        <br />os_update_cpu_frequency</p>
<p>ãŒã“ã®SDKã«ãªã„</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">v1.1.0_15_05_26</td>
</tr>
<tr>
<td valign="top" width="99">1.1.1</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">unknown type name &#8216;uint**_t&#8217;<br />
        <br />conflicting types for &#8216;os_random&#8217;</p>
<p></td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">user/cgiwifi.c<br />
        <br />user/io.h</p>
<p>include/espmissingincludes.h</td>
</tr>
<tr>
<td valign="top" width="99">1.1.2</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">åŒä¸Š</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">åŒä¸Š</td>
</tr>
<tr>
<td valign="top" width="99">1.2.0</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">åŒä¸Š</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">åŒä¸Š</td>
</tr>
<tr>
<td valign="top" width="99">1.3.0</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">&#160;</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
<tr>
<td valign="top" width="99">1.4.0</td>
<td valign="top" width="104">X</td>
<td valign="top" width="246">&#160;</td>
<td valign="top" width="83">&#160;</td>
<td valign="top" width="68">&#160;</td>
</tr>
</tbody>
</table>
<p>â€»éšæ™‚ã€æ›´æ–°äºˆå®šã€‚</p>
<p>&#160;</p>
<p>SDK ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ãŒã‚‹ã”ã¨ã«ã€å»ƒæ­¢ã•ã‚ŒãŸãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã£ãŸã‚Šã€å¼•æ•°ãŒå¤‰ã‚ã£ãŸã‚Šã—ãŸã‚‚ã®ãŒã‚ã£ãŸã‚Šã¨ã€ãã‚Œãªã‚Šã«å¯¾å¿œãŒå¿…è¦ãã†ã§ã™ã€‚ä½œè€…ã¯ãŠãã‚‰ãã€æ¨æ¸¬ã§ã™ãŒ0.9.5 ã‚ãŸã‚Šã§ä½œæˆã—ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p>&#160;</p>
<p>esp-open-sdk ã® makefile ã‚’è¦‹ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚ã‚Šã€ã¾ã è©¦ã™ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">VENDOR_SDK_ZIP_1.3.0 = esp_iot_sdk_v1.3.0_15_08_08.zip
VENDOR_SDK_DIR_1.3.0 = esp_iot_sdk_v1.3.0
VENDOR_SDK_ZIP_1.2.0 = esp_iot_sdk_v1.2.0_15_07_03.zip
VENDOR_SDK_DIR_1.2.0 = esp_iot_sdk_v1.2.0
VENDOR_SDK_ZIP_1.1.2 = esp_iot_sdk_v1.1.2_15_06_12.zip
VENDOR_SDK_DIR_1.1.2 = esp_iot_sdk_v1.1.2
VENDOR_SDK_ZIP_1.1.1 = esp_iot_sdk_v1.1.1_15_06_05.zip
VENDOR_SDK_DIR_1.1.1 = esp_iot_sdk_v1.1.1
VENDOR_SDK_ZIP_1.1.0 = esp_iot_sdk_v1.1.0_15_05_26.zip
VENDOR_SDK_DIR_1.1.0 = esp_iot_sdk_v1.1.0
# MIT-licensed version was released without changing version number
#VENDOR_SDK_ZIP_1.1.0 = esp_iot_sdk_v1.1.0_15_05_22.zip
#VENDOR_SDK_DIR_1.1.0 = esp_iot_sdk_v1.1.0
VENDOR_SDK_ZIP_1.0.1 = esp_iot_sdk_v1.0.1_15_04_24.zip
VENDOR_SDK_DIR_1.0.1 = esp_iot_sdk_v1.0.1
VENDOR_SDK_ZIP_1.0.1b2 = esp_iot_sdk_v1.0.1_b2_15_04_10.zip
VENDOR_SDK_DIR_1.0.1b2 = esp_iot_sdk_v1.0.1_b2
VENDOR_SDK_ZIP_1.0.1b1 = esp_iot_sdk_v1.0.1_b1_15_04_02.zip
VENDOR_SDK_DIR_1.0.1b1 = esp_iot_sdk_v1.0.1_b1
VENDOR_SDK_ZIP_1.0.0 = esp_iot_sdk_v1.0.0_15_03_20.zip
VENDOR_SDK_DIR_1.0.0 = esp_iot_sdk_v1.0.0
VENDOR_SDK_ZIP_0.9.6b1 = esp_iot_sdk_v0.9.6_b1_15_02_15.zip
VENDOR_SDK_DIR_0.9.6b1 = esp_iot_sdk_v0.9.6_b1
VENDOR_SDK_ZIP_0.9.5 = esp_iot_sdk_v0.9.5_15_01_23.zip
VENDOR_SDK_DIR_0.9.5 = esp_iot_sdk_v0.9.5
VENDOR_SDK_ZIP_0.9.4 = esp_iot_sdk_v0.9.4_14_12_19.zip
VENDOR_SDK_DIR_0.9.4 = esp_iot_sdk_v0.9.4
VENDOR_SDK_ZIP_0.9.3 = esp_iot_sdk_v0.9.3_14_11_21.zip
VENDOR_SDK_DIR_0.9.3 = esp_iot_sdk_v0.9.3
VENDOR_SDK_ZIP_0.9.2 = esp_iot_sdk_v0.9.2_14_10_24.zip
VENDOR_SDK_DIR_0.9.2 = esp_iot_sdk_v0.9.2</pre>
<p>0.9.5 ï½ 1.3.0 ã®é–“ã«ã¾ã ã‚ã‚‹ã®ã§ã€ãã‚Œã‚‰ã‚’ã¨ã‚Šã‚ãˆãšå…¨éƒ¨è©¦ã—ã¦ã¿ã‚ˆã†ã‹ã¨ã€‚</p>
<p>ã‚³ãƒ¼ãƒ‰ã®èª¿æŸ»ã—ã¦ã„ã‚‹éƒ¨åˆ†ã¯ã€</p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">---- user_main.c
::
    httpclientFetch(myConfig.url, httpclientCb, httpclientHdrCb);
    
    einkDisplay(24*1024, tcpEinkNeedData, einkDoneCb);
::</pre>
<p>ã§ã™ã€‚å¤å…¸çš„ã«ã€ãƒ‡ãƒãƒƒã‚¯ã«ã¯ã‚·ãƒªã‚¢ãƒ«ãƒ—ãƒªãƒ³ãƒˆã¨ delay ã‚’å…¥ã‚Œã¦ã„ã‚‹ã‚“ã§ã™ãŒã€ã‚³ãƒã‚¯ãƒˆã—ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ˆãã‚ã‹ã‚‰ãšã€ä¸€ä½“ã©ã“ã§ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«æ¥ç¶šã—ã¦ã€dhcp ã—ã¦IP ã‚’ã‚‚ã‚‰ã£ã¦ã„ã‚‹ã®ã‹ãŒè‰¯ãã‚ã‹ã£ã¦ã„ã¾ã›ã‚“ã€‚ã“ã®ã‚ãŸã‚Šã¯ã€C ã®ãƒ‡ãƒãƒƒã‚¯ãƒ‡ãƒƒã‚¯ãƒ‹ãƒƒã‚¯ã®ã‚¹ã‚­ãƒ«ã ã¨æ€ã„ã¾ã™ãŒã€ã‚‚ã£ã¨åŠ¹ç‡çš„ãªã‚‚ã®ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã­ã€‚</p>
<p>&#160;</p>
<p>åŸç†çš„ã«ã€deep sleep ã‹ã‚‰å¾©å¸°ã—ãŸã‚‰ã€ã¾ãšã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«ã‚³ãƒã‚¯ãƒˆã—ã€IP ã‚’ã‚²ãƒƒãƒˆã™ã‚‹ã¾ã§ delay ã•ã›ã¦ã‹ã‚‰ãƒ•ã‚§ãƒƒãƒã—ãŸã„ã‚“ã§ã™ãŒã€ãã®delay ã‚’å…¥ã‚Œã‚‹ã¨ã“ã‚ãŒã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã€‚</p>
<p>&#160;</p>
<p>ã‚‚ã†å°‘ã—ã€ç°¡å˜ãªã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«æ¥ç¶šã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦è©¦ã—ã¦ã¿ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚éƒ¨å“ã¨ãƒ—ãƒªãƒ³ãƒˆåŸºæ¿ã‚’ç™ºæ³¨ã—ã‚ˆã†ã¨è€ƒãˆã¦ã„ãŸã‚“ã§ã™ãŒã€ã‚‚ã†å°‘ã—ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª¿æŸ»ã—ãªã„ã¨å‹•ä½œã—ãªã•ãã†ãªã®ã§ã€æ¥é€±ä»¥é™ã«ç™ºæ³¨ã¯æŒã¡è¶Šã—ã«ãªã‚Šãã†ã§ã™ã€‚httpã®tcp çµŒç”±ã˜ã‚ƒãªãã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆespfsï¼‰ã«å«ã¾ã‚Œã‚‹.bm ãƒ•ã‚¡ã‚¤ãƒ«ã¯è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ„Ÿã˜ãªã®ã§ã€è¡¨ç¤ºã™ã‚‹ã“ã¨ã¯ã§ããã†ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p>
<p>&#160;</p>
<p>ã•ãã€ã©ã“ã¾ã§æ ¹æ°—ãŒç¶šãã‹ã§ã™ã€‚hack ã¨ã¯æ ¹æ°—ãŒã„ã‚‹ã‚‚ã®ã§ã™ã­ã€‚æ¨ç†ã¨å®Ÿé¨“ã‚’ç¹°ã‚Šè¿”ã—ã€ï¼‘ã¤ã¥ã¤å•é¡Œã‚’æŠŠæ¡ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ãŒã€å•é¡Œã‚’åˆ†è§£ã™ã‚‹ã®ã«ã‚¹ã‚­ãƒ«ãŒè¶³ã‚Šã¦ã„ãªã„éƒ¨åˆ†ã¯éƒ½åº¦ã€å‹‰å¼·ã—ãªãŒã‚‰ã¨ãªã‚‹ã®ã§ã€æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</p>
<p>ä»Šã®ã¨ã“ã‚ã€ã“ã®hack ã§å‹‰å¼·ã«ãªã£ãŸã®ã¯ã€åŸºæ¿ã‚’è¨­è¨ˆã—ãŠå€¤æ‰“ã¡ã«ä½œæˆã™ã‚‹æ–¹æ³•ã€open-sdk ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã“ã¨ã€esptool ã«ã¯python ç‰ˆã¨ C ç‰ˆãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p>
<p>&#160;</p>
<p>â–¼ã¾ã¨ã‚</p>
<p>ãƒ»ä½œè€…ã¯ãŠãã‚‰ãã€0.9.5 ã‹ 1.0.1ã®SDK ã‚’ä½¿ã£ã¦ã„ãŸã¨æ¨æ¸¬ã€‚</p>
<p>ãƒ»esphttpd ã¯ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ãŒãŠãã‚‰ãä»¥ä¸‹</p>
<p><a title="https://github.com/OLIMEX/ESP8266/tree/master/esphttpd" href="https://github.com/OLIMEX/ESP8266/tree/master/esphttpd" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/OLIMEX/ESP8266/tree/master/esphttpd<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ãƒ»ãã—ã¦ã€æœ€æ–°ã®SDKãªã©ã«ã‚ã‚ã›ã¦æ–°ã—ããªã£ãŸã‚‚ã®ãŒä»¥ä¸‹ã«ã‚ã‚‹</p>
<p><a title="https://github.com/izhak2/esphttpd" href="https://github.com/izhak2/esphttpd" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/izhak2/esphttpd<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>ãƒ»ã“ã®å˜ä½“ã‚’ã¾ãšè©¦ã—ã¦ã¿ã‚ˆã†ã¨æ€ã†ã€‚ç‰¹ã«ã€æ–°ã—ã„esphttpd ã¯ Makefile ã®æ›¸ãæ–¹ãŒå‚è€ƒã«ãªã‚‹ã—ã€æ–°ã—ã„SDKã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€‚</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
			
		
		</main><!-- #main -->
	</section><!-- #primary -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer wrap" role="contentinfo">
		<div class="site-info">
			Copyleft - all rights reversed.
			<span class="sep"> | </span>
			JunkHack 2011 - 2021
			<span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">é‹å–¶è€…æƒ…å ±<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/sendmail/" data-wpel-link="internal" rel="noopener noreferrer">ãŠå•ã„åˆã‚ã›<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/privacy/" data-wpel-link="internal" rel="noopener noreferrer">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼<span class="gf"></a>
		</div><!-- .site-info -->

	</footer><!-- #colophon -->
</div><!-- #page -->

        <div id="wpfront-scroll-top-container">
            <img src="./../images/1.png" alt="" />        </div>
                <script type="text/javascript">
            function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();
        </script>
        <script type='text/javascript' src='./../js/core.min.js' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='./../js/menu.min.js' id='jquery-ui-menu-js'></script>
<script type='text/javascript' src='./../js/wp-polyfill.min.js' id='wp-polyfill-js'></script>
<script type='text/javascript' id='wp-polyfill-js-after'>
( 'fetch' in window ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-fetch.min.js?ver=3.0.0"></scr' + 'ipt>' );( document.contains ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-node-contains.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.DOMRect ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-dom-rect.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.URL && window.URL.prototype && window.URLSearchParams ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-url.min.js?ver=3.6.4"></scr' + 'ipt>' );( window.FormData && window.FormData.prototype.keys ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-formdata.min.js?ver=3.0.12"></scr' + 'ipt>' );( Element.prototype.matches && Element.prototype.closest ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-element-closest.min.js?ver=2.0.2"></scr' + 'ipt>' );( 'objectFit' in document.documentElement.style ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-object-fit.min.js?ver=2.3.4"></scr' + 'ipt>' );
</script>
<script type='text/javascript' src='./../js/dom-ready.min.js' id='wp-dom-ready-js'></script>
<script type='text/javascript' src='./../js/hooks.min.js' id='wp-hooks-js'></script>
<script type='text/javascript' src='./../js/i18n.min.js' id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
</script>
<script type='text/javascript' id='wp-a11y-js-translations'>
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2021-05-20 01:00:08+0000","generator":"GlotPress\/3.0.0-alpha.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"Notifications":["\u901a\u77e5"]}},"comment":{"reference":"wp-includes\/js\/dist\/a11y.js"}} );
</script>
<script type='text/javascript' src='./../js/a11y.min.js' id='wp-a11y-js'></script>
<script type='text/javascript' id='jquery-ui-autocomplete-js-extra'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002","oneResult":"1\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","manyResults":"%d\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","itemSelected":"\u9805\u76ee\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u3002"};
/* ]]> */
</script>
<script type='text/javascript' src='./../js/autocomplete.min.js' id='jquery-ui-autocomplete-js'></script>
<script type='text/javascript' src='./../js/wpfront-scroll-top.min.js' id='wpfront-scroll-top-js'></script>
<script type='text/javascript' src='./../js/hew.js' id='hew-scripts-js'></script>
<script type='text/javascript' src='./../js/navigation.js' id='hew-navigation-js'></script>
<script type='text/javascript' src='./../js/skip-link-focus-fix.js' id='hew-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='./../js/wp-embed.min.js' id='wp-embed-js'></script>

</body>
</html>

<!--This file was exported by "Export WP Page to Static HTML" plugin which created by ReCorp (https://myrecorp.com) -->