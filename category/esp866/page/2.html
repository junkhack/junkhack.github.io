<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://hack.gpl.jp/xmlrpc.php">

<title>ESP8266 &#8211; ページ 2 &#8211; JunkHack</title>
<style type="text/css">.wpfts-result-item .wpfts-smart-excerpt {}.wpfts-result-item .wpfts-not-found {color:#808080;font-size:0.9em;}.wpfts-result-item .wpfts-score {color:#006621;font-size:0.9em;}.wpfts-shift {margin-left:40px;}.wpfts-result-item .wpfts-download-link {color:#006621;font-size:0.9em;}.wpfts-result-item .wpfts-file-size {color:#006621;font-size:0.9em;}</style><meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//hack.gpl.jp' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; フィード" href="https://hack.gpl.jp/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; コメントフィード" href="https://hack.gpl.jp/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="JunkHack &raquo; ESP8266 カテゴリーのフィード" href="https://hack.gpl.jp/category/esp8266/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/hack.gpl.jp\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' href='./../../../css/dist-block-library-style.min.css'>
<link rel='stylesheet' href='./../../../css/export-wp-page-to-static-html-pro-premium-public-css-export-wp-page-to-static-html-public.css'>
<link rel='stylesheet' href='./../../../css/fulltext-search-style-wpfts_autocomplete.css'>
<link rel='stylesheet' href='./../../../css/wp-external-links-public-css-wpel.css'>
<link rel='stylesheet' href='./../../../css/wpfront-scroll-top-css-wpfront-scroll-top.min.css'>
<link rel='stylesheet' href='./../../../css/ccrw_related-css-frontend-style.css'>
<link rel='stylesheet' id='hew-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CNoto+Serif%3A400%2C700%2C400italic%2C700italic&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' href='./../../../css/hew-wpcom-genericons-genericons.css'>
<link rel='stylesheet' href='./../../../css/hew-wpcom-style.css'>
		<script>
			/* <![CDATA[ */
			var rcewpp = {
				"ajax_url":"https://hack.gpl.jp/wp-admin/admin-ajax.php",
				"nonce": "4eef5ded05",
				"home_url": "https://hack.gpl.jp/",
				"settings_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings.png',
				"settings_hover_icon": 'https://hack.gpl.jp/wp-content/plugins/export-wp-page-to-static-html-pro-premium/admin/images/settings_hover.png'
			};
			/* ]]\> */
		</script>
		<script type='text/javascript' src='./../../../js/jquery-3.5.1.min.js' id='jquery-core-js'></script>
<script type='text/javascript' src='./../../../js/jquery-migrate-3.3.0.min.js' id='jquery-migrate-js'></script>
<script type='text/javascript' src='./../../../js/export-wp-page-to-static-html-public.js' id='export-wp-page-to-static-html-js'></script>
<script type='text/javascript' src='./../../../js/wpfts_frontend.js' id='wpfts_frontend-js'></script>
<link rel="https://api.w.org/" href="https://hack.gpl.jp/wp-json/" /><link rel="alternate" type="application/json" href="https://hack.gpl.jp/wp-json/wp/v2/categories/30" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://hack.gpl.jp/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://hack.gpl.jp/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.7.2" />
<script type="text/javascript">
		document.wpfts_ajaxurl = "https://hack.gpl.jp/wp-admin/admin-ajax.php";
	</script>				<style id="uagb-style-conditional-extension">@media (min-width: 1025px){body .uag-hide-desktop.uagb-google-map__wrap,body .uag-hide-desktop{display:none}}@media (min-width: 768px) and (max-width: 1024px){body .uag-hide-tab.uagb-google-map__wrap,body .uag-hide-tab{display:none}}@media (max-width: 767px){body .uag-hide-mob.uagb-google-map__wrap,body .uag-hide-mob{display:none}}</style>
			<script data-ad-client="ca-pub-2711753458083215" async src="./../../../js/adsbygoogle.js"></script>
</head>

<script async src="./../../../js/6892.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-13YWDXYQE2');
</script>
<body class="archive paged category category-esp8266 category-30 paged-2 category-paged-2 has-sidebar">
<div id="page" class="hfeed site">
		<div id="widgets-wrapper" class="hide">
		
<div id="secondary" class="wrap top-widget-area" role="complementary">
	
	
	
		<div id="sidebar-4" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://hack.gpl.jp/">
				<label>
					<span class="screen-reader-text">検索:</span>
					<input type="search" class="search-field" placeholder="検索&hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="検索" />
			</form></aside>	</div><!-- #four .widget-area -->
	</div><!-- #secondary -->
	</div>
	
	<a class="skip-link screen-reader-text" href="">コンテンツへ移動</a>

	<header id="masthead" class="site-header" role="banner">
		<a class="site-logo" href="./index.html" title="JunkHack" rel="home noopener noreferrer" data-wpel-link="internal">
<img src="images/7005.jpg" width="80" height="80" alt="" class="no-grav header-image" />
</a>
		<div class="site-branding">
			<h1 class="site-title"><a href="./../../../index.html" rel="home noopener noreferrer" data-wpel-link="internal">JunkHack</a></h1>
			<h2 class="site-description">アリエクでポチった JUNKHACK</h2>
		</div>

					<nav id="site-navigation" class="main-navigation" role="navigation">
				<button class="menu-toggle toggle-button"><span class="screen-reader-text">メインメニュー</span></button>
				<div class="menu-new-menu-container"><ul id="menu-new-menu" class="menu"><li id="menu-item-9578" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9578"><a href="./../../../index-list.html" data-wpel-link="internal" rel="noopener noreferrer">List</a></li>
<li id="menu-item-9594" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9594"><a href="./../../../status.html" data-wpel-link="internal" rel="noopener noreferrer">Status</a></li>
</ul></div>			</nav><!-- #site-navigation -->
		
		
				<div class="toggle-wrapper">
			<a href="" class="widgets-toggle toggle-button" title="ウィジェット">
				<span class="screen-reader-text">ウィジェット</span>
			</a>
		</div>
		
	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">カテゴリー: <span>ESP8266</span></h1>			</header><!-- .page-header -->

						
				
<article id="post-942" class="post-942 post type-post status-publish format-standard hentry category-esp8266">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="./../../../942.html" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-08-09T13:53:52+09:00">2015年8月9日</time></a> </span><span class="posted-on">更新日:2015年8月9日</span> <span class="categories">  <a href="./../../../category/esp8266.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /942.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">ESP12 ファームウエア</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>前からやりたかったんですが、後回しになっていたESP8266(ESP-12) のファームウェアの書き換えです。</p>
<p>いろんなところで紹介されているので、いまさらですが、忘れてしまうためにメモしておきます。</p>
<p>&#160;</p>
<p>2014.08.09 現在で、オフィシャルのファームウェアは、以下のようです。昨日リリースですか！</p>
<blockquote>
<p>Latest Version 1.3.0 Release date Aug 08, 2015</p>
</blockquote>
<p>解答すると、以下のようなバイナリがあります。</p>
<blockquote>
<p>$ cd esp8266/esp_iot_sdk_v1.3.0_15_08_08/esp_iot_sdk_v1.3.0/bin</p>
<p>$ tree      <br />.       <br />├── at       <br />│&#160;&#160; ├── eagle.flash.bin       <br />│&#160;&#160; ├── eagle.irom0text.bin       <br />│&#160;&#160; ├── readme.txt       <br />│&#160;&#160; ├── user1.1024.new.2.bin       <br />│&#160;&#160; └── user2.1024.new.2.bin       <br />├── blank.bin       <br />├── boot_v1.2.bin       <br />├── boot_v1.4(b1).bin       <br />├── esp_init_data_default.bin       <br />└── upgrade </p>
<p>2 directories, 9 files</p>
</blockquote>
<p>購入したときには、0.9.5あたりが入っていた記憶があります。（未確認）そのときは、確か、あまり確認もせずに、arduino IDE for ESP8266 から書き込んだのでどうなっていたかわかりませんが、再度、オフィシャルから見てみました。</p>
<p>&#160;</p>
<p>このあたりは、オフィシャルのBBSを見たほうがいいです。結構なスピードでSDK のバージョンがあがっています。</p>
<blockquote>
<p>Espressif / ESP8266 / Developer Zone /&#160; Downloads / SDKs</p>
<p><a title="http://bbs.espressif.com/viewforum.php?f=46" href="http://bbs.espressif.com/viewforum.php?f=46" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewforum.php?f=46<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>とりあえず、0.9.5 をもう一度入れて復習しておきます。BBS からSDK のesp_iot_sdk_v0.9.5_15_01_23を落として解凍してみました。</p>
<blockquote>
<p>$ cd esp_iot_sdk_v0.9.5_15_01_23/esp_iot_sdk_v0.9.5/bin</p>
<p>$ tree     <br />.      <br />├── at      <br />│&#160;&#160; ├── readme.txt      <br />│&#160;&#160; ├── user1.512.new.bin      <br />│&#160;&#160; ├── user1.512.old.bin      <br />│&#160;&#160; ├── user2.512.new.bin      <br />│&#160;&#160; └── user2.512.old.bin      <br />├── blank.bin      <br />├── boot_v1.1.bin      <br />├── boot_v1.2.bin      <br />├── esp_init_data_default.bin      <br />└── upgrade</p>
</blockquote>
<p>GPIO0 Pin をGND に落としてBoot して、（もしくは、RST を GND に落としリセットして）以下のコマンドで書き込みます。</p>
<blockquote>
<p>$ esptool.py -p /dev/tty.SLAB_USBtoUART write_flash 0x00000 boot_v1.2.bin 0x01000 at/user1.512.new.bin 0x3e000 blank.bin 0x7e000 blank.bin</p>
<p>※-p オプションの UART デバイスはお使いのものを</p>
</blockquote>
<p>無事書き込みできると、以下のようになります。</p>
<blockquote>
<p>Connecting&#8230;     <br />Erasing flash&#8230;      <br />Writing at 0x00000400&#8230; (100 %)      <br />Erasing flash&#8230;      <br />Writing at 0x00034800&#8230; (100 %)      <br />Erasing flash&#8230;      <br />Writing at 0x0003ec00&#8230; (100 %)      <br />Erasing flash&#8230;      <br />Writing at 0x0007ec00&#8230; (100 %) </p>
<p>Leaving&#8230;</p>
</blockquote>
<p>CoolTerm などからUART 経由でログインし、115200 bps で接続すると、以下のようなコマンドの結果が返ってくればOKだと思います。</p>
<blockquote>
<p>AT     <br />OK       <br />AT+GMR       <br />AT version:0.21.0.0       <br />SDK version:0.9.5       <br />OK       <br />AT+RST       <br />OK </p>
<p> ets Jan&#160; 8 2013,rst cause:4, boot mode:(3,7)      <br />wdt reset       <br />load 0x40100000, len 816, room 16       <br />tail 0       <br />chksum 0x8d       <br />load 0x3ffe8000, len 788, room 8       <br />tail 12       <br />chksum 0xcf       <br />ho 0 tail 12 room 4       <br />load 0x3ffe8314, len 288, room 12       <br />tail 4       <br />chksum 0xcf       <br />csum 0xcf       <br />2nd boot version : 1.2&#160; <br />&#160; SPI Speed&#160;&#160;&#160;&#160;&#160; : 40MHz&#160; <br />&#160; SPI Mode&#160;&#160;&#160;&#160;&#160;&#160; : QIO&#160; <br />&#160; SPI Flash Size : 4Mbit       <br />jump to run user1       <br />rlNÿ       <br />ready</p>
</blockquote>
<p>ATコマンドのドキュメントは、SDK のドキュメントの中のPDFにあるか、または、初版はオフィシャルBBSの以下にあります。</p>
<blockquote>
<p>at_v0.20_14_11_28     <br /><a title="http://bbs.espressif.com/viewtopic.php?f=5&amp;t=64" href="http://bbs.espressif.com/viewtopic.php?f=5&amp;t=64" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewtopic.php?f=5&amp;t=64<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>さて、ESP-12 モジュールはどこまでこのファームウェアを上げれるのでしょうか？今や、技適が通った、ESP-13 や Pin数が増えたESP-12E などがあり、いまいち、違いが見えてきません。SDK 1.2 からは、mesh network ができるようになった模様です。また、patch で SSL もサポートされたようです。   <br /> 2015/08/08 にリリースされた、SDK には、以下のように2種類のファームウェアがあります。</p>
<blockquote>
<p>$ cd esp_iot_sdk_v1.3.0_15_08_08/esp_iot_sdk_v1.3.0/bin     <br />$ tree      <br />.      <br />├── at      <br />│&#160;&#160; ├── eagle.flash.bin      <br />│&#160;&#160; ├── eagle.irom0text.bin      <br />│&#160;&#160; ├── readme.txt      <br />│&#160;&#160; ├── user1.1024.new.2.bin      <br />│&#160;&#160; └── user2.1024.new.2.bin      <br />├── blank.bin      <br />├── boot_v1.2.bin      <br />├── boot_v1.4(b1).bin      <br />├── esp_init_data_default.bin      <br />└── upgrade </p>
<p>2 directories, 9 files</p>
</blockquote>
<p>ReadMe を見ると以下のようです。</p>
<blockquote>
<p>download: </p>
<p>boot_v1.2+.bin&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0x00000 </p>
<p>user1.1024.new.2.bin&#160;&#160;&#160;&#160;&#160; 0x01000 </p>
<p>blank.bin&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0x7e000 &amp; 0xfe000 </p>
<p>or </p>
<p>eagle.flash.bin&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0x00000 </p>
<p>eagle.irom0text.bin&#160;&#160;&#160; 0x40000 </p>
<p>blank.bin&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0x7e000 &amp; 0xfe000 </p>
<p>*NOTICE*: </p>
<p>1.If you use Esp Flash Download Tool, please MAKE SURE to choose FLASH SIZE to 8Mbit. </p>
<p>2.UPDATE is not supported in non-boot mode </p>
<p>Update steps </p>
<p>1.Make sure TE(terminal equipment) is in sta or sta+ap mode </p>
<p>ex. AT+CWMODE=3 </p>
<p>&#160;&#160;&#160; OK </p>
<p>&#160;&#160;&#160; AT+RST </p>
<p>2.Make sure TE got ip address </p>
<p>ex. AT+CWJAP=&quot;ssid&quot;,&quot;12345678&quot; </p>
<p>&#160;&#160;&#160; OK </p>
<p>&#160;&#160;&#160; AT+CIFSR </p>
<p>&#160;&#160;&#160; 192.168.1.134 </p>
<p>3.Let&#8217;s update </p>
<p>ex. AT+CIUPDATE </p>
<p>&#160;&#160;&#160; +CIPUPDATE:1&#160;&#160;&#160; found server </p>
<p>&#160;&#160;&#160; +CIPUPDATE:2&#160;&#160;&#160; connect server </p>
<p>&#160;&#160;&#160; +CIPUPDATE:3&#160;&#160;&#160; got edition </p>
<p>&#160;&#160;&#160; +CIPUPDATE:4&#160;&#160;&#160; start start </p>
<p>&#160;&#160;&#160; OK </p>
<p>note. If there are mistakes in the updating, then break update and print ERROR.</p>
</blockquote>
<p>or とあるこの、eagle.*** というのが良くわかりません。これは何者でしょうかね？   <br />とりあえず、このESP-12 は5つあるので全部壊すつもりで、いろいろ試してみるつもりです。技適が通ったタイプも価格がこなれてきたら、遊んでみようかと思います。IoT デバイスのDIY モジュールとしてこれからも活躍しそうですね。</p>
<p>&#160;</p>
<p> さらに情報収集し、このあたりのBlog 記事には、面白いことが書いてありました。</p>
<blockquote>
<p>Latest AT Firmware for ESP8266 with 512k Flash _ Kacang Bawang</p>
<p><a title="http://kacangbawang.com/latest-at-firmware-for-esp8266-with-512k-flash/" href="http://kacangbawang.com/latest-at-firmware-for-esp8266-with-512k-flash/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://kacangbawang.com/latest-at-firmware-for-esp8266-with-512k-flash/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>SDK1.0.1 以降は、バイナリサイズが512kb に収まるには大きすぎるようで、esp-open-sdk で自前でビルドするのがいいよとのこと。そのほかも、いろいろと有益なことや、奇妙な書き込み順を帰ると出来ることなど書いてあります。</p>
<p>&#160;</p>
<p>フラッシュのID というのをesptool でゲットできるそうで、やってみました。GPIO0 を GND に落として、次のコマンドを投げると</p>
<blockquote>
<p>$ esptool.py -p /dev/tty.SLAB_USBtoUART flash_id</p>
</blockquote>
<p>自分のESP-12 環境では、以下のように出ました。</p>
<blockquote>
<p>Connecting&#8230;     <br />Manufacturer: ef      <br />Device: 4016</p>
</blockquote>
<p>これはどうやら、メーカーコードと使用チップのようです。SPI のフラッシュメモリーで、この例だと、WINBOND のW25Q32 のようです。</p>
<p><a title="http://code.coreboot.org/svn/flashrom/trunk/flashchips.h" href="http://code.coreboot.org/svn/flashrom/trunk/flashchips.h" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://code.coreboot.org/svn/flashrom/trunk/flashchips.h<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>/*   <br /> * W25X chips are SPI, first byte of device ID is memory type, second    <br /> * byte of device ID is related to log(bitsize).    <br /> */    <br />#define WINBOND_NEX_ID&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0xEF&#160;&#160;&#160; /* Winbond (ex Nexcom) serial flashes */    <br />#define WINBOND_NEX_W25X10&#160;&#160;&#160; 0x3011    <br />#define WINBOND_NEX_W25X20&#160;&#160;&#160; 0x3012    <br />#define WINBOND_NEX_W25X40&#160;&#160;&#160; 0x3013    <br />#define WINBOND_NEX_W25X80&#160;&#160;&#160; 0x3014    <br />#define WINBOND_NEX_W25X16&#160;&#160;&#160; 0x3015    <br />#define WINBOND_NEX_W25X32&#160;&#160;&#160; 0x3016    <br />#define WINBOND_NEX_W25X64&#160;&#160;&#160; 0x3017    <br />#define WINBOND_NEX_W25Q40_V&#160;&#160;&#160; 0x4013&#160;&#160;&#160; /* W25Q40BV; W25Q40BL (2.3-3.6V) */    <br />#define WINBOND_NEX_W25Q80_V&#160;&#160;&#160; 0x4014&#160;&#160;&#160; /* W25Q80BV */    <br />#define WINBOND_NEX_W25Q16_V&#160;&#160;&#160; 0x4015&#160;&#160;&#160; /* W25Q16CV; W25Q16DV */    <br />#define WINBOND_NEX_W25Q32_V&#160;&#160;&#160; 0x4016★&#160;&#160;&#160; /* W25Q32BV; W25Q32FV in SPI mode (default) */</p>
<p>&#160;</p>
<p>このデータシートは、以下のようで、32M-bit / 4M-byte ( 4,194,304 )あるそうですが？512Kbじゃないの？   <br /><a title="http://www.marthel.pl/katalog/W25Q80_16_32c.pdf" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.marthel.pl/katalog/W25Q80_16_32c.pdf#page=18<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>うーん、そうだとしたら、うれしい誤算です。ちょっと未確認なので、512Kb ～ 4Mb あるかもというスタンスでこれから意識してみます。   </p>
<p>まとめ    </p>
<p>・esptool.py か、オフィシャルの書き込みツールを使ってファームをあげる    <br />・書き込みには、GPIO0 をGND に落とす（ and RST を GND でもいいようです）    <br /> おそらく、ブート時にGPIO0 が GND に落ちていればいいので、タイミングを逃せば、RST でもいいということかと理解。    <br />・書き込みには、高品質な電源で、3.3V を供給するようにすると幸せ（ピーク電流が結構多い）    <br />・ESP-12 では、esp_iot_sdk_v0.9.5_15_01_23 は動作した    <br />・最新のファームウェアは、オフィシャルBBS を見ると詳しい    <br />・自分のデバイスのフラッシュメモリはいくつ？ esptool.py&#160; のflash_id で見てみる    <br />・オフィシャルのファームはESP-12 だとどこまで上げれるのか？ フラッシュメモリサイズに依存しそうな感じ（未確認）    <br />・esp-open-sdk を使って、自前でファームを作ることが可能    <br />・オフィシャルのファームバージョンsdk_v1.3.0_15_08_08 に２つ組み合わせがあるのはなぜ？    </p>
<blockquote>
<p>参考</p>
<p>ともの技術メモ tag esp8266     <br /><a title="http://tomono.eleho.net/tag/esp8266/" href="http://tomono.eleho.net/tag/esp8266/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://tomono.eleho.net/tag/esp8266/<span class="wpel-icon wpel-image wpel-icon-1"></span></a>      </p>
<p>技適OKな中華IoTモジュールを使いこなす _ BRILLIANTSERVICE TECHNICAL BLOG      <br /><a title="http://bril-tech.blogspot.jp/2015/07/okiot.html" href="http://bril-tech.blogspot.jp/2015/07/okiot.html" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bril-tech.blogspot.jp/2015/07/okiot.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-953" class="post-953 post type-post status-publish format-standard hentry category-esp8266">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/953/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-08-12T00:54:52+09:00">2015年8月12日</time></a> </span><span class="posted-on">更新日:2015年8月12日</span> <span class="categories">  <a href="./../../../category/esp8266.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /953.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">ESP-12のファームウェアをv1.3.0 に</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>オフィシャルのツールがWindows のexe だったので、バーチャルボックスでインストール。</p>
<blockquote>
<p>Flash download tool Vsersion:v1.2</p>
<p><a title="http://bbs.espressif.com/viewtopic.php?f=57&amp;t=433" href="http://bbs.espressif.com/viewtopic.php?f=57&amp;t=433" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://bbs.espressif.com/viewtopic.php?f=57&amp;t=433<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>DETECTED INFO に 32Mbit って出てました。前回、調査したように、やはりESP-12 には、32M-bit / 4M-byte ( 4,194,304 )あるようです。今まで、512Kb でもarduino とかと比べると、おおーたくさんあるねと思っていましたが、それの4倍です。ちょっと得した気分ですね。クリスタルは26Mhz のようです。</p>
<p><img loading="lazy" title="GW-20150812-000341" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="GW-20150812-000341" src="./../../../images/gw20150812000341.jpg" width="455" height="640" /> で、書き込みして、AP に接続できるようにしてリセットかけてみました。ちゃんとフラッシュに設定は保存されて、バージョンも1.3.0 になっていました。UART の都合上、Windows のCoolTerm で接続テストはやりました。</p>
<p><img loading="lazy" title="GW-20150812-000919" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="GW-20150812-000919" src="./../../../images/gw20150812000919.jpg" width="589" height="682" /> </p>
<p>あと、マニュアルのP.55 に 前からできるみたいなんだけども、UART-WiFi passthrough modeというのがあって、WiFi経由でシリアルにパススルーできるようです。osx 側の nc は brew で netcat を入れています。osx のだとオプションが通らないので。</p>
<p><img loading="lazy" title="CoolTerm_0_と_ishizaka_—_ESP8266_—_netcat_—_ttys000_と_名称未設定" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="CoolTerm_0_と_ishizaka_—_ESP8266_—_netcat_—_ttys000_と_名称未設定" src="./../../../images/coolterm_0__ishizaka__esp8266__netcat__ttys000__.png" width="618" height="874" /> </p>
<p>この設定は、フラッシュに保存されないようなのですが、IP と Port を打ち込めるようなものをESP側に付ければ、WiFi 経由でシリアルを操れることになりますね。これを、単機能にしてESPのAP に接続しにきたものをシリアルに流すだけのファームが透過のブリッジのファームウェアの原理なのかも。このあたりは、次回以降実験してみたいと思います。</p>
<p>あ、あとWEBにもオフィシャルのAT コマンド（ちょっと古いけど）があったので、メモ。</p>
<blockquote>
<p>CIPMODE</p>
<p><a title="https://github.com/espressif/esp8266_at/wiki/CIPMODE" href="https://github.com/espressif/esp8266_at/wiki/CIPMODE" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/espressif/esp8266_at/wiki/CIPMODE<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>ま、とりあえずフラッシュが４Mあって、SDK1.3も書き込めるということがわかったのでとりあえず今日はここまで。   </p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-962" class="post-962 post type-post status-publish format-standard hentry category-esp8266 category-raspberry-pi">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/962/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-08-16T03:34:06+09:00">2015年8月16日</time></a> </span><span class="posted-on">更新日:2015年8月16日</span> <span class="categories">  <a href="./../../../category/esp8266.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/raspberry-pi.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Raspberry Pi</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /962.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">ESP-12でraspi2のシリアルコンソールをWiFi化</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>前から、興味があった透過型のUARTーWiFIブリッジ的に使う方法をあれこれ試していました。</p>
<p>結論から言えば、出来ました。</p>
<p>こんな感じで、電源はRasPi2 から取っていますので蓋の中に収められそうです。</p>
<p> <img loading="lazy" title="uart-wifi" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="uart-wifi" src="./../../../images/uartwifi.jpg" width="640" height="480" />   </p>
<p>ESP-12 に収めるプログラムは、なんとサンプルスケッチの中にありました。WiFiTelnetToSerial です。   </p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">/* 
  WiFiTelnetToSerial - Example Transparent UART to Telnet Server for esp8266

  Copyright (c) 2015 Hristo Gochkov. All rights reserved.
  This file is part of the ESP8266WiFi library for Arduino environment.
 
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation; either
  version 2.1 of the License, or (at your option) any later version.

  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.

  You should have received a copy of the GNU Lesser General Public
  License along with this library; if not, write to the Free Software
  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
*/
#include &lt;ESP8266WiFi.h&gt;

//how many clients should be able to telnet to this ESP8266
#define MAX_SRV_CLIENTS 1
const char* ssid = &quot;yyyyy&quot;;
const char* password = &quot;xxxxx&quot;;

WiFiServer server(23);
WiFiClient serverClients[MAX_SRV_CLIENTS];

void setup() {
  Serial1.begin(115200);
  WiFi.begin(ssid, password);
  Serial1.print(&quot;\nConnecting to &quot;); Serial1.println(ssid);
  uint8_t i = 0;
  while (WiFi.status() != WL_CONNECTED &amp;&amp; i++ &lt; 20) delay(500);
  if(i == 21){
    Serial1.print(&quot;Could not connect to&quot;); Serial1.println(ssid);
    while(1) delay(500);
  }
  //start UART and the server
  Serial.begin(115200);
  server.begin();
  server.setNoDelay(true);
  
  Serial1.print(&quot;Ready! Use 'telnet &quot;);
  Serial1.print(WiFi.localIP());
  Serial1.println(&quot; 23' to connect&quot;);
}

void loop() {
  uint8_t i;
  //check if there are any new clients
  if (server.hasClient()){
    for(i = 0; i &lt; MAX_SRV_CLIENTS; i++){
      //find free/disconnected spot
      if (!serverClients[i] || !serverClients[i].connected()){
        if(serverClients[i]) serverClients[i].stop();
        serverClients[i] = server.available();
        Serial1.print(&quot;New client: &quot;); Serial1.print(i);
        continue;
      }
    }
    //no free/disconnected spot so reject
    WiFiClient serverClient = server.available();
    serverClient.stop();
  }
  //check clients for data
  for(i = 0; i &lt; MAX_SRV_CLIENTS; i++){
    if (serverClients[i] &amp;&amp; serverClients[i].connected()){
      if(serverClients[i].available()){
        //get data from the telnet client and push it to the UART
        while(serverClients[i].available()) Serial.write(serverClients[i].read());
      }
    }
  }
  //check UART for data
  if(Serial.available()){
    size_t len = Serial.available();
    uint8_t sbuf[len];
    Serial.readBytes(sbuf, len);
    //push UART data to all connected telnet clients
    for(i = 0; i &lt; MAX_SRV_CLIENTS; i++){
      if (serverClients[i] &amp;&amp; serverClients[i].connected()){
        serverClients[i].write(sbuf, len);
        delay(1);
      }
    }
  }
}</pre>
<p>ArduinoIDE へ、ESP8266 Arduino Core の最新（ver. 1.6.5-1044-g170995a, built on Aug 10, 2015）を収めました。</p>
<p>SDK1.3 が収まったものは、以下のStaging versionから入れました。</p>
<blockquote>
<p><a title="https://github.com/esp8266/Arduino" href="https://github.com/esp8266/Arduino" target="_blank" rel="noopener noreferrer external" data-wpel-link="external" class="wpel-icon-right">https://github.com/esp8266/Arduino<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p>Staging version<br />
    <br />Boards manager link: http://arduino.esp8266.com/staging/package_esp8266com_index.json</p>
</blockquote>
<p>リファレンスも出来て、だんだんと充実してきたようです。</p>
<p><a href="http://arduino.esp8266.com/versions/1.6.5-1044-g170995a/doc/reference.html" target="_blank" rel="noopener noreferrer external" data-wpel-link="external"><img loading="lazy" title="esp-12_pin" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="esp-12_pin" src="./../../../images/esp12_pin.png" width="467" height="280" /></a> </p>
<p>スケッチは、スケッチの例＞ESP8266Wifi ＞WiFiTelnetToSerial のところから辿っていきます。<br />
  <br />ボード設定は、以下のようにしました。</p>
<blockquote>
<p>Borad : Generic ESP8266 Module<br />
    <br />Flash mode : QIO</p>
<p>Flash frequency : 40Mhz</p>
<p>CPU frequency : 80Mhz</p>
<p>Flash size : 4M (3M SPIFFS)</p>
<p>Upload speed : 115200</p>
</blockquote>
<p>配線は、RasPi2 の TX RX を ESP12 のRX TX へつなぎ、3.3V のVCC と GND をつなぐ感じ。RasPiには、シリアルコンソールの設定がしてある状態で電源ON</p>
<p>5,6秒ほどで、ESP12 がアクセスポイントへ接続するので、ESP12 がIP を何をとっているか、DHCPの払い出しIP をを見て、以下のコマンドで接続。socat は brew で入れました。</p>
<blockquote>
<p>
    <br />$ socat STDIN tcp-connect:192.168.1.36:23</p>
</blockquote>
<p>これで、シリアル接続のものは、WiFi 化できそうです。接続するツールは工夫する必要がありそうです。たとえば、osx だと、MultiCom というツールがあり、接続をパイプできるので便利です。</p>
<p><img loading="lazy" title="MultiCom_と_WiFiTelnetToSerial___Arduino_1_6_5_Hourly_Build_2015_06_12_03_13" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="MultiCom_と_WiFiTelnetToSerial___Arduino_1_6_5_Hourly_Build_2015_06_12_03_13" src="./../../../images/multicom__wifitelnettoserial___arduino_1_6_5_hourly_build_2015_06_12_03_13.png" width="338" height="158" /> </p>
<p><img loading="lazy" title="ishizaka_—_telnet_—_ttys003_—_70×21_と_ishizaka_—_telnet_—_ttys004_—_70×21_と_Change_log" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="ishizaka_—_telnet_—_ttys003_—_70×21_と_ishizaka_—_telnet_—_ttys004_—_70×21_と_Change_log" src="./../../../images/ishizaka__telnet__ttys003__7021__ishizaka__telnet__ttys004__7021__change_log.png" width="517" height="652" />&#160; <br />まだ、あんまり使い方はわかっていないんですが、IPとポート指定で ESP12 のWiFi へ接続し、それをローカルのプロキシーのようなものに接続し、複数接続できるようです。Windows のcom0com のようなのが欲しかったのですが、osx では見つけられませんでした。</p>
<p>あと、リモートからだと、コンソールのサイズも大きいほうが使いやすいので、getty の設定を以下のように変更。</p>
<blockquote>
<p> &#8212;- /etc/default/console-setup</p>
<p>::</p>
<p>SCREEN_WIDTH=150<br />
    <br />SCREEN_HEIGHT=60</p>
</blockquote>
<p>あと、環境変数へ設定。</p>
<blockquote>
<p>&#8212;- .bashrc</p>
<p>::</p>
<p>export LINES=150<br />
    <br />export COLUMNS=60</p>
</blockquote>
<p>とりあえず、こんな感じで使えるようになりました。tab補完や、そういうのはどうやるんでしょうね？ま、おいおい。</p>
<p>USB to シリアル がなくてもワイヤレスで、シリアルが使えるというのはなんとも、慣れないですが、今後活用のアイデアも出てくるかもしれません。ESP12 に下駄をはかせず、基盤にうまく実装すれば蓋の中に納まりそうですし。RasPiのベアメタル開発に手を出したときには便利かもしれませんね。</p>
<p>リチウム電池とESPを組み合わせて、単品のシリアルWiFi機器とすれば、何か応用できるかもです。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-966" class="post-966 post type-post status-publish format-standard hentry category-esp8266 category-raspberry-pi">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/966/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-08-17T00:40:14+09:00">2015年8月17日</time></a> </span><span class="posted-on">更新日:2015年8月17日</span> <span class="categories">  <a href="./../../../category/esp8266.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/raspberry-pi.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Raspberry Pi</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /966.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">osx のシリアルポートのユーティリティーあれこれ</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>シリアルをtelnet 経由してつなげるようになったので、ArduinoIDE からシリアルをWiFi で書き込めるようにしてみようとあれこれやること、1日弱。結局、osx では良いツールが見つからずできませんでした。   </p>
<p>何ができなかったかと言うと、仮想シリアルポートを作成して、それをArduinoIDE から認識できずで、何かやり方があるんだろうと思います。socat の使い方が悪いんだと思うので、継続して調査。Windows だとこのあたりのツールはたくさんあって、苦労しない感じなので、次回は、Windows でやってみることに。    </p>
<p>で、いろいろsocat の使い方を試しているうちに、昨日の疑問が解けました。</p>
<p>・ESP12 の接続IPにつなげて、echo が表示されてしまう問題   <br />・CTL + C など 接続した先でやりたいんだけど、socat の接続元（osx 側）で CTL + C になる問題    </p>
<p>これは、以下のようにすれば良いようです。</p>
<blockquote>
<p>$ socat STDIN,raw,echo=0 TCP:192.168.1.36:23      </p>
</blockquote>
<p>raw をつけておけば、そのままコントロール信号も送られるけども、手元のターミナルは中断できないので、ターミナルウィンドウを閉じてしまう感じ。tcpdump とか、WiFi 経由のシリアルから入って採取してるときとか、CTL + C できるし、上矢印のコマンド履歴も、tab 補完キーも効きます。理屈がわかってしまえば、あ、そうかということですが。。。。</p>
<p>&#160;</p>
<p>調べているときに、よくまとまったBlog記事があったので、メモしておきます。</p>
<blockquote>
<p>Make RS232 Serial Devices Accessible via Ethernet      <br /><a title="http://blog.philippklaus.de/2011/08/make-rs232-serial-devices-accessible-via-ethernet/" href="http://blog.philippklaus.de/2011/08/make-rs232-serial-devices-accessible-via-ethernet/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://blog.philippklaus.de/2011/08/make-rs232-serial-devices-accessible-via-ethernet/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>最後に、socat でのソケットを分割するには、以下のようにやれば良い事がわかりました。   </p>
<p><img loading="lazy" title="ishizaka_—_socat_—_ttys008_—_76×23_と_ishizaka_—_socat_—_ttys007_—_76×23_と_ishizaka_—_socat_—_ttys002_—_76×23_と_ishizaka_—_tail_—_ttys009_—_76×36" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="ishizaka_—_socat_—_ttys008_—_76×23_と_ishizaka_—_socat_—_ttys007_—_76×23_と_ishizaka_—_socat_—_ttys002_—_76×23_と_ishizaka_—_tail_—_ttys009_—_76×36" src="./../../../images/ishizaka__socat__ttys008__7623__ishizaka__socat__ttys007__7623__ishizaka__socat__ttys002__7623__.png" width="561" height="1598" /> </p>
<pre class="brush: cpp; gutter: false; toolbar: false; collapse: true; auto-links: false; smart-tabs: false;">sudo socat -d -d -d -d -lf /tmp/socat \
pty,\
link=/dev/master,\
raw,\
echo=0,\
user=junkhack,\
group=staff\
 \
pty,\
link=/dev/slave,\
raw,\
echo=0,\
user=junkhack,\
group=staff</pre>
<p>&#160;</p>
<p>&#160;</p>
<p>どうやって、arduinoIDE のシリアルポートに表示させるかが課題です。</p>
<p>WiFi 経由のシリアルコンソールで、ずっとtcpdump を流してテストしていますが、接続もきれず良い感じです。あと、話は飛びますが、ESP8266 Arduino Core のドキュメント見てましたら、File system も使えるようですね。これはある程度まで、データをメモリに貯めておいて、まとめてWifi 出力でデータを飛ばせば、電力の消費も抑えられそうです。sleep mode の下調べはおおよそ終わったので、コード実装して、電池駆動にしてテストするデバイス作りを夏休み（まだこれからなんですが）にやれればと思っています。ESP8266 、こんなに遊べるとは。まだlua にするのもありますしね。今年いっぱいは遊べる感じです。飽きるか、いきづまらなければね。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-984" class="post-984 post type-post status-publish format-standard hentry category-esp8266">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/984/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-08-19T21:34:35+09:00">2015年8月19日</time></a> </span><span class="posted-on">更新日:2015年8月19日</span> <span class="categories">  <a href="./../../../category/esp8266.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /984.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">ESP12の配線いろいろ</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>&#160; </p>
<p>ESP-12 や ESP-07 は2mm ピッチの穴が開いているのでブレッドボードやユニバーサル基盤に収まらず、変換基盤をつけたり自作したりしているわけですが、世の中のそんな実装を集めてみました。</p>
<p><img loading="lazy" title="2015-05-08 13.15.50" style="border-top:0;border-right:0;border-bottom:0;float:none;margin-left:auto;border-left:0;display:block;margin-right:auto;" border="0" alt="2015-05-08 13.15.50" src="./../../../images/2015050813-15-50.jpg" width="640" height="360" /></p>
<p align="center"><a title="http://wa0uwh.blogspot.jp/2015/05/esp8266-esp-12.html" href="http://wa0uwh.blogspot.jp/2015/05/esp8266-esp-12.html" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://wa0uwh.blogspot.jp/2015/05/esp8266-esp-12.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="9557225000_1418754453" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="9557225000_1418754453" src="./../../../images/9557225000_1418754453.jpg" width="600" height="480" /> </p>
<p align="center"><img loading="lazy" title="1524219100_1418754452" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="1524219100_1418754452" src="./../../../images/1524219100_1418754452.jpg" width="600" height="480" /> </p>
<p align="center"><a title="http://www.esp8266.com/viewtopic.php?f=13&amp;t=782" href="http://www.esp8266.com/viewtopic.php?f=13&amp;t=782" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.esp8266.com/viewtopic.php?f=13&amp;t=782<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="2015-03-14 17.06.27" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="2015-03-14 17.06.27" src="./../../../images/2015031417-06-27.jpg" width="640" height="474" /> </p>
<p align="center"><a title="http://blog.squix.ch/2015/03/esp8266-module-comparison-esp-01-esp-05.html" href="http://blog.squix.ch/2015/03/esp8266-module-comparison-esp-01-esp-05.html" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://blog.squix.ch/2015/03/esp8266-module-comparison-esp-01-esp-05.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="FJV7WFII50CPT2P.LARGE" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="FJV7WFII50CPT2P.LARGE" src="./../../../images/fjv7wfii50cpt2p-large_.jpg" width="640" height="480" /> </p>
<p align="center"><a title="http://www.instructables.com/id/Make-ESP8266-REV-12-prototype-friendly/" href="http://www.instructables.com/id/Make-ESP8266-REV-12-prototype-friendly/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.instructables.com/id/Make-ESP8266-REV-12-prototype-friendly/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="FYLODIII622H6UB.LARGE" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="FYLODIII622H6UB.LARGE" src="./../../../images/fylodiii622h6ub-large_.jpg" width="640" height="351" /> </p>
<p align="center"><a title="http://www.instructables.com/id/Getting-Started-with-the-ESP8266-ESP-12/" href="http://www.instructables.com/id/Getting-Started-with-the-ESP8266-ESP-12/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.instructables.com/id/Getting-Started-with-the-ESP8266-ESP-12/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="hqdefault" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="hqdefault" src="./../../../images/hqdefault.jpg" width="480" height="360" /> </p>
<p align="center"><a title="https://www.youtube.com/watch?v=wBfCPHXtSSY" href="https://www.youtube.com/watch?v=wBfCPHXtSSY" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://www.youtube.com/watch?v=wBfCPHXtSSY<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="IMAG0091" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="IMAG0091" src="./../../../images/imag0091.jpg" width="468" height="480" /> </p>
<p align="center"><a title="http://www.element14.com/community/community/design-challenges/sudden-impact/blog/2015/03/19/easyconfigure--remote-sensor-unit-preparation" href="http://www.element14.com/community/community/design-challenges/sudden-impact/blog/2015/03/19/easyconfigure--remote-sensor-unit-preparation" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.element14.com/community/community/design-challenges/sudden-impact/blog/2015/03/19/easyconfigure&#8211;remote-sensor-unit-preparation<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="ESP-07-Soldered-to-Perf-Board-2_sm" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="ESP-07-Soldered-to-Perf-Board-2_sm" src="./../../../images/esp07solderedtoperfboard2_sm.jpg" width="461" height="480" /> </p>
<p align="center"><a title="http://2xod.com/articles/ESP8266_Quick_Getting_Started/" href="http://2xod.com/articles/ESP8266_Quick_Getting_Started/" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://2xod.com/articles/ESP8266_Quick_Getting_Started/<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="P1050194" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="P1050194" src="./../../../images/p1050194.jpg" width="640" height="480" /> </p>
<p align="center"><a title="http://hackers.gallery/672/electronics/sunday-soldering-20150215" href="http://hackers.gallery/672/electronics/sunday-soldering-20150215" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://hackers.gallery/672/electronics/sunday-soldering-20150215<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="38de9bd81791b5692ce1645024349111" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="38de9bd81791b5692ce1645024349111" src="./../../../images/38de9bd81791b5692ce1645024349111.jpg" width="640" height="480" /> </p>
<p align="center"><a title="http://ehbtj.com/electronics/esp-12-try" href="http://ehbtj.com/electronics/esp-12-try" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://ehbtj.com/electronics/esp-12-try<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="B87_OXdIIAEOKaX" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="B87_OXdIIAEOKaX" src="./../../../images/b87_oxdiiaeokax.jpg" width="431" height="480" /> </p>
<p align="center"><a title="https://twitter.com/markusulsass/status/562667626695258112" href="https://twitter.com/markusulsass/status/562667626695258112" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://twitter.com/markusulsass/status/562667626695258112<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="center"><img loading="lazy" title="IMG_5279" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="IMG_5279" src="./../../../images/img_5279.jpg" width="640" height="346" /> </p>
<p align="center"><a title="http://www.esp8266.com/viewtopic.php?f=11&amp;t=1568" href="http://www.esp8266.com/viewtopic.php?f=11&amp;t=1568" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.esp8266.com/viewtopic.php?f=11&amp;t=1568<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
<p align="center">&#160;</p>
<p align="center">&#160;</p>
<p align="left">実にいろんな実装方法があって楽しいです。薄くて、面積を小さくするにはやはりピンを直接くっつけるのが良さそうです。小さいですが、穴は開いていますので、そこにワイヤーを半田付けしてユニバーサル基盤につけるのがいいのかなと。</p>
<p align="center">&#160;</p>
<p align="left">自分は以下のような感じで、浅めのピンに直付けする案を考えています。</p>
<p align="left">&#160;</p>
<p align="center"><img loading="lazy" title="写真 1" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="写真 1" src="./../../../images/12.jpg" width="640" height="480" /> </p>
<p align="center">このピン、浅めでボードにはめ易いです。</p>
</p>
</p>
</p>
</p>
</p>
</p>
<p align="center"><img loading="lazy" title="写真 3" style="border-top:0;border-right:0;border-bottom:0;border-left:0;display:inline;" border="0" alt="写真 3" src="./../../../images/3.jpg" width="640" height="480" /> </p>
<p>ユニバーサル基盤は一番細いのにつけて内側に足を持ってくる感じが良いかなと。ユニバーサル基盤につけるならば、リセットボタンと、ジャンパーかスイッチで書き込みモードに変更するものを付け、UART用のメスピンヘッダーをつけようかなと。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
				
<article id="post-990" class="post-990 post type-post status-publish format-standard hentry category-arduino category-esp8266 category-raspberry-pi">
	<div class="entry-wrapper">



		<header class="entry-header">
					<span class="entry-format theme-genericon"></span>
	
			<div class="entry-meta">
				<span class="posted-on">投稿日: <a href="https://hack.gpl.jp/990/" rel="bookmark noopener noreferrer" data-wpel-link="internal"><time class="entry-date published updated" datetime="2015-08-21T19:01:05+09:00">2015年8月21日</time></a> </span><span class="posted-on">更新日:2015年8月21日</span> <span class="categories">  <a href="./../../../category/arduino.html" rel="category tag noopener noreferrer" data-wpel-link="internal">arduino</a>, <a href="./../../../category/esp8266.html" rel="category tag noopener noreferrer" data-wpel-link="internal">ESP8266</a>, <a href="./../../../category/raspberry-pi.html" rel="category tag noopener noreferrer" data-wpel-link="internal">Raspberry Pi</a></span>			</div><!-- .entry-meta -->

							<h1 class="entry-title"><a href="./../../../ /990.html" rel="bookmark noopener noreferrer" data-wpel-link="internal">RasPi2 でスタンドアローンThingspeak Server</a></h1>					</header><!-- .entry-header -->

		<div class="entry-content">
			<p>最初見たときは、Thingspeak をプロキシーするか、API をたたいているんだと思っていましたが、これは単体で動作するっていうことなんでしょうかね？</p>
<blockquote>
<p><a title="https://github.com/iobridge/thingspeak" href="https://github.com/iobridge/thingspeak" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">https://github.com/iobridge/thingspeak<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>手順を見る限り、MySQL + Ruby + Rails 入れてる感じです。</p>
<p>これをRaspiで動作させて、ESP8266 からのセンサーを投げているブログを見ました。</p>
<blockquote>
<p>Raspberry PI &#8211; Standalone Thingspeak Server installation       <br /><a title="http://www.esp8266-projects.com/2015/05/raspberry-pi-standalone-thingspeak.html" href="http://www.esp8266-projects.com/2015/05/raspberry-pi-standalone-thingspeak.html" data-wpel-link="external" target="_blank" rel="external noopener noreferrer" class="wpel-icon-right">http://www.esp8266-projects.com/2015/05/raspberry-pi-standalone-thingspeak.html<span class="wpel-icon wpel-image wpel-icon-1"></span></a></p>
</blockquote>
<p>&#160;</p>
<p>今日から夏休みなので、これも題材としたいなと。うまく動けば、RasPi2 + ESP8266 で低消費電力なデータロガーができそうです。</p>
					</div><!-- .entry-content -->

			<footer class="entry-footer">
							
			</footer><!-- .entry-footer -->
		</div><!-- .entry-wrapper -->
</article><!-- #post-## -->

			
			
	<nav class="navigation posts-navigation" role="navigation" aria-label="投稿">
		<h2 class="screen-reader-text">投稿ナビゲーション</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://hack.gpl.jp/category/esp8266/page/3/" data-wpel-link="internal" rel="noopener noreferrer">過去の投稿</a></div><div class="nav-next"><a href="./../../../category/esp8266.html" data-wpel-link="internal" rel="noopener noreferrer">新しい投稿</a></div></div>
	</nav>
		
		</main><!-- #main -->
	</section><!-- #primary -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer wrap" role="contentinfo">
		<div class="site-info">
			Copyleft - all rights reversed.
			<span class="sep"> | </span>
			JunkHack 2011 - 2021
			<span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/about-junkhack/" data-wpel-link="internal" rel="noopener noreferrer">運営者情報<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/sendmail/" data-wpel-link="internal" rel="noopener noreferrer">お問い合わせ<span class="gf"></a><span class="sep"> | </span>
			<a href="https://junkhack.gpl.jp/privacy/" data-wpel-link="internal" rel="noopener noreferrer">プライバシーポリシー<span class="gf"></a>
		</div><!-- .site-info -->

	</footer><!-- #colophon -->
</div><!-- #page -->

        <div id="wpfront-scroll-top-container">
            <img src="./../../../images/1.png" alt="" />        </div>
                <script type="text/javascript">
            function wpfront_scroll_top_init() {
                if (typeof wpfront_scroll_top === "function" && typeof jQuery !== "undefined") {
                    wpfront_scroll_top({"scroll_offset":100,"button_width":0,"button_height":0,"button_opacity":0.8,"button_fade_duration":200,"scroll_duration":400,"location":1,"marginX":20,"marginY":20,"hide_iframe":false,"auto_hide":false,"auto_hide_after":2,"button_action":"top","button_action_element_selector":"","button_action_container_selector":"html, body","button_action_element_offset":0});
                } else {
                    setTimeout(wpfront_scroll_top_init, 100);
                }
            }
            wpfront_scroll_top_init();
        </script>
        <script type='text/javascript' src='./../../../js/core.min.js' id='jquery-ui-core-js'></script>
<script type='text/javascript' src='./../../../js/menu.min.js' id='jquery-ui-menu-js'></script>
<script type='text/javascript' src='./../../../js/wp-polyfill.min.js' id='wp-polyfill-js'></script>
<script type='text/javascript' id='wp-polyfill-js-after'>
( 'fetch' in window ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-fetch.min.js?ver=3.0.0"></scr' + 'ipt>' );( document.contains ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-node-contains.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.DOMRect ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-dom-rect.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.URL && window.URL.prototype && window.URLSearchParams ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-url.min.js?ver=3.6.4"></scr' + 'ipt>' );( window.FormData && window.FormData.prototype.keys ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-formdata.min.js?ver=3.0.12"></scr' + 'ipt>' );( Element.prototype.matches && Element.prototype.closest ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-element-closest.min.js?ver=2.0.2"></scr' + 'ipt>' );( 'objectFit' in document.documentElement.style ) || document.write( '<script src="https://hack.gpl.jp/wp-includes/js/dist/vendor/wp-polyfill-object-fit.min.js?ver=2.3.4"></scr' + 'ipt>' );
</script>
<script type='text/javascript' src='./../../../js/dom-ready.min.js' id='wp-dom-ready-js'></script>
<script type='text/javascript' src='./../../../js/hooks.min.js' id='wp-hooks-js'></script>
<script type='text/javascript' src='./../../../js/i18n.min.js' id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
wp.i18n.setLocaleData( { 'text direction\u0004ltr': [ 'ltr' ] } );
</script>
<script type='text/javascript' id='wp-a11y-js-translations'>
( function( domain, translations ) {
	var localeData = translations.locale_data[ domain ] || translations.locale_data.messages;
	localeData[""].domain = domain;
	wp.i18n.setLocaleData( localeData, domain );
} )( "default", {"translation-revision-date":"2021-05-20 01:00:08+0000","generator":"GlotPress\/3.0.0-alpha.2","domain":"messages","locale_data":{"messages":{"":{"domain":"messages","plural-forms":"nplurals=1; plural=0;","lang":"ja_JP"},"Notifications":["\u901a\u77e5"]}},"comment":{"reference":"wp-includes\/js\/dist\/a11y.js"}} );
</script>
<script type='text/javascript' src='./../../../js/a11y.min.js' id='wp-a11y-js'></script>
<script type='text/javascript' id='jquery-ui-autocomplete-js-extra'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002","oneResult":"1\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","manyResults":"%d\u4ef6\u306e\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\u4e0a\u4e0b\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002","itemSelected":"\u9805\u76ee\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u3002"};
/* ]]> */
</script>
<script type='text/javascript' src='./../../../js/autocomplete.min.js' id='jquery-ui-autocomplete-js'></script>
<script type='text/javascript' src='./../../../js/wpfront-scroll-top.min.js' id='wpfront-scroll-top-js'></script>
<script type='text/javascript' src='./../../../js/hew.js' id='hew-scripts-js'></script>
<script type='text/javascript' src='./../../../js/navigation.js' id='hew-navigation-js'></script>
<script type='text/javascript' src='./../../../js/skip-link-focus-fix.js' id='hew-skip-link-focus-fix-js'></script>
<script type='text/javascript' src='./../../../js/wp-embed.min.js' id='wp-embed-js'></script>

</body>
</html>

<!--This file was exported by "Export WP Page to Static HTML" plugin which created by ReCorp (https://myrecorp.com) -->